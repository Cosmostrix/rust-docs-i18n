<!DOCTYPE html>
<h1><code>abi_ptx</code></h1>
<br>
<p>The tracking issue for this feature is: <a class="notranslate" href="#4#38788">#38788</a></p>
<br>
<a class="notranslate" href="#1https://github.com/rust-lang/rust/issues/38788">#38788</a>
<br>
<p>------------------------</p>
<br>
<p>When emitting PTX code, all vanilla Rust functions (<code>fn</code>) get translated to
&quot;device&quot; functions. These functions are <i>not</i> callable from the host via the
CUDA API so a crate with only device functions is not too useful!</p>
<br>
<p>OTOH, &quot;global&quot; functions <i>can</i> be called by the host; you can think of them
as the real public API of your crate. To produce a global function use the
<code>&quot;ptx-kernel&quot;</code> ABI.</p>
<br>
<p><!-- NOTE(ignore) this example is specific to the nvptx targets --></p>
<br>
<div data-lang=" rust,ignore"><div data-l="#![feature(abi_ptx)]"></div><div data-l="#![no_std]"></div><div data-l=""></div><div data-l="pub unsafe extern &quot;ptx-kernel&quot; fn global_function() {"></div><div data-l="    device_function();"></div><div data-l="}"></div><div data-l=""></div><div data-l="pub fn device_function() {"></div><div data-l="#    // .."></div><div data-l="    // ">..</div><div data-l="}"></div></div>
<br>
<div data-lang=" text"><div data-l="$ xargo rustc --target nvptx64-nvidia-cuda --release -- --emit=asm"></div><div data-l=""></div><div data-l="$ cat $(find -name '*.s')"></div><div data-l="//"></div><div data-l="#// Generated by LLVM NVPTX Back-End"></div><div data-l="// ">Generated by LLVM NVPTX Back-End</div><div data-l="//"></div><div data-l=""></div><div data-l=".version 3.2"></div><div data-l=".target sm_20"></div><div data-l=".address_size 64"></div><div data-l=""></div><div data-l="#        // .globl       _ZN6kernel15global_function17h46111ebe6516b382E"></div><div data-l="        // ">.globl       <s>ZN6kernel15global</s>function17h46111ebe6516b382E</div><div data-l=""></div><div data-l=".visible .entry _ZN6kernel15global_function17h46111ebe6516b382E()"></div><div data-l="{"></div><div data-l=""></div><div data-l=""></div><div data-l="        ret;"></div><div data-l="}"></div><div data-l=""></div><div data-l="#        // .globl       _ZN6kernel15device_function17hd6a0e4993bbf3f78E"></div><div data-l="        // ">.globl       <s>ZN6kernel15device</s>function17hd6a0e4993bbf3f78E</div><div data-l=".visible .func _ZN6kernel15device_function17hd6a0e4993bbf3f78E()"></div><div data-l="{"></div><div data-l=""></div><div data-l=""></div><div data-l="        ret;"></div><div data-l="}"></div></div>