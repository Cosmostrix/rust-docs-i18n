<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=plugin.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhgQ4ezENlkxSVYGeAHMYQ9vf0ngJQ" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <code>plugin</code> </h1> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The tracking issue for this feature is: <a class=notranslate href=#4#29597>#29597</a></span>この機能のトラッキングに関する問題は次の<a class=notranslate href=#4#29597>#29597</a>です。 <a class=notranslate href=#4#29597>#29597</a></span> </p><br> <a class=notranslate href=#1https://github.com/rust-lang/rust/issues/29597>#29597</a> <br> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This feature is part of &quot;compiler plugins.&quot;</span>この機能は「コンパイラプラグイン」の一部です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It will often be used with the <a class=notranslate href="#4`plugin_registrar`">`plugin_registrar`</a> and <code>rustc_private</code> features.</span>これは<a class=notranslate href="#4`plugin_registrar`">`plugin_registrar`</a>と<code>rustc_private</code>機能でよく使われます。</span> </p><br> <a class=notranslate href=#1language-features/plugin-registrar.html>`plugin_registrar`</a> <br> <p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">------------------------</span> ------------------------</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>rustc</code> can load compiler plugins, which are user-provided libraries that extend the compiler&#39;s behavior with new syntax extensions, lint checks, etc.</span> <code>rustc</code>はコンパイラのプラグインを読み込むことができます。このプラグインは、コンパイラの動作を新しい構文拡張やlintチェックなどで拡張するユーザ提供のライブラリです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A plugin is a dynamic library crate with a designated <i>registrar</i> function that registers extensions with <code>rustc</code> .</span>プラグインは、拡張機能を<code>rustc</code>で登録する指定された<i>レジストラ</i>機能を持つダイナミックライブラリクレート<code>rustc</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Other crates can load these extensions using the crate attribute <code>#€[plugin(...)]</code> .</span>他のクレートは、crate属性<code>#€[plugin(...)]</code>を使用してこれらの拡張をロードできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">See the <code>rustc_plugin</code> documentation for more about the mechanics of defining and loading a plugin.</span>プラグインの定義とロードの<code>rustc_plugin</code>詳細については、 <code>rustc_plugin</code>ドキュメントを参照してください。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If present, arguments passed as <code>#€[plugin(foo(... args ...))]</code> are not interpreted by rustc itself.</span>存在する場合、 <code>#€[plugin(foo(... args ...))]</code>として渡された引数は、rustc自身によって解釈されません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are provided to the plugin through the <code>Registry</code> &#39;s <code>args</code> method.</span>それらは、 <code>Registry</code>の<code>args</code>メソッドを通じてプラグインに提供されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the vast majority of cases, a plugin should <i>only</i> be used through <code>#€[plugin]</code> and not through an <code>extern crate</code> item.</span>大部分のケースでは、プラグインは<code>#€[plugin]</code>を通して<i>のみ</i>使用され、 <code>extern crate</code>アイテムでは使用されません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Linking a plugin would pull in all of libsyntax and librustc as dependencies of your crate.</span>プラグインをリンクすると、あなたのクレートの依存関係としてlibsyntaxとlibrustcのすべてが引き込まれます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is generally unwanted unless you are building another plugin.</span>これは、別のプラグインをビルドしない限り、一般的に望ましくありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>plugin_as_library</code> lint checks these guidelines.</span> <code>plugin_as_library</code> lintはこれらのガイドラインをチェックします。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The usual practice is to put compiler plugins in their own crate, separate from any <code>macro_rules€</code> macros or ordinary Rust code meant to be used by consumers of a library.</span>通常は、ライブラリのコンシューマが使用するための<code>macro_rules€</code>マクロや通常のRustコードとは別に、コンパイラプラグインを独自のクレートに入れます。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Syntax extensions</span>構文拡張</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Plugins can extend Rust&#39;s syntax in various ways.</span>プラグインはさまざまな方法でRustの構文を拡張できます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">One kind of syntax extension is the procedural macro.</span> 1つの種類の構文拡張が手続き型マクロです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These are invoked the same way as <a class=notranslate href=#2../book/macros.html>ordinary macros</a> , but the expansion is performed by arbitrary Rust code that manipulates syntax trees at compile time.</span>これらは<a class=notranslate href=#2../book/macros.html>ordinary macros</a>と同じように呼び出され<a class=notranslate href=#2../book/macros.html>ordinary macros</a>が、展開はコンパイル時に構文ツリーを操作する任意のRustコードによって実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s write a plugin <a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/test/run-pass-fulldeps/auxiliary/roman_numerals.rs><code>roman_numerals.rs</code></a> that implements Roman numeral integer literals.</span>ローマ数字の整数リテラルを実装するプラグイン<a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/test/run-pass-fulldeps/auxiliary/roman_numerals.rs><code>roman_numerals.rs</code></a>を作成しましょう。</span> </p><br><div data-lang=rust,ignore><div data-l=#![crate_type=&quot;dylib&quot;]></div><div data-l="#![feature(plugin_registrar, rustc_private)]"></div><div data-l=""></div><div data-l="extern crate syntax;"></div><div data-l="extern crate rustc;"></div><div data-l="extern crate rustc_plugin;"></div><div data-l=""></div><div data-l="use syntax::parse::token;"></div><div data-l="use syntax::tokenstream::TokenTree;"></div><div data-l="use syntax::ext::base::{ExtCtxt, MacResult, DummyResult, MacEager};"></div><div data-l="#//use syntax::ext::build::AstBuilder;  // A trait for expr_usize."></div><div data-l="use syntax::ext::build::AstBuilder;  // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A trait for expr_usize.</span> expr_usizeの特性。</span> </div><div data-l="use syntax::ext::quote::rt::Span;"></div><div data-l="use rustc_plugin::Registry;"></div><div data-l=""></div><div data-l="fn expand_rn(cx: &amp;mut ExtCtxt, sp: Span, args: &amp;[TokenTree])"></div><div data-l="        -&gt; Box&lt;MacResult + 'static&gt; {"></div><div data-l=""></div><div data-l="    static NUMERALS: &amp;'static [(&amp;'static str, usize)] = &amp;["></div><div data-l="        (&quot;M&quot;, 1000), (&quot;CM&quot;, 900), (&quot;D&quot;, 500), (&quot;CD&quot;, 400),"></div><div data-l="        (&quot;C&quot;,  100), (&quot;XC&quot;,  90), (&quot;L&quot;,  50), (&quot;XL&quot;,  40),"></div><div data-l="        (&quot;X&quot;,   10), (&quot;IX&quot;,   9), (&quot;V&quot;,   5), (&quot;IV&quot;,   4),"></div><div data-l="        (&quot;I&quot;,    1)];"></div><div data-l=""></div><div data-l="    if args.len() != 1 {"></div><div data-l="        cx.span_err("></div><div data-l="            sp,"></div><div data-l="            &amp;format!(&quot;argument should be a single identifier, but got {} arguments&quot;, args.len()));"></div><div data-l="        return DummyResult::any(sp);"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    let text = match args[0] {"></div><div data-l="        TokenTree::Token(_, token::Ident(s)) =&gt; s.to_string(),"></div><div data-l="        _ =&gt; {"></div><div data-l="            cx.span_err(sp, &quot;argument should be a single identifier&quot;);"></div><div data-l="            return DummyResult::any(sp);"></div><div data-l="        }"></div><div data-l="    };"></div><div data-l=""></div><div data-l="    let mut text = &amp;*text;"></div><div data-l="    let mut total = 0;"></div><div data-l="    while !text.is_empty() {"></div><div data-l="        match NUMERALS.iter().find(|&amp;&amp;(rn, _)| text.starts_with(rn)) {"></div><div data-l="            Some(&amp;(rn, val)) =&gt; {"></div><div data-l="                total += val;"></div><div data-l="                text = &amp;text[rn.len()..];"></div><div data-l="            }"></div><div data-l="            None =&gt; {"></div><div data-l="                cx.span_err(sp, &quot;invalid Roman numeral&quot;);"></div><div data-l="                return DummyResult::any(sp);"></div><div data-l="            }"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    MacEager::expr(cx.expr_usize(sp, total))"></div><div data-l=}></div><div data-l=""></div><div data-l=#[plugin_registrar]></div><div data-l="pub fn plugin_registrar(reg: &amp;mut Registry) {"></div><div data-l="    reg.register_macro(&quot;rn&quot;, expand_rn);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then we can use <code>rn€()</code> like any other macro:</span>それから、他のマクロと同じように<code>rn€()</code>使うことができます：</span> </p><br><div data-lang=rust,ignore><div data-l=#![feature(plugin)]></div><div data-l=#![plugin(roman_numerals)]></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    assert_eq!(rn!(MMXV), 2015);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The advantages over a simple <code>fn(&amp;str) -&gt; u32</code> are:</span>単純な<code>fn(&amp;str) -&gt; u32</code>の利点は次のとおりです。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The (arbitrarily complex) conversion is done at compile time.</span> （任意に複雑な）変換はコンパイル時に行われます。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Input validation is also performed at compile time.</span>入力検証もコンパイル時に実行されます。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It can be extended to allow use in patterns, which effectively gives a way to define new literal syntax for any data type.</span>これは、パターンでの使用を可能にするように拡張することができ、どのデータ型に対しても新しいリテラル構文を効果的に定義する方法を提供します。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In addition to procedural macros, you can define new <a class=notranslate href=#2../reference/attributes.html#derive><code>derive</code></a> -like attributes and other kinds of extensions.</span>手続き型マクロに加えて、新しい<a class=notranslate href=#2../reference/attributes.html#derive><code>derive</code></a>属性やその他の種類の拡張を定義することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">See <code>Registry::register_syntax_extension</code> and the <code>SyntaxExtension</code> enum.</span> <code>Registry::register_syntax_extension</code>と<code>SyntaxExtension</code>列挙型を参照してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For a more involved macro example, see <a class=notranslate href=#2https://github.com/rust-lang/regex/blob/master/regex_macros/src/lib.rs><code>regex_macros</code></a> .</span>より複雑なマクロの例については、 <a class=notranslate href=#2https://github.com/rust-lang/regex/blob/master/regex_macros/src/lib.rs><code>regex_macros</code></a>参照してください。</span> </p><br><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Tips and tricks</span>ヒントとテクニック</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some of the <a href=#2../book/first-edition/macros.html#debugging-macro-code>macro debugging tips</a> are applicable.</span>いくつかの<a href=#2../book/first-edition/macros.html#debugging-macro-code>マクロデバッグのヒント</a>が適用されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can use <code>syntax::parse</code> to turn token trees into higher-level syntax elements like expressions:</span> <code>syntax::parse</code>を使用<code>syntax::parse</code>と、トークンツリーを式のような上位レベルの構文要素にすることができます。</span> </p><br><div data-lang=rust,ignore><div data-l="fn expand_foo(cx: &amp;mut ExtCtxt, sp: Span, args: &amp;[TokenTree])"></div><div data-l="        -&gt; Box&lt;MacResult+'static&gt; {"></div><div data-l=""></div><div data-l="    let mut parser = cx.new_parser_from_tts(args);"></div><div data-l=""></div><div data-l="    let expr: P&lt;Expr&gt; = parser.parse_expr();"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Looking through <a href=#2https://github.com/rust-lang/rust/blob/master/src/libsyntax/parse/parser.rs><code>libsyntax</code> parser code</a> will give you a feel for how the parsing infrastructure works.</span> <a href=#2https://github.com/rust-lang/rust/blob/master/src/libsyntax/parse/parser.rs><code>libsyntax</code>パーサコード</a>を見ると、解析インフラストラクチャの仕組みがわかります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Keep the <code>Span</code> s of everything you parse, for better error reporting.</span>より良いエラー報告のために、解析したすべての<code>Span</code>保持してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can wrap <code>Spanned</code> around your custom data structures.</span>カスタムデータ構造の周りに<code>Spanned</code>をラップすることができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Calling <code>ExtCtxt::span_fatal</code> will immediately abort compilation.</span> <code>ExtCtxt::span_fatal</code>を呼び出すと、すぐにコンパイルが中止されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s better to instead call <code>ExtCtxt::span_err</code> and return <code>DummyResult</code> so that the compiler can continue and find further errors.</span>これは、代わりにコールする方が良いでしょう<code>ExtCtxt::span_err</code>して返す<code>DummyResult</code>コンパイラが継続し、さらにエラーを見つけることができるように。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To print syntax fragments for debugging, you can use <code>span_note</code> together with <code>syntax::print::pprust::*_to_string</code> .</span>デバッグ用の構文フラグメントを出力するには、 <code>syntax::print::pprust::*_to_string</code>と一緒に<code>span_note</code>を使用できます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The example above produced an integer literal using <code>AstBuilder::expr_usize</code> .</span>上記の例では、 <code>AstBuilder::expr_usize</code>を使用して整数リテラルを<code>AstBuilder::expr_usize</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As an alternative to the <code>AstBuilder</code> trait, <code>libsyntax</code> provides a set of quasiquote macros.</span> <code>AstBuilder</code>特性に代わるものとして、 <code>libsyntax</code>は一連の<code>libsyntax</code>マクロを提供しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are undocumented and very rough around the edges.</span>彼らは文書化されておらず、端には非常に荒いです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, the implementation may be a good starting point for an improved quasiquote as an ordinary plugin library.</span>しかし、実装は、通常のプラグインライブラリのように改善されたquasiquoteの良い出発点になるかもしれません。</span> </p><br><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lint plugins</span>リントプラグイン</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Plugins can extend <a href=#2../reference/attributes.html#lint-check-attributes>Rust&#39;s lint infrastructure</a> with additional checks for code style, safety, etc. Now let&#39;s write a plugin <a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/test/ui-fulldeps/auxiliary/lint_plugin_test.rs><code>lint_plugin_test.rs</code></a> that warns about any item named <code>lintme</code> .</span>プラグインは拡張することができ<a href=#2../reference/attributes.html#lint-check-attributes>錆の糸くずのインフラを</a>今度は、プラグインなど書いてみましょうコードスタイル、安全性、のために追加のチェックを<a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/test/ui-fulldeps/auxiliary/lint_plugin_test.rs><code>lint_plugin_test.rs</code></a>という名前のいずれかの項目について警告<code>lintme</code> 。</span> </p><br><div data-lang=rust,ignore><div data-l=#![feature(plugin_registrar)]></div><div data-l="#![feature(box_syntax, rustc_private)]"></div><div data-l=#![feature(macro_vis_matcher)]></div><div data-l=#![feature(macro_at_most_once_rep)]></div><div data-l=""></div><div data-l="extern crate syntax;"></div><div data-l=""></div><div data-l="#// Load rustc as a plugin to get macros"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Load rustc as a plugin to get macros</span>マクロを取得するためのプラグインとしてrustcをロードする</span> </div><div data-l=#[macro_use]></div><div data-l="extern crate rustc;"></div><div data-l="extern crate rustc_plugin;"></div><div data-l=""></div><div data-l="use rustc::lint::{EarlyContext, LintContext, LintPass, EarlyLintPass,"></div><div data-l="                  EarlyLintPassObject, LintArray};"></div><div data-l="use rustc_plugin::Registry;"></div><div data-l="use syntax::ast;"></div><div data-l=""></div><div data-l="declare_lint!(TEST_LINT, Warn, &quot;Warn about items named 'lintme'&quot;);"></div><div data-l=""></div><div data-l="struct Pass;"></div><div data-l=""></div><div data-l="impl LintPass for Pass {"></div><div data-l="    fn get_lints(&amp;self) -&gt; LintArray {"></div><div data-l="        lint_array!(TEST_LINT)"></div><div data-l="    }"></div><div data-l=}></div><div data-l=""></div><div data-l="impl EarlyLintPass for Pass {"></div><div data-l="    fn check_item(&amp;mut self, cx: &amp;EarlyContext, it: &amp;ast::Item) {"></div><div data-l="        if it.ident.as_str() == &quot;lintme&quot; {"></div><div data-l="            cx.span_lint(TEST_LINT, it.span, &quot;item is named 'lintme'&quot;);"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=}></div><div data-l=""></div><div data-l=#[plugin_registrar]></div><div data-l="pub fn plugin_registrar(reg: &amp;mut Registry) {"></div><div data-l="    reg.register_early_lint_pass(box Pass as EarlyLintPassObject);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then code like</span>次にコードを書く</span> </p><br><div data-lang=rust,ignore><div data-l=#![plugin(lint_plugin_test)]></div><div data-l=""></div><div data-l="fn lintme() { }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">will produce a compiler warning:</span>コンパイラの警告が表示されます：</span> </p><br><div data-lang=txt><div data-l="foo.rs:4:1: 4:16 warning: item is named 'lintme', #[warn(test_lint)] on by default"></div><div data-l="foo.rs:4 fn lintme() { }"></div><div data-l="         ^~~~~~~~~~~~~~~"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The components of a lint plugin are:</span> lintプラグインのコンポーネントは次のとおりです。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">one or more <code>declare_lint€</code> invocations, which define static <code>Lint</code> structs;</span>静的な<code>Lint</code>構造体を定義する1つ以上の<code>declare_lint€</code>呼び出し;</span> </div><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">a struct holding any state needed by the lint pass (here, none);</span> lintが必要とする任意の状態を保持する構造体（ここではnone）。</span> </div><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">a <code>LintPass</code> implementation defining how to check each syntax element.</span>それぞれの構文要素をチェックする方法を定義する<code>LintPass</code>実装。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A single <code>LintPass</code> may call <code>span_lint</code> for several different <code>Lint</code> s, but should register them all through the <code>get_lints</code> method.</span>単一<code>LintPass</code>呼び出すことが<code>span_lint</code> 、いくつかの異なったため<code>Lint</code>の、しかしを介してそれらのすべてを登録する必要があります<code>get_lints</code>方法。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lint passes are syntax traversals, but they run at a late stage of compilation where type information is available.</span>リントパスは構文トラバーサルですが、タイプ情報が利用できるコンパイルの後半に実行されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>rustc</code> &#39;s <a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/librustc/lint/builtin.rs>built-in lints</a> mostly use the same infrastructure as lint plugins, and provide examples of how to access type information.</span> <code>rustc</code>の<a class=notranslate href=#2https://github.com/rust-lang/rust/blob/master/src/librustc/lint/builtin.rs>built-in lints</a> lintは、ほとんどがlintプラグインと同じインフラストラクチャを使用し、型情報にアクセスする方法の例を提供します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lints defined by plugins are controlled by the usual <a href=#2../reference/attributes.html#lint-check-attributes>attributes and compiler flags</a> , eg <code>#[allow(test_lint)]</code> or <code>-A test-lint</code> .</span>プラグインで定義されたリントは、通常の<a href=#2../reference/attributes.html#lint-check-attributes>属性とコンパイラフラグ</a> <code>#[allow(test_lint)]</code>や<code>-A test-lint</code>など<code>#[allow(test_lint)]</code>によって制御されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These identifiers are derived from the first argument to <code>declare_lint€</code> , with appropriate case and punctuation conversion.</span>これらの識別子は、適切な大文字と小文字の変換を<code>declare_lint€</code>の最初の引数から導かれます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can run <code>rustc -W help foo.rs</code> to see a list of lints known to <code>rustc</code> , including those provided by plugins loaded by <code>foo.rs</code> .</span>あなたは実行することができます<code>rustc -W help foo.rs</code>することが知られているlintsのリストを参照し<code>rustc</code>することによってロードされたプラグインが提供するものを含め、 <code>foo.rs</code> 。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','plugin.html');});</script>