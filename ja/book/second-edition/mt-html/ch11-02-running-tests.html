<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch11-02-running-tests.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Controlling How Tests Are Run</span>テストの実行方法の制御</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Just as <code>cargo run</code> compiles your code and then runs the resulting binary, <code>cargo test</code> compiles your code in test mode and runs the resulting test binary.</span> <code>cargo run</code>コード<code>cargo run</code>コンパイルされ、バイナリが<code>cargo run</code>れるのと同じように、 <code>cargo test</code>コードをテストモードでコンパイルし、結果のテストバイナリを実行します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can specify command line options to change the default behavior of <code>cargo test</code> .</span>コマンドラインオプションを指定して、 <code>cargo test</code>デフォルト動作を変更することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, the default behavior of the binary produced by <code>cargo test</code> is to run all the tests in parallel and capture output generated during test runs, preventing the output from being displayed and making it easier to read the output related to the test results.</span>たとえば、 <code>cargo test</code>によって生成されたバイナリのデフォルトの動作は、すべてのテストを並行して実行し、テスト実行中に生成された出力をキャプチャし、出力が表示されないようにし、テスト結果に関連する出力を読みやすくすることです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some command line options go to <code>cargo test</code> , and some go to the resulting test binary.</span>いくつかのコマンドラインオプションは<code>cargo test</code>に行き、いくつかは結果のテストバイナリに行きます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To separate these two types of arguments, you list the arguments that go to <code>cargo test</code> followed by the separator <code>--</code> and then the ones that go to the test binary.</span>引数のこれらの2つのタイプを分離するために、あなたはに行く引数リスト<code>cargo test</code>区切りが続く<code>--</code>とテストバイナリに行き、その後のものを。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running <code>cargo test --help</code> displays the options you can use with <code>cargo test</code> , and running <code>cargo test -- --help</code> displays the options you can use after the separator <code>--</code> .</span>実行<code>cargo test --help</code>あなたが使用できるオプションが表示さ<code>cargo test</code>し、実行している<code>cargo test -- --help</code>あなたは、セパレータの後に使用できるオプションを表示します<code>--</code></span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running Tests in Parallel or Consecutively</span>並行または連続的にテストを実行する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When you run multiple tests, by default they run in parallel using threads.</span>複数のテストを実行すると、デフォルトではスレッドを使用して並列実行されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This means the tests will finish running faster so you can get feedback quicker on whether or not your code is working.</span>これは、テストがより速く実行されることを意味し、コードが機能しているかどうかを迅速にフィードバックできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because the tests are running at the same time, make sure your tests don&#39;t depend on each other or on any shared state, including a shared environment, such as the current working directory or environment variables.</span>テストは同時に実行されるので、テストがお互いに依存しないか、現在の作業ディレクトリや環境変数などの共有環境を含め、共有状態に依存しないようにしてください。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, say each of your tests runs some code that creates a file on disk named <i>test-output.txt</i> and writes some data to that file.</span>たとえば、それぞれのテストで、 <i>test-output.txt</i>という名前のディスク上にファイルを作成し、そのファイルにデータを書き込むコードを実行するとします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then each test reads the data in that file and asserts that the file contains a particular value, which is different in each test.</span>各テストでは、そのファイルのデータが読み込まれ、ファイルにはテストごとに異なる特定の値が含まれていることが示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because the tests run at the same time, one test might overwrite the file between when another test writes and reads the file.</span>テストは同時に実行されるため、あるテストで別のテストがファイルを書き込んだり、読み込んだりするまでにファイルを上書きすることがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The second test will then fail, not because the code is incorrect but because the tests have interfered with each other while running in parallel.</span> 2番目のテストは失敗します。コードが正しくないためではなく、テストが並行して実行されているので、テストが互いに干渉したためです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">One solution is to make sure each test writes to a different file;</span> 1つの解決策は、各テストが異なるファイルに書き込むことを確認することです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">another solution is to run the tests one at a time.</span>別の解決策は、一度に1つずつテストを実行することです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you don&#39;t want to run the tests in parallel or if you want more fine-grained control over the number of threads used, you can send the <code>--test-threads</code> flag and the number of threads you want to use to the test binary.</span>テストを並行して実行したくない場合や、使用するスレッド数をより細かく制御したい場合は、テストに使用するスレッドの数と<code>--test-threads</code>フラグを送信できますバイナリ。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Take a look at the following example:</span>次の例を見てください：</span> </p><br><div data-lang=text><div data-l="$ cargo test -- --test-threads=1"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We set the number of test threads to <code>1</code> , telling the program not to use any parallelism.</span>テストスレッドの数を<code>1</code>に設定し、プログラムに並列性を使用しないように指示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running the tests using one thread will take longer than running them in parallel, but the tests won&#39;t interfere with each other if they share state.</span>あるスレッドを使用してテストを実行すると、それらを並列に実行するより時間がかかりますが、テストが状態を共有する場合、テストは互いに干渉しません。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Showing Function Output</span>関数出力を表示する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By default, if a test passes, Rust&#39;s test library captures anything printed to standard output.</span>デフォルトでは、テストに合格すると、Rustのテストライブラリは標準出力に出力されたものをすべて取得します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, if we call <code>println€</code> in a test and the test passes, we won&#39;t see the <code>println€</code> output in the terminal;</span>たとえば、テストで<code>println€</code>を呼び出してテストに合格すると、端末で<code>println€</code>出力が表示されません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">we&#39;ll see only the line that indicates the test passed.</span>テストが成功したことを示す行だけが表示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If a test fails, we&#39;ll see whatever was printed to standard output with the rest of the failure message.</span>テストが失敗した場合は、残りの失敗メッセージと共に標準出力に表示されたものがすべて表示されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As an example, Listing 11-10 has a silly function that prints the value of its parameter and returns 10, as well as a test that passes and a test that fails.</span>たとえば、コードリスト11-10には、パラメータの値を出力して10を返すばかげた関数と、渡されたテストと失敗したテストがあります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="fn prints_and_returns_10(a: i32) -&gt; i32 {"></div><div data-l="    println!(&quot;I got the value {}&quot;, a);"></div><div data-l="    10"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::*;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn this_test_will_pass() {"></div><div data-l="        let value = prints_and_returns_10(4);"></div><div data-l="        assert_eq!(10, value);"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn this_test_will_fail() {"></div><div data-l="        let value = prints_and_returns_10(8);"></div><div data-l="        assert_eq!(5, value);"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 11-10: Tests for a function that calls <code>println€</code></span></span> <span class=caption>リスト11-10： <code>println€</code>を呼び出す関数のテスト</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we run these tests with <code>cargo test</code> , we&#39;ll see the following output:</span>これらのテストを<code>cargo test</code>で実行すると、次の出力が表示されます。</span> </p><br><div data-lang=text><div data-l="running 2 tests"></div><div data-l="test tests::this_test_will_pass ... ok"></div><div data-l="test tests::this_test_will_fail ... FAILED"></div><div data-l=""></div><div data-l=failures:></div><div data-l=""></div><div data-l="---- tests::this_test_will_fail stdout ----"></div><div data-l="        I got the value 8"></div><div data-l="thread 'tests::this_test_will_fail' panicked at 'assertion failed: `(left == right)`"></div><div data-l="  left: `5`,"></div><div data-l=" right: `10`', src/lib.rs:19:8"></div><div data-l="note: Run with `RUST_BACKTRACE=1` for a backtrace."></div><div data-l=""></div><div data-l=failures:></div><div data-l="    tests::this_test_will_fail"></div><div data-l=""></div><div data-l="test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that nowhere in this output do we see <code>I got the value 4</code> , which is what is printed when the test that passes runs.</span>この出力のどこ<code>I got the value 4</code>ことがわかり<code>I got the value 4</code> 。これは、通過するテストが実行されたときに表示される<code>I got the value 4</code>です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That output has been captured.</span>その出力がキャプチャされました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The output from the test that failed, <code>I got the value 8</code> , appears in the section of the test summary output, which also shows the cause of the test failure.</span>失敗したテストからの出力、 <code>I got the value 8</code> 、また、テストの失敗の原因を示してテストサマリー出力のセクションに表示されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we want to see printed values for passing tests as well, we can disable the output capture behavior by using the <code>--nocapture</code> flag:</span>テストを渡すための印刷された値も表示したい場合は、-- <code>--nocapture</code>フラグを使用して出力キャプチャ動作を無効にすることができます。</span> </p><br><div data-lang=text><div data-l="$ cargo test -- --nocapture"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we run the tests in Listing 11-10 again with the <code>--nocapture</code> flag, we see the following output:</span>リスト11-10のテストを<code>--nocapture</code>フラグで再実行すると、次のような出力が表示されます。</span> </p><br><div data-lang=text><div data-l="running 2 tests"></div><div data-l="I got the value 4"></div><div data-l="I got the value 8"></div><div data-l="test tests::this_test_will_pass ... ok"></div><div data-l="thread 'tests::this_test_will_fail' panicked at 'assertion failed: `(left == right)`"></div><div data-l="  left: `5`,"></div><div data-l=" right: `10`', src/lib.rs:19:8"></div><div data-l="note: Run with `RUST_BACKTRACE=1` for a backtrace."></div><div data-l="test tests::this_test_will_fail ... FAILED"></div><div data-l=""></div><div data-l=failures:></div><div data-l=""></div><div data-l=failures:></div><div data-l="    tests::this_test_will_fail"></div><div data-l=""></div><div data-l="test result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that the output for the tests and the test results are interleaved;</span>テスト用の出力とテスト結果はインターリーブされていることに注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the reason is that the tests are running in parallel, as we talked about in the previous section.</span>その理由は、前のセクションで説明したように、テストが並行して実行されているためです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Try using the <code>--test-threads=1</code> option and the <code>--nocapture</code> flag, and see what the output looks like then!</span> <code>--test-threads=1</code>オプションと<code>--nocapture</code>フラグを使って、出力がどのようなものか見てみましょう！</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running a Subset of Tests by Name</span>名前でテストのサブセットを実行する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Sometimes, running a full test suite can take a long time.</span>場合によっては、完全なテストスイートを実行するのに時間がかかることがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you&#39;re working on code in a particular area, you might want to run only the tests pertaining to that code.</span>特定の領域のコードで作業している場合は、そのコードに関連するテストのみを実行することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can choose which tests to run by passing <code>cargo test</code> the name or names of the test(s) you want to run as an argument.</span>あなたは、引数として実行したい<code>cargo test</code>の名前を<code>cargo test</code>渡すことで、実行するテストを選択することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To demonstrate how to run a subset of tests, we&#39;ll create three tests for our <code>add_two</code> function, as shown in Listing 11-11, and choose which ones to run.</span>テストのサブセットを実行する方法を示すために、 <code>add_two</code>関数に対して3つのテストを作成し（リスト11-11を参照）、実行するテストを選択します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::*;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn add_two_and_two() {"></div><div data-l="        assert_eq!(4, add_two(2));"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn add_three_and_two() {"></div><div data-l="        assert_eq!(5, add_two(3));"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn one_hundred() {"></div><div data-l="        assert_eq!(102, add_two(100));"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 11-11: Three tests with three different names</span></span> <span class=caption>リスト11-11：3つの異なる名前を持つ3つのテスト</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we run the tests without passing any arguments, as we saw earlier, all the tests will run in parallel:</span>前に見たように、引数を渡さずにテストを実行すると、すべてのテストが並行して実行されます。</span> </p><br><div data-lang=text><div data-l="running 3 tests"></div><div data-l="test tests::add_two_and_two ... ok"></div><div data-l="test tests::add_three_and_two ... ok"></div><div data-l="test tests::one_hundred ... ok"></div><div data-l=""></div><div data-l="test result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div></div><br><h4> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running Single Tests</span>単一のテストの実行</span> </h4><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can pass the name of any test function to <code>cargo test</code> to run only that test:</span>テスト関数の名前を<code>cargo test</code>に渡して、そのテストのみを実行することができます。</span> </p><br><div data-lang=text><div data-l="$ cargo test one_hundred"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running target/debug/deps/adder-06a75b4a1f2515e9"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::one_hundred ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Only the test with the name <code>one_hundred</code> ran;</span> <code>one_hundred</code>という名前のテストだけが走った。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the other two tests didn&#39;t match that name.</span>他の2つのテストはその名前と一致しませんでした。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The test output lets us know we had more tests than what this command ran by displaying <code>2 filtered out</code> at the end of the summary line.</span>テスト出力では、このコマンドが実行したものより多くのテストが要約行の最後に<code>2 filtered out</code>れて表示<code>2 filtered out</code>ていることがわかります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can&#39;t specify the names of multiple tests in this way;</span>このように複数のテストの名前を指定することはできません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">only the first value given to <code>cargo test</code> will be used.</span> <code>cargo test</code>与えられた最初の値のみが使用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But there is a way to run multiple tests.</span>しかし、複数のテストを実行する方法があります。</span> </p><br><h4> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Filtering to Run Multiple Tests</span>複数のテストを実行するためのフィルタリング</span> </h4><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can specify part of a test name, and any test whose name matches that value will be run.</span>テスト名の一部を指定することができ、その名前と一致する名前のテストが実行されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, because two of our tests&#39; names contain <code>add</code> , we can run those two by running <code>cargo test add</code> :</span>たとえば、テストの名前のうち2つに<code>add</code>が含まれているため、 <code>cargo test add</code>実行して2つの<code>cargo test add</code>実行できます。</span> </p><br><div data-lang=text><div data-l="$ cargo test add"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running target/debug/deps/adder-06a75b4a1f2515e9"></div><div data-l=""></div><div data-l="running 2 tests"></div><div data-l="test tests::add_two_and_two ... ok"></div><div data-l="test tests::add_three_and_two ... ok"></div><div data-l=""></div><div data-l="test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This command ran all tests with <code>add</code> in the name and filtered out the test named <code>one_hundred</code> .</span>このコマンドは、すべてのテストを名前付きで<code>add</code>して実行し、 <code>one_hundred</code>という名前のテストを除外しました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Also note that the module in which tests appear becomes part of the test&#39;s name, so we can run all the tests in a module by filtering on the module&#39;s name.</span>また、テストが表示されるモジュールはテストの名前の一部になりますので、モジュールの名前をフィルタリングしてモジュール内のすべてのテストを実行できます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Ignoring Some Tests Unless Specifically Requested</span>特に要求されない限り、いくつかのテストを無視する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Sometimes a few specific tests can be very time-consuming to execute, so you might want to exclude them during most runs of <code>cargo test</code> .</span>場合によっては、いくつかの特定のテストが実行に非常に時間がかかることがあるので、ほとんどの<code>cargo test</code>実行中にそれらを除外したい場合があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rather than listing as arguments all tests you do want to run, you can instead annotate the time-consuming tests using the <code>ignore</code> attribute to exclude them, as shown here:</span>あなたが実行したいすべてのテストを引数として列挙するのではなく、時間のかかるテストに<code>ignore</code>属性を使用してアノテーションを付けて除外することが<code>ignore</code>ます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(2 + 2, 4);"></div><div data-l=}></div><div data-l=""></div><div data-l=#[test]></div><div data-l=#[ignore]></div><div data-l="fn expensive_test() {"></div><div data-l="#    // code that takes an hour to run"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">code that takes an hour to run</span>実行に1時間かかるコード</span> </div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">After <code>#[test]</code> we add the <code>#[ignore]</code> line to the test we want to exclude.</span> <code>#[test]</code>後、 <code>#[ignore]</code>行を除外したいテストに追加します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now when we run our tests, <code>it_works</code> runs, but <code>expensive_test</code> doesn&#39;t:</span>我々はテストを実行すると、 <code>it_works</code>実行されますが、 <code>expensive_test</code>ません。</span> </p><br><div data-lang=text><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///projects/adder)"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.24 secs"></div><div data-l="     Running target/debug/deps/adder-ce99bcc2479f4607"></div><div data-l=""></div><div data-l="running 2 tests"></div><div data-l="test expensive_test ... ignored"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>expensive_test</code> function is listed as <code>ignored</code> .</span> <code>expensive_test</code>関数は<code>ignored</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we want to run only the ignored tests, we can use <code>cargo test -- --ignored</code> :</span>無視されたテストだけを実行したい場合、 <code>cargo test -- --ignored</code>を使うことができます<code>cargo test -- --ignored</code> ：</span> </p><br><div data-lang=text><div data-l="$ cargo test -- --ignored"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running target/debug/deps/adder-ce99bcc2479f4607"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test expensive_test ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 1 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By controlling which tests run, you can make sure your <code>cargo test</code> results will be fast.</span>どのテストを実行するかを制御することで、 <code>cargo test</code>結果が速くなるようにすることができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When you&#39;re at a point where it makes sense to check the results of the <code>ignored</code> tests and you have time to wait for the results, you can run <code>cargo test -- --ignored</code> instead.</span> <code>ignored</code>テストの結果をチェックするのが得意で、結果を待つ時間があるときは、代わりに<code>cargo test -- --ignored</code>実行できます。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch11-02-running-tests.html');});</script>