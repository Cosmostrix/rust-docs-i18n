<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch05-02-example-structs.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">An Example Program Using Structs</span>構造体を使用したサンプルプログラム</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To understand when we might want to use structs, let&#39;s write a program that calculates the area of a rectangle.</span>構造体をいつ使用するのかを理解するために、四角形の面積を計算するプログラムを作成してみましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll start with single variables, and then refactor the program until we&#39;re using structs instead.</span>単一の変数から始めて、代わりに構造体を使用するまでプログラムをリファクタリングします。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s make a new binary project with Cargo called <i>rectangles</i> that will take the width and height of a rectangle specified in pixels and calculate the area of the rectangle.</span>貨物は、ピクセル単位で指定された矩形の幅と高さを取ると、長方形の面積を計算します<i>長方形を</i>呼ばれるとのは、新しいバイナリプロジェクトを作ってみましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Listing 5-8 shows a short program with one way of doing exactly that in our project&#39;s <i>src/main.rs</i> .</span>リスト5-8は、プロジェクトの<i>src / main.rsに</i>ある短いプログラムを示しています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="fn main() {"></div><div data-l="    let width1 = 30;"></div><div data-l="    let height1 = 50;"></div><div data-l=""></div><div data-l="    println!("></div><div data-l="        &quot;The area of the rectangle is {} square pixels.&quot;,"></div><div data-l="        area(width1, height1)"></div><div data-l="    );"></div><div data-l=}></div><div data-l=""></div><div data-l="fn area(width: u32, height: u32) -&gt; u32 {"></div><div data-l="    width * height"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 5-8: Calculating the area of a rectangle specified by separate width and height variables</span></span> <span class=caption>リスト5-8：別々の幅と高さの変数で指定された矩形の面積を計算する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now, run this program using <code>cargo run</code> :</span>今度は、このプログラムを<code>cargo run</code>を使って<code>cargo run</code>ください：</span> </p><br><div data-lang=text><div data-l="The area of the rectangle is 1500 square pixels."></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Even though Listing 5-8 works and figures out the area of the rectangle by calling the <code>area</code> function with each dimension, we can do better.</span>リスト5-8が機能し、各次元で<code>area</code>関数を呼び出すことによって矩形の<code>area</code>計算しても、より良い結果が得られます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The width and the height are related to each other because together they describe one rectangle.</span>幅と高さは、それらが一緒に1つの長方形を記述しているため、互いに関連しています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The issue with this code is evident in the signature of <code>area</code> :</span>このコードの問題は、 <code>area</code>の署名で明らかです：</span> </p><br><div data-lang=rust,ignore><div data-l="fn area(width: u32, height: u32) -&gt; u32 {"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>area</code> function is supposed to calculate the area of one rectangle, but the function we wrote has two parameters.</span> <code>area</code>関数は1つの矩形の面積を計算することになっていますが、私たちが書いた関数は2つのパラメータを持っています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The parameters are related, but that&#39;s not expressed anywhere in our program.</span>パラメータは関連していますが、プログラムのどこにも表示されません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It would be more readable and more manageable to group width and height together.</span>幅と高さをグループ化すると、読みやすく、管理しやすくなります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ve already discussed one way we might do that in “The Tuple Type” section of Chapter 3: by using tuples.</span>第3章の「タプルタイプ」の項でタプルを使用してこれを行う方法の1つについて既に説明しました。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Refactoring with Tuples</span>タプルによるリファクタリング</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Listing 5-9 shows another version of our program that uses tuples.</span>リスト5-9に、タプルを使用する別のバージョンのプログラムを示します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="fn main() {"></div><div data-l="    let rect1 = (30, 50);"></div><div data-l=""></div><div data-l="    println!("></div><div data-l="        &quot;The area of the rectangle is {} square pixels.&quot;,"></div><div data-l="        area(rect1)"></div><div data-l="    );"></div><div data-l=}></div><div data-l=""></div><div data-l="fn area(dimensions: (u32, u32)) -&gt; u32 {"></div><div data-l="    dimensions.0 * dimensions.1"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 5-9: Specifying the width and height of the rectangle with a tuple</span></span> <span class=caption>リスト5-9：タプルで矩形の幅と高さを指定する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In one way, this program is better.</span>一つの方法では、このプログラムはより良いです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Tuples let us add a bit of structure, and we&#39;re now passing just one argument.</span>タプルは構造体を少し追加しましたが、今では引数を1つだけ渡しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But in another way, this version is less clear: tuples don&#39;t name their elements, so our calculation has become more confusing because we have to index into the parts of the tuple.</span>しかし、別の方法では、このバージョンはあまり明確ではありません。タプルはその要素の名前を指定しないので、タプルの部分にインデックスを付ける必要があるため、計算が複雑になります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It doesn&#39;t matter if we mix up width and height for the area calculation, but if we want to draw the rectangle on the screen, it would matter!</span>面積計算に幅と高さを混ぜても問題はありませんが、画面上に矩形を描きたい場合は問題になります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We would have to keep in mind that <code>width</code> is the tuple index <code>0</code> and <code>height</code> is the tuple index <code>1</code> .</span> <code>width</code>はタプルインデックス<code>0</code> 、 <code>height</code>はタプルインデックス<code>1</code>です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If someone else worked on this code, they would have to figure this out and keep it in mind as well.</span>他の誰かがこのコードで作業した場合、これを把握しておく必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It would be easy to forget or mix up these values and cause errors, because we haven&#39;t conveyed the meaning of our data in our code.</span>これらの値を忘れたり、混乱させたり、エラーを引き起こしたりするのは簡単でしょう。私たちのコードの中でデータの意味を伝えていないからです。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Refactoring with Structs: Adding More Meaning</span>構造体によるリファクタリング：意味の追加</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We use structs to add meaning by labeling the data.</span>構造体を使用して、データにラベルを付けることによって意味を追加します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can transform the tuple we&#39;re using into a data type with a name for the whole as well as names for the parts, as shown in Listing 5-10.</span>リスト5-10に示すように、使用しているタプルを、パーツの名前と名前の両方を持つデータ型に変換することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="struct Rectangle {"></div><div data-l="    width: u32,"></div><div data-l="    height: u32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let rect1 = Rectangle { width: 30, height: 50 };"></div><div data-l=""></div><div data-l="    println!("></div><div data-l="        &quot;The area of the rectangle is {} square pixels.&quot;,"></div><div data-l="        area(&amp;rect1)"></div><div data-l="    );"></div><div data-l=}></div><div data-l=""></div><div data-l="fn area(rectangle: &amp;Rectangle) -&gt; u32 {"></div><div data-l="    rectangle.width * rectangle.height"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 5-10: Defining a <code>Rectangle</code> struct</span></span> <span class=caption>リスト5-10： <code>Rectangle</code>構造体の定義</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here we&#39;ve defined a struct and named it <code>Rectangle</code> .</span>ここでは、構造体を定義して<code>Rectangle</code>という名前を付けました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Inside the curly brackets, we defined the fields as <code>width</code> and <code>height</code> , both of which have type <code>u32</code> .</span>中括弧の中では、フィールドの<code>width</code>と<code>height</code>を定義しました。どちらも<code>u32</code>型です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then in <code>main</code> , we created a particular instance of <code>Rectangle</code> that has a width of 30 and a height of 50.</span>次に、 <code>main</code>では幅30と高さ50の特定の<code>Rectangle</code>インスタンスを作成しました。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our <code>area</code> function is now defined with one parameter, which we&#39;ve named <code>rectangle</code> , whose type is an immutable borrow of a struct <code>Rectangle</code> instance.</span>私たちの<code>area</code>関数は、 <code>rectangle</code>という名前の1つのパラメータで定義されています。その型は、struct <code>Rectangle</code>インスタンスの不変の借用です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As mentioned in Chapter 4, we want to borrow the struct rather than take ownership of it.</span>第4章で述べたように、構造体の所有権を取るのではなく、構造体を借りたいと考えています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This way, <code>main</code> retains its ownership and can continue using <code>rect1</code> , which is the reason we use the <code>&amp;</code> in the function signature and where we call the function.</span>こうすることで、 <code>main</code>は所有権を保持し、 <code>rect1</code>を使用し続けることができ<code>rect1</code> 。これは、関数シグネチャで<code>&amp;</code>を使用し、関数を呼び出す理由です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>area</code> function accesses the <code>width</code> and <code>height</code> fields of the <code>Rectangle</code> instance.</span> <code>area</code>関数は、 <code>Rectangle</code>インスタンスの<code>width</code>および<code>height</code>フィールドにアクセスします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our function signature for <code>area</code> now says exactly what we mean: calculate the area of <code>Rectangle</code> , using its <code>width</code> and <code>height</code> fields.</span> <code>area</code>関数シグネチャは、正確には次のようになります。 <code>width</code>と<code>height</code>フィールドを使用して<code>Rectangle</code>の面積を計算します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This conveys that the width and height are related to each other, and it gives descriptive names to the values rather than using the tuple index values of <code>0</code> and <code>1</code> .</span>これは、幅と高さが互いに関連していることを伝え、 <code>0</code>と<code>1</code>タプルインデックス値を使用するのではなく、値にわかりやすい名前を付けます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is a win for clarity.</span>これは分かりやすくするための勝利です。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Adding Useful Functionality with Derived Traits</span>派生した形質に便利な機能を追加する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;d be nice to be able to print an instance of <code>Rectangle</code> while we&#39;re debugging our program and see the values for all its fields.</span>私たちがプログラムをデバッグしている間に、 <code>Rectangle</code>インスタンスを印刷して、すべてのフィールドの値を見ることができればいいと思います。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Listing 5-11 tries using the <code>println€</code> macro as we have used in previous chapters.</span>リスト5-11は、前の章で使ったように<code>println€</code>マクロを使って試行しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This won&#39;t work, however.</span>しかし、これはうまくいきません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="struct Rectangle {"></div><div data-l="    width: u32,"></div><div data-l="    height: u32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let rect1 = Rectangle { width: 30, height: 50 };"></div><div data-l=""></div><div data-l="    println!(&quot;rect1 is {}&quot;, rect1);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 5-11: Attempting to print a <code>Rectangle</code> instance</span></span> <span class=caption>リスト5-11： <code>Rectangle</code>インスタンスを印刷しようとしています</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we run this code, we get an error with this core message:</span>このコードを実行すると、このコアメッセージにエラーが発生します。</span> </p><br><div data-lang=text><div data-l="error[E0277]: the trait bound `Rectangle: std::fmt::Display` is not satisfied"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>println€</code> macro can do many kinds of formatting, and by default, the curly brackets tell <code>println€</code> to use formatting known as <code>Display</code> : output intended for direct end user consumption.</span> <code>println€</code>マクロは多くの種類の書式設定を行うことができ、デフォルトでは、中括弧は<code>println€</code>に、 <code>Display</code> ：出力と呼ばれる書式を使用するように指示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The primitive types we&#39;ve seen so far implement <code>Display</code> by default, because there&#39;s only one way you&#39;d want to show a <code>1</code> or any other primitive type to a user.</span>我々はこれまでに実装見てきたプリミティブ型<code>Display</code>表示したいと思います唯一の方法がありますので、デフォルトでは<code>1</code>ユーザーまたはその他のプリミティブ型が。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But with structs, the way <code>println€</code> should format the output is less clear because there are more display possibilities: Do you want commas or not?</span>しかし、構造体では、 <code>println€</code>が出力をフォーマットする方法は、より多くの表示可能性があるためあまり明確ではありません。カンマを使用するかどうかを指定しますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Do you want to print the curly brackets?</span>中括弧を印刷しますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Should all the fields be shown?</span>すべてのフィールドを表示する必要がありますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Due to this ambiguity, Rust doesn&#39;t try to guess what we want, and structs don&#39;t have a provided implementation of <code>Display</code> .</span>このあいまいさのために、Rustは私たちが望むものを推測しようとせず、構造体には<code>Display</code>実装が提供されていません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we continue reading the errors, we&#39;ll find this helpful note:</span>引き続きエラーを読んでいれば、この有益なメモを見つけることができます：</span> </p><br><div data-lang=text><div data-l="`Rectangle` cannot be formatted with the default formatter; try using"></div><div data-l="`:?` instead if you are using a format string"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s try it!</span>試してみよう！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>println€</code> macro call will now look like <code>println€(&quot;rect1 is {:?}&quot;, rect1);</code></span> <code>println€</code>マクロ呼び出しは、 <code>println€(&quot;rect1 is {:?}&quot;, rect1);</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">.</span> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Putting the specifier <code>:?</code></span>指定子を置く<code>:?</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">inside the curly brackets tells <code>println€</code> we want to use an output format called <code>Debug</code> .</span>中括弧の中には<code>println€</code> 、 <code>Debug</code>という出力フォーマットを使用したいと考えています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>Debug</code> trait enables us to print our struct in a way that is useful for developers so we can see its value while we&#39;re debugging our code.</span> <code>Debug</code>特性は、開発者にとって有用な方法で構造体を印刷することができるので、コードをデバッグする際にその価値を確認できます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Run the code with this change.</span>この変更でコードを実行します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Drat!</span> Drat！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We still get an error:</span>私たちはまだエラーが発生します：</span> </p><br><div data-lang=text><div data-l="error[E0277]: the trait bound `Rectangle: std::fmt::Debug` is not satisfied"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But again, the compiler gives us a helpful note:</span>しかし、やはりコンパイラは私たちに役立つメモを与えます：</span> </p><br><div data-lang=text><div data-l="`Rectangle` cannot be formatted using `:?`; if it is defined in your"></div><div data-l="crate, add `#[derive(Debug)]` or manually implement it"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust <i>does</i> include functionality to print out debugging information, but we have to explicitly opt in to make that functionality available for our struct.</span> Rustに<i>は</i>デバッグ情報を出力する機能<i>が</i>含まれていますが、構造体にその機能を利用できるように明示的にオプトインする必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To do that, we add the annotation <code>#[derive(Debug)]</code> just before the struct definition, as shown in Listing 5-12.</span>そうするために、リスト5-12に示すように、構造体定義の直前に注釈<code>#[derive(Debug)]</code>を追加します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l=#[derive(Debug)]></div><div data-l="struct Rectangle {"></div><div data-l="    width: u32,"></div><div data-l="    height: u32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let rect1 = Rectangle { width: 30, height: 50 };"></div><div data-l=""></div><div data-l="    println!(&quot;rect1 is {:?}&quot;, rect1);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 5-12: Adding the annotation to derive the <code>Debug</code> trait and printing the <code>Rectangle</code> instance using debug formatting</span></span> <span class=caption>リスト5-12：アノテーションを追加して<code>Debug</code>特性を導出し、デバッグ書式を使用して<code>Rectangle</code>インスタンスを印刷する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now when we run the program, we won&#39;t get any errors, and we&#39;ll see the following output:</span>ここでプログラムを実行すると、エラーは発生せず、次の出力が表示されます。</span> </p><br><div data-lang=text><div data-l="rect1 is Rectangle { width: 30, height: 50 }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Nice!</span>ニース！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s not the prettiest output, but it shows the values of all the fields for this instance, which would definitely help during debugging.</span>これはもっともきれいな出力ではありませんが、このインスタンスのすべてのフィールドの値を表示します。これは、デバッグ時には間違いなく役立ちます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we have larger structs, it&#39;s useful to have output that&#39;s a bit easier to read;</span>より大きな構造体がある場合、読みやすいように出力するのが便利です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">in those cases, we can use <code>{:#?}</code> instead of <code>{:?}</code> in the <code>println€</code> string.</span>そのような場合は、 <code>println€</code>文字列の<code>{:?}</code>代わりに<code>{:?}</code> <code>{:#?}</code>使用できます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we use the <code>{:#?}</code> style in the example, the output will look like this:</span>この例で<code>{:#?}</code>スタイルを使用すると、出力は次のようになります。</span> </p><br><div data-lang=text><div data-l="rect1 is Rectangle {"></div><div data-l="    width: 30,"></div><div data-l="    height: 50"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust has provided a number of traits for us to use with the <code>derive</code> annotation that can add useful behavior to our custom types.</span>私たちは一緒に使用するために錆が特徴の数を提供してきました<code>derive</code>当社のカスタムタイプに便利な動作を追加することができます注釈。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Those traits and their behaviors are listed in Appendix C. We&#39;ll cover how to implement these traits with custom behavior as well as how to create your own traits in Chapter 10.</span>これらの特性とその振る舞いについては、付録Cを参照してください。これらの特性をカスタム動作で実装する方法と、第10章で独自の特性を作成する方法について説明します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our <code>area</code> function is very specific: it only computes the area of rectangles.</span>私たちの<code>area</code>関数は非常に特殊です：それは矩形の領域だけを計算します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It would be helpful to tie this behavior more closely to our <code>Rectangle</code> struct, because it won&#39;t work with any other type.</span>この振る舞いを<code>Rectangle</code>構造体にもっと密接に結びつけることは、他の型では機能しないので便利です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s look at how we can continue to refactor this code by turning the <code>area</code> function into an <code>area</code> <i>method</i> defined on our <code>Rectangle</code> type.</span> <code>area</code>関数を<code>Rectangle</code>型で定義された<code>area</code> <i>メソッドに</i>変換することによって、このコードをどのようにリファクタリングすることができるかを見てみましょう。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch05-02-example-structs.html');});</script>