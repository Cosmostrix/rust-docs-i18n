<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch12-01-accepting-command-line-arguments.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Accepting Command Line Arguments</span>コマンドライン引数の受け入れ</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s create a new project with, as always, <code>cargo new</code> .</span>さんが使用して新しいプロジェクトを作成してみましょう、いつものように、 <code>cargo new</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll call our project <code>minigrep</code> to distinguish it from the <code>grep</code> tool that you might already have on your system.</span>私たちは、あなたのシステムに既にあるかもしれない<code>grep</code>ツールとそれを区別するためにプロジェクト<code>minigrep</code>を呼びます。</span> </p><br><div data-lang=text><div data-l="$ cargo new --bin minigrep"></div><div data-l="     Created binary (application) `minigrep` project"></div><div data-l="$ cd minigrep"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The first task is to make <code>minigrep</code> accept its two command line arguments: the filename and a string to search for.</span>最初の作業は、 <code>minigrep</code> 2つのコマンドライン引数、ファイル名と検索する文字列を受け入れることです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That is, we want to be able to run our program with <code>cargo run</code> , a string to search for, and a path to a file to search in, like so:</span>それは我々が我々のプログラムを実行できるようにしたい、ある<code>cargo run</code>そうのような、で検索し、検索する文字列、およびファイルへのパス：</span> </p><br><div data-lang=text><div data-l="$ cargo run searchstring example-filename.txt"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Right now, the program generated by <code>cargo new</code> cannot process arguments we give it.</span>現在、 <code>cargo new</code>によって生成されたプログラムは、与えられた引数を処理することはできません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some existing libraries on <a class=notranslate href=#2https://crates.io/>Crates.io</a> can help with writing a program that accepts command line arguments, but because you&#39;re just learning this concept, let&#39;s implement this capability ourselves.</span> <a class=notranslate href=#2https://crates.io/>Crates.io</a>既存のライブラリの中には、コマンドライン引数を受け入れるプログラムの作成に役立つものもありますが、この概念を学んでいるので、この機能を自分で実装しましょう。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Reading the Argument Values</span>引数値の読み込み</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To enable <code>minigrep</code> to read the values of command line arguments we pass to it, we&#39;ll need a function provided in Rust&#39;s standard library, which is <code>std::env::args</code> .</span> <code>minigrep</code>が渡すコマンドライン引数の値を読むためには、Rustの標準ライブラリ<code>std::env::args</code>用意されている関数が必要です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This function returns an <i>iterator</i> of the command line arguments that were given to <code>minigrep</code> .</span>この関数は、 <code>minigrep</code>に与えられたコマンドライン引数の<i>反復子</i>を返します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We haven&#39;t discussed iterators yet (we&#39;ll cover them fully in Chapter 13), but for now, you only need to know two details about iterators: iterators produce a series of values, and we can call the <code>collect</code> method on an iterator to turn it into a collection, such as a vector, containing all the elements the iterator produces.</span>イテレータはまだ議論していませんが（第13章で詳しく説明します）、今のところイテレータに関する2つの詳細を知る必要があります。イテレータは一連の値を生成し、イテレータの<code>collect</code>メソッドを呼び出すことができますイテレータが生成するすべての要素を含む、ベクトルなどのコレクションに変換します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Use the code in Listing 12-1 to allow your <code>minigrep</code> program to read any command line arguments passed to it and then collect the values into a vector.</span>お使いできるように、リスト12-1のコードを使用し<code>minigrep</code>プログラムは、渡された任意のコマンドライン引数を読み、そしてベクターに値を収集します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="use std::env;"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let args: Vec&lt;String&gt; = env::args().collect();"></div><div data-l="    println!(&quot;{:?}&quot;, args);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 12-1: Collecting the command line arguments into a vector and printing them</span></span> <span class=caption>コードリスト12-1：コマンドライン引数をベクトルに集めて印刷する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, we bring the <code>std::env</code> module into scope with a <code>use</code> statement so we can use its <code>args</code> function.</span>まず、 <code>std::env</code>モジュールを<code>use</code>ステートメントでスコープに持ってきて、 <code>args</code>関数を使用できるようにします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Notice that the <code>std::env::args</code> function is nested in two levels of modules.</span> <code>std::env::args</code>関数は、2つのレベルのモジュールにネストされています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As we discussed in Chapter 7, in cases where the desired function is nested in more than one module, it&#39;s conventional to bring the parent module into scope rather than the function.</span>第7章で説明したように、目的の関数が複数のモジュールにネストされている場合、親モジュールを関数ではなくスコープにするのが普通です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By doing so, we can easily use other functions from <code>std::env</code> .</span>そうすることで、 <code>std::env</code>他の関数を簡単に使うことができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s also less ambiguous than adding <code>use std::env::args</code> and then calling the function with just <code>args</code> , because <code>args</code> might easily be mistaken for a function that&#39;s defined in the current module.</span>また、追加未満曖昧だ<code>use std::env::args</code>して、ただで関数を呼び出す<code>args</code>ので、 <code>args</code>簡単に現在のモジュールで定義されています機能のために誤解される可能性があります。</span> </p><br><blockquote><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>args</code> Function and Invalid Unicode</span> <code>args</code>関数と無効なUnicode</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that <code>std::env::args</code> will panic if any argument contains invalid Unicode.</span>いずれかの引数に無効なUnicodeが含まれていると、 <code>std::env::args</code>がパニックになることに注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If your program needs to accept arguments containing invalid Unicode, use <code>std::env::args_os</code> instead.</span>プログラムが無効なUnicodeを含む引数を受け入れる必要がある場合は、代わりに<code>std::env::args_os</code>使用してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That function returns an iterator that produces <code>OsString</code> values instead of <code>String</code> values.</span>この関数は、 <code>String</code>値の代わりに<code>OsString</code>値を生成するイテレータを返します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ve chosen to use <code>std::env::args</code> here for simplicity, because <code>OsString</code> values differ per platform and are more complex to work with than <code>String</code> values.</span> <code>OsString</code>値はプラットフォームごとに異なり、 <code>String</code>値よりも<code>OsString</code>が複雑であるため、簡単にするために<code>std::env::args</code>を使用することにしました。</span> </p></blockquote><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">On the first line of <code>main</code> , we call <code>env::args</code> , and we immediately use <code>collect</code> to turn the iterator into a vector containing all the values produced by the iterator.</span> <code>main</code>の最初の行では<code>env::args</code>を呼び出し、直ちに<code>collect</code>を使用してイテレータを生成し、イテレータが生成したすべての値を含むベクトルにします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can use the <code>collect</code> function to create many kinds of collections, so we explicitly annotate the type of <code>args</code> to specify that we want a vector of strings.</span> <code>collect</code>関数を使って多くの種類のコレクションを作成<code>collect</code>ことができるので、 <code>args</code>の型に明示的に注釈を付けて、文字列のベクトルが必要であることを指定します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Although we very rarely need to annotate types in Rust, <code>collect</code> is one function you do often need to annotate because Rust isn&#39;t able to infer the kind of collection you want.</span>我々は非常にまれルーストに種類に注釈を付ける必要はありませんが、 <code>collect</code>あなたはしばしば錆が希望コレクションの種類を推測することはできないので、注釈を付ける必要がありますか1つの関数です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Finally, we print the vector using the debug formatter, <code>:?</code></span>最後に、次のデバッグフォーマッタを使用してベクトルを出力し<code>:?</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">.</span> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s try running the code first with no arguments and then with two arguments:</span>引き数を指定せずにコードを実行してから、2つの引数を指定して実行してみましょう。</span> </p><br><div data-lang=text><div data-l="$ cargo run"></div><div data-l=--snip--></div><div data-l=[&quot;target/debug/minigrep&quot;]></div><div data-l=""></div><div data-l="$ cargo run needle haystack"></div><div data-l=--snip--></div><div data-l="[&quot;target/debug/minigrep&quot;, &quot;needle&quot;, &quot;haystack&quot;]"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Notice that the first value in the vector is <code>&quot;target/debug/minigrep&quot;</code> , which is the name of our binary.</span>ベクトルの最初の値は<code>&quot;target/debug/minigrep&quot;</code> 。これはバイナリの名前です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This matches the behavior of the arguments list in C, letting programs use the name by which they were invoked in their execution.</span>これはCの引数リストの振る舞いと一致し、プログラムは実行時に呼び出された名前を使用します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s often convenient to have access to the program name in case you want to print it in messages or change behavior of the program based on what command line alias was used to invoke the program.</span>メッセージに印刷したり、プログラムを呼び出すために使用されたコマンドラインエイリアスに基づいてプログラムの動作を変更したい場合は、プログラム名にアクセスすることが便利なことがよくあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But for the purposes of this chapter, we&#39;ll ignore it and save only the two arguments we need.</span>しかし、この章では、それを無視して必要な2つの引数だけを保存します。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Saving the Argument Values in Variables</span>変数への引数値の保存</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Printing the value of the vector of arguments illustrated that the program is able to access the values specified as command line arguments.</span>引数ベクトルの値を表示すると、プログラムはコマンドライン引数として指定された値にアクセスできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we need to save the values of the two arguments in variables so we can use the values throughout the rest of the program.</span>今度は、2つの引数の値を変数に保存して、残りの値を使用する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We do that in Listing 12-2.</span>リスト12-2に示します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust,should_panic><div data-l="use std::env;"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let args: Vec&lt;String&gt; = env::args().collect();"></div><div data-l=""></div><div data-l="    let query = &amp;args[1];"></div><div data-l="    let filename = &amp;args[2];"></div><div data-l=""></div><div data-l="    println!(&quot;Searching for {}&quot;, query);"></div><div data-l="    println!(&quot;In file {}&quot;, filename);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 12-2: Creating variables to hold the query argument and filename argument</span></span> <span class=caption>リスト12-2：クエリ引数とファイル名引数を保持する変数の作成</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As we saw when we printed the vector, the program&#39;s name takes up the first value in the vector at <code>args[0]</code> , so we&#39;re starting at index <code>1</code> .</span>ベクトルを出力したときに見たように、プログラムの名前は<code>args[0]</code>でベクトルの最初の値をとります。したがって、インデックス<code>1</code>から始まります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The first argument <code>minigrep</code> takes is the string we&#39;re searching for, so we put a reference to the first argument in the variable <code>query</code> .</span>最初の引数<code>minigrep</code>は検索する文字列ですから、最初の引数への参照を変数<code>query</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The second argument will be the filename, so we put a reference to the second argument in the variable <code>filename</code> .</span> 2番目の引数はファイル名になるので、2番目の引数への参照を変数<code>filename</code> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We temporarily print the values of these variables to prove that the code is working as we intend.</span>これらの変数の値を一時的に表示して、コードが意図したとおりに機能していることを証明します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s run this program again with the arguments <code>test</code> and <code>sample.txt</code> :</span> <code>test</code>と<code>sample.txt</code>という引数を使ってこのプログラムをもう一度実行してみましょう：</span> </p><br><div data-lang=text><div data-l="$ cargo run test sample.txt"></div><div data-l="   Compiling minigrep v0.1.0 (file:///projects/minigrep)"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running `target/debug/minigrep test sample.txt`"></div><div data-l="Searching for test"></div><div data-l="In file sample.txt"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Great, the program is working!</span>偉大な、プログラムが動作しています！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The values of the arguments we need are being saved into the right variables.</span>必要な引数の値は正しい変数に保存されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Later we&#39;ll add some error handling to deal with certain potential erroneous situations, such as when the user provides no arguments;</span>後で、ユーザーが引数を指定しないなど、潜在的な誤りのある状況に対処するためのエラー処理を追加します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">for now, we&#39;ll ignore that situation and work on adding file-reading capabilities instead.</span>今のところ、その状況を無視し、ファイル読み取り機能を追加する作業を行います。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch12-01-accepting-command-line-arguments.html');});</script>