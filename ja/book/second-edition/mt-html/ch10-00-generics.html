<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch10-00-generics.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Generic Types, Traits, and Lifetimes</span>一般的なタイプ、特性、および生涯</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Every programming language has tools for effectively handling the duplication of concepts.</span>すべてのプログラミング言語には、概念の重複を効果的に処理するツールがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In Rust, one such tool is <i>generics</i> .</span> Rustでは、そのようなツールの1つは<i>ジェネリック</i>です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Generics are abstract stand-ins for concrete types or other properties.</span> Genericsは、具体的な型やその他のプロパティの抽象的なスタンドインです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we&#39;re writing code, we can express the behavior of generics or how they relate to other generics without knowing what will be in their place when compiling and running the code.</span>コードを書くときは、ジェネリックの振る舞いや、コードをコンパイルして実行するときに何が起きるのかわからなくても、ジェネリックスの動作や他のジェネリックとの関係を表現できます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Similar to the way a function takes parameters with unknown values to run the same code on multiple concrete values, functions can take parameters of some generic type instead of a concrete type, like <code>i32</code> or <code>String</code> .</span>同じコードを複数の具体的な値で実行するために、関数が未知の値を持つパラメータを取る方法と同様に、関数は、 <code>i32</code>や<code>String</code>ような具体的な型ではなく、汎用型のパラメータを取ることができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In fact, we&#39;ve already used generics in Chapter 6 with <code>Option&lt;T&gt;</code> , Chapter 8 with <code>Vec&lt;T&gt;</code> and <code>HashMap&lt;K, V&gt;</code> , and Chapter 9 with <code>Result&lt;T, E&gt;</code> .</span>実際には、第6章で<code>Option&lt;T&gt;</code> 、第8章<code>Vec&lt;T&gt;</code> 、 <code>HashMap&lt;K, V&gt;</code> 、第9章<code>Result&lt;T, E&gt;</code>ジェネリックを既に使用しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this chapter, you&#39;ll explore how to define your own types, functions, and methods with generics!</span>この章では、ジェネリックで独自の型、関数、およびメソッドを定義する方法について説明します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, we&#39;ll review how to extract a function to reduce code duplication.</span>まず、コードの重複を減らす関数を抽出する方法を見ていきます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, we&#39;ll use the same technique to make a generic function from two functions that differ only in the types of their parameters.</span>次に、同じテクニックを使用して、パラメータの型だけが異なる2つの関数から汎用関数を作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll also explain how to use generic types in struct and enum definitions.</span>構造体と列挙型の定義でジェネリック型を使用する方法についても説明します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then you&#39;ll learn how to use <i>traits</i> to define behavior in a generic way.</span>次に、 <i>特性</i>を使って行動を一般的な方法で定義する方法を学びます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can combine traits with generic types to constrain a generic type to only those types that have a particular behavior, as opposed to just any type.</span>型をジェネリック型と組み合わせることで、ジェネリック型を特定の振る舞いを持つ型だけに制限することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Finally, we&#39;ll discuss <i>lifetimes</i> , a variety of generics that give the compiler information about how references relate to each other.</span>最後に、 <i>生存時間</i> 、さまざまなジェネリックスについて議論します。これらのジェネリックは、コンパイラーが参照の相互関係に関する情報を提供します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lifetimes allow us to borrow values in many situations while still enabling the compiler to check that the references are valid.</span> Lifetimesでは、多くの状況で値を借用することができますが、コンパイラーは参照が有効であることを確認することができます。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Removing Duplication by Extracting a Function</span>関数を抽出して複製を削除する</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Before diving into generics syntax, let&#39;s first look at how to remove duplication that doesn&#39;t involve generic types by extracting a function.</span>ジェネリックスの構文に入る前に、まず関数を抽出してジェネリック型を含まない重複を削除する方法を見てみましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then we&#39;ll apply this technique to extract a generic function!</span>次に、このテクニックを適用して汎用関数を抽出します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the same way that you recognize duplicated code to extract into a function, you&#39;ll start to recognize duplicated code that can use generics.</span>関数に重複したコードを抽出するのと同じ方法で、ジェネリックを使用できる重複したコードを認識し始めます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Consider a short program that finds the largest number in a list, as shown in Listing 10-1.</span>リスト10-1に示すように、リスト内で最大の数を見つける短いプログラムを考えてみましょう。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="fn main() {"></div><div data-l="    let number_list = vec![34, 50, 25, 100, 65];"></div><div data-l=""></div><div data-l="    let mut largest = number_list[0];"></div><div data-l=""></div><div data-l="    for number in number_list {"></div><div data-l="        if number &gt; largest {"></div><div data-l="            largest = number;"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    println!(&quot;The largest number is {}&quot;, largest);"></div><div data-l="#  assert_eq!(largest, 100);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 10-1: Code to find the largest number in a list of numbers</span></span> <span class=caption>リスト10-1：数字のリストの中で最大の数字を見つけるコード</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This code stores a list of integers in the variable <code>number_list</code> and places the first number in the list in a variable named <code>largest</code> .</span>このコードは、変数<code>number_list</code>に整数のリストを格納し、リスト内の最初の数値を<code>largest</code>の変数に<code>number_list</code>します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then it iterates through all the numbers in the list, and if the current number is greater than the number stored in <code>largest</code> , it replaces the number in that variable.</span>次に、リスト内のすべての数値を繰り返し処理し、現在の数値が<code>largest</code>値に格納されている数値よりも大きい場合は、その変数の数値を置き換えます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, if the current number is less than the largest number seen so far, the variable doesn&#39;t change, and the code moves on to the next number in the list.</span>ただし、現在の数値がこれまでに見た最大数値よりも小さい場合、変数は変更されず、コードはリストの次の数値に移動します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">After considering all the numbers in the list, <code>largest</code> should hold the largest number, which in this case is 100.</span>リスト内のすべての数字を考慮した後、 <code>largest</code> 、この場合には100の最大の数を、保持する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To find the largest number in two different lists of numbers, we can duplicate the code in Listing 10-1 and use the same logic at two different places in the program, as shown in Listing 10-2.</span> 2つの異なる数値リストで最大の数値を見つけるには、リスト10-1のコードを複製し、プログラムの2つの異なる場所で同じロジックを使用することができます（リスト10-2を参照）。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="fn main() {"></div><div data-l="    let number_list = vec![34, 50, 25, 100, 65];"></div><div data-l=""></div><div data-l="    let mut largest = number_list[0];"></div><div data-l=""></div><div data-l="    for number in number_list {"></div><div data-l="        if number &gt; largest {"></div><div data-l="            largest = number;"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    println!(&quot;The largest number is {}&quot;, largest);"></div><div data-l=""></div><div data-l="    let number_list = vec![102, 34, 6000, 89, 54, 2, 43, 8];"></div><div data-l=""></div><div data-l="    let mut largest = number_list[0];"></div><div data-l=""></div><div data-l="    for number in number_list {"></div><div data-l="        if number &gt; largest {"></div><div data-l="            largest = number;"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    println!(&quot;The largest number is {}&quot;, largest);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 10-2: Code to find the largest number in <i>two</i> lists of numbers</span></span> <span class=caption>リスト10-2： <i>2つ</i>の数字のリストで最大の数字を見つけるコード</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Although this code works, duplicating code is tedious and error prone.</span>このコードは機能しますが、コードを複製するのは面倒でエラーが発生しやすいです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We also have to update the code in multiple places when we want to change it.</span>コードを変更したいときは、複数の場所でコードを更新する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To eliminate this duplication, we can create an abstraction by defining a function that operates on any list of integers given to it in a parameter.</span>この重複を排除するために、与えられた整数リストに作用する関数をパラメータで定義して抽象化を作成することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This solution makes our code clearer and lets us express the concept of finding the largest number in a list abstractly.</span>この解決法は、私たちのコードをより明確にし、最も大きな数字を抽象的にリストするという概念を表現することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In Listing 10-3, we extracted the code that finds the largest number into a function named <code>largest</code> .</span>リスト10-3で、我々は、名前の関数に最大数を見つけコード抽出<code>largest</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Unlike the code in Listing 10-1, which can find the largest number in only one particular list, this program can find the largest number in two different lists.</span>リスト10-1のコードとは異なり、このプログラムは特定の1つのリストで最大の番号を見つけることができますが、このプログラムは2つの異なるリストで最大の番号を見つけることができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust><div data-l="fn largest(list: &amp;[i32]) -&gt; i32 {"></div><div data-l="    let mut largest = list[0];"></div><div data-l=""></div><div data-l="    for &amp;item in list.iter() {"></div><div data-l="        if item &gt; largest {"></div><div data-l="            largest = item;"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    largest"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let number_list = vec![34, 50, 25, 100, 65];"></div><div data-l=""></div><div data-l="    let result = largest(&amp;number_list);"></div><div data-l="    println!(&quot;The largest number is {}&quot;, result);"></div><div data-l="#    assert_eq!(result, 100);"></div><div data-l=""></div><div data-l="    let number_list = vec![102, 34, 6000, 89, 54, 2, 43, 8];"></div><div data-l=""></div><div data-l="    let result = largest(&amp;number_list);"></div><div data-l="    println!(&quot;The largest number is {}&quot;, result);"></div><div data-l="#    assert_eq!(result, 6000);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 10-3: Abstracted code to find the largest number in two lists</span></span> <span class=caption>リスト10-3：2つのリストの中で最大の数を見つける抽象コード</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>largest</code> function has a parameter called <code>list</code> , which represents any concrete slice of <code>i32</code> values that we might pass into the function.</span> <code>largest</code>関数には<code>list</code>というパラメータがあります。このパラメータは、関数に渡す<code>i32</code>値の具体的なスライスを表します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As a result, when we call the function, the code runs on the specific values that we pass in.</span>その結果、関数を呼び出すと、渡された特定の値でコードが実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In sum, here are the steps we took to change the code from Listing 10-2 to Listing 10-3:</span>要約すると、リスト10-2のコードをリスト10-3に変更するために取った手順は次のとおりです。</span> </p><br><div data-b=1.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Identify duplicate code.</span>重複したコードを特定する。</span> </div><div data-b=2.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Extract the duplicate code into the body of the function and specify the inputs and return values of that code in the function signature.</span>関数の本体に重複したコードを抽出し、その関数のシグネチャにそのコードの入力と戻り値を指定します。</span> </div><div data-b=3.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Update the two instances of duplicated code to call the function instead.</span>代わりに関数を呼び出すように、重複したコードの2つのインスタンスを更新します。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, we&#39;ll use these same steps with generics to reduce code duplication in different ways.</span>次に、同じ手順をジェネリックで使用して、コードの重複をさまざまな方法で減らします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the same way that the function body can operate on an abstract <code>list</code> instead of specific values, generics allow code to operate on abstract types.</span>関数本体が特定の値ではなく抽象<code>list</code>動作するのと同じように、ジェネリックスは抽象型でコードを操作できるようにします。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, say we had two functions: one that finds the largest item in a slice of <code>i32</code> values and one that finds the largest item in a slice of <code>char</code> values.</span>たとえば、 <code>i32</code>値のスライスで最大のアイテムを検出する機能と、 <code>char</code>値のスライスで最大のアイテムを検出する機能の2つの機能があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">How would we eliminate that duplication?</span>その重複をどのように排除しますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s find out!</span>確認してみましょう！</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch10-00-generics.html');});</script>