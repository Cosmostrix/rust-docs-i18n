<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch12-06-writing-to-stderr-instead-of-stdout.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Writing Error Messages to Standard Error Instead of Standard Output</span>標準出力ではなく標準エラーへのエラーメッセージの書き込み</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">At the moment, we&#39;re writing all of our output to the terminal using the <code>println€</code> function.</span>現時点では、 <code>println€</code>関数を使用して、すべての出力を端末に書き出しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Most terminals provide two kinds of output: <i>standard output</i> ( <code>stdout</code> ) for general information and <i>standard error</i> ( <code>stderr</code> ) for error messages.</span>ほとんどの端末は、一般情報の<i>標準出力</i> （ <code>stdout</code> ）とエラーメッセージの<i>標準エラー</i> （ <code>stderr</code> ）の2種類の出力を提供します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This distinction enables users to choose to direct the successful output of a program to a file but still print error messages to the screen.</span>この区別によって、ユーザーはプログラムの正常な出力をファイルに指示することができますが、エラーメッセージは画面に出力されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>println€</code> function is only capable of printing to standard output, so we have to use something else to print to standard error.</span> <code>println€</code>関数は標準出力にしか印刷できないので、標準エラーに印刷するために別のものを使用する必要があります。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Checking Where Errors Are Written</span>エラーが書き込まれた場所を確認する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, let&#39;s observe how the content printed by <code>minigrep</code> is currently being written to standard output, including any error messages we want to write to standard error instead.</span>まず、 <code>minigrep</code>で印刷された内容が現在標準出力に書き込まれている様子を見てみましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll do that by redirecting the standard output stream to a file while also intentionally causing an error.</span>標準的な出力ストリームをファイルにリダイレクトし、意図的にエラーが発生するようにします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We won&#39;t redirect the standard error stream, so any content sent to standard error will continue to display on the screen.</span>標準エラーストリームをリダイレクトしないので、標準エラーに送信されたコンテンツはすべて画面に表示され続けます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Command line programs are expected to send error messages to the standard error stream so we can still see error messages on the screen even if we redirect the standard output stream to a file.</span>標準出力ストリームをファイルにリダイレクトしても、コマンドラインプログラムは標準エラーストリームにエラーメッセージを送信して、画面にエラーメッセージが表示されることが予想されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our program is not currently well-behaved: we&#39;re about to see that it saves the error message output to a file instead!</span>私たちのプログラムは、現在正常に動作していません。エラーメッセージの出力をファイルに保存しています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The way to demonstrate this behavior is by running the program with <code>&gt;</code> and the filename, <i>output.txt</i> , that we want to redirect the standard output stream to.</span>この動作を示す方法は、標準出力ストリームをリダイレクトする<code>&gt;</code>とファイル名<i>output.txt</i>でプログラムを実行することです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We won&#39;t pass any arguments, which should cause an error:</span>引数を渡すことはありません。エラーが発生するはずです。</span> </p><br><div data-lang=text><div data-l="$ cargo run &gt; output.txt"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>&gt;</code> syntax tells the shell to write the contents of standard output to <i>output.txt</i> instead of the screen.</span> <code>&gt;</code>構文は、標準出力の内容を画面の代わりに<i>output.txt</i>に書き込むようにシェルに指示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We didn&#39;t see the error message we were expecting printed to the screen, so that means it must have ended up in the file.</span>私たちは、スクリーンに印刷されることを期待していたエラーメッセージが表示されなかったので、ファイルに終わったはずです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is what <i>output.txt</i> contains:</span>これは<i>output.txtに</i>含まれています：</span> </p><br><div data-lang=text><div data-l="Problem parsing arguments: not enough arguments"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Yup, our error message is being printed to standard output.</span>うん、私たちのエラーメッセージが標準出力に出力されている。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s much more useful for error messages like this to be printed to standard error so only data from a successful run ends up in the file.</span>このようなエラーメッセージが標準エラーに出力されると、正常に実行されたデータだけがファイルに格納されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll change that.</span>私たちはそれを変更します。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Printing Errors to Standard Error</span>エラーを標準エラーに出力する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll use the code in Listing 12-24 to change how error messages are printed.</span>リスト12-24のコードを使用して、エラーメッセージの出力方法を変更します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because of the refactoring we did earlier in this chapter, all the code that prints error messages is in one function, <code>main</code> .</span>この章の前半で行ったリファクタリングのおかげで、エラーメッセージを出力するすべてのコードが1つの関数<code>main</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The standard library provides the <code>eprintln€</code> macro that prints to the standard error stream, so let&#39;s change the two places we were calling <code>println€</code> to print errors to use <code>eprintln€</code> instead.</span>標準ライブラリは標準エラーストリームに出力する<code>eprintln€</code>マクロを提供していますので、代わりに<code>eprintln€</code>を使用するように<code>println€</code>を呼び出す2つの場所を変更してください。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/main.rs</span></span> <span class=filename>ファイル名：src / main.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="fn main() {"></div><div data-l="    let args: Vec&lt;String&gt; = env::args().collect();"></div><div data-l=""></div><div data-l="    let config = Config::new(&amp;args).unwrap_or_else(|err| {"></div><div data-l="        eprintln!(&quot;Problem parsing arguments: {}&quot;, err);"></div><div data-l="        process::exit(1);"></div><div data-l="    });"></div><div data-l=""></div><div data-l="    if let Err(e) = minigrep::run(config) {"></div><div data-l="        eprintln!(&quot;Application error: {}&quot;, e);"></div><div data-l=""></div><div data-l="        process::exit(1);"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 12-24: Writing error messages to standard error instead of standard output using <code>eprintln€</code></span></span> <span class=caption>リスト12-24： <code>eprintln€</code>を使って標準出力の代わりに標準エラーにエラーメッセージを書き込む</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">After changing <code>println€</code> to <code>eprintln€</code> , let&#39;s run the program again in the same way, without any arguments and redirecting standard output with <code>&gt;</code> :</span> <code>println€</code>を<code>eprintln€</code>変更した後、同じ方法で引数を取らずにプログラムを再度実行し、 <code>&gt;</code>標準出力をリダイレクトし<code>&gt;</code> ：</span> </p><br><div data-lang=text><div data-l="$ cargo run &gt; output.txt"></div><div data-l="Problem parsing arguments: not enough arguments"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we see the error onscreen and <i>output.txt</i> contains nothing, which is the behavior we expect of command line programs.</span>エラーonscreenと<i>output.txtに</i>は何も含まれていません。これはコマンドラインプログラムで期待される動作です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s run the program again with arguments that don&#39;t cause an error but still redirect standard output to a file, like so:</span>エラーを起こさない引き続き標準出力をファイルにリダイレクトする引数を指定してプログラムを再実行してみましょう。</span> </p><br><div data-lang=text><div data-l="$ cargo run to poem.txt &gt; output.txt"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We won&#39;t see any output to the terminal, and <i>output.txt</i> will contain our results:</span>端末に何も出力されず、 <i>output.txt</i>には結果が含まれます：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: output.txt</span></span> <span class=filename>ファイル名：output.txt</span></span> </p><br><div data-lang=text><div data-l="Are you nobody, too?"></div><div data-l="How dreary to be somebody!"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This demonstrates that we&#39;re now using standard output for successful output and standard error for error output as appropriate.</span>これは、出力の正常化のために標準出力を使用し、適切な場合にはエラー出力の標準エラーを使用していることを示しています。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Summary</span>概要</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This chapter recapped some of the major concepts you&#39;ve learned so far and covered how to perform common I/O operations in Rust.</span>この章では、これまでに学習した主な概念のいくつかを取り上げ、Rustで一般的なI / O操作を実行する方法について説明しました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By using command line arguments, files, environment variables, and the <code>eprintln€</code> macro for printing errors, you&#39;re now prepared to write command line applications.</span>コマンドライン引数、ファイル、環境変数、および<code>eprintln€</code>使用してエラーを印刷すると、コマンドラインアプリケーションを作成する準備が整いました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By using the concepts in previous chapters, your code will be well organized, store data effectively in the appropriate data structures, handle errors nicely, and be well tested.</span>これまでの章の概念を使用することで、コードは適切に整理され、適切なデータ構造に効果的にデータを格納し、エラーをうまく処理し、十分にテストされます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, we&#39;ll explore some Rust features that were influenced by functional languages: closures and iterators.</span>次に、関数型言語の影響を受けたRustのいくつかの機能（クロージャとイテレータ）について説明します。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch12-06-writing-to-stderr-instead-of-stdout.html');});</script>