<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch07-01-mod-and-the-filesystem.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>mod</code> and the Filesystem</span> <code>mod</code>とファイルシステム</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll start our module example by making a new project with Cargo, but instead of creating a binary crate, we&#39;ll make a library crate: a project that other people can pull into their projects as a dependency.</span> Cargoで新しいプロジェクトを作成することでモジュール例を開始しますが、バイナリクレートを作成する代わりに、他の人が依存関係としてプロジェクトに取り込めるようなライブラリクレートを作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, the <code>rand</code> crate discussed in Chapter 2 is a library crate that we used as a dependency in the guessing game project.</span>たとえば、第2章で説明した<code>rand</code> crateは、推測ゲームプロジェクトの依存関係として使用したライブラリクレートです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll create a skeleton of a library that provides some general networking functionality;</span>一般的なネットワーク機能を提供するライブラリのスケルトンを作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">we&#39;ll concentrate on the organization of the modules and functions, but we won&#39;t worry about what code goes in the function bodies.</span>モジュールと関数の構成に集中しますが、関数本体にどのようなコードが含まれるかについては心配しません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll call our library <code>communicator</code> .</span>私たちは図書館<code>communicator</code>電話をします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To create a library, pass the <code>--lib</code> option instead of <code>--bin</code> :</span>ライブラリを作成するには、 - <code>--lib</code>代わりに<code>--bin</code>オプションを<code>--lib</code>ます。</span> </p><br><div data-lang=text><div data-l="$ cargo new communicator --lib"></div><div data-l="$ cd communicator"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Notice that Cargo generated <i>src/lib.rs</i> instead of <i>src/main.rs</i> .</span> Cargoは<i>src / main.rsの</i>代わりに<i>src / lib.rsを</i>生成したことに注意して<i>ください</i> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Inside <i>src/lib.rs</i> we&#39;ll find the following:</span> <i>src / lib.rsの</i>中には次のものがあります：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="        assert_eq!(2 + 2, 4);"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo creates an example test to help us get our library started, rather than the “Hello, world!” binary that we get when we use the <code>--bin</code> option.</span> Cargoは、-- <code>--bin</code>オプションを使用したときに得られる &quot;Hello、world！&quot;バイナリではなく、ライブラリを起動するためのサンプルテストを作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll look at the <code>#[]</code> and <code>mod tests</code> syntax in the “Using <code>super</code> to Access a Parent Module” section later in this chapter, but for now, leave this code at the bottom of <i>src/lib.rs</i> .</span>この章で後述する「 <code>super</code>モジュールを使用して親モジュールにアクセスする」の<code>#[]</code>と<code>mod tests</code>構文を見ていきますが、このコードは<i>src / lib.rsの最後に置いてください</i> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because we don&#39;t have a <i>src/main.rs</i> file, there&#39;s nothing for Cargo to execute with the <code>cargo run</code> command.</span> <i>src / main.rs</i>ファイルがないので、Cargoが<code>cargo run</code>コマンドで実行するものはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, we&#39;ll use the <code>cargo build</code> command to compile our library crate&#39;s code.</span>したがって、ライブラリ<code>cargo build</code>コマンドを使用して、ライブラリクレートのコードをコンパイルします。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll look at different options for organizing your library&#39;s code that will be suitable in a variety of situations, depending on the intent of the code.</span>コードの意図に応じて、さまざまな状況に適したライブラリのコードを整理するためのさまざまなオプションを見ていきます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Module Definitions</span>モジュール定義</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For our <code>communicator</code> networking library, we&#39;ll first define a module named <code>network</code> that contains the definition of a function called <code>connect</code> .</span> <code>communicator</code>ネットワーキング・ライブラリについては、 <code>connect</code>という関数の定義を含む<code>network</code>という名前のモジュールをまず定義します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Every module definition in Rust starts with the <code>mod</code> keyword.</span> Rustのすべてのモジュール定義は<code>mod</code>キーワードで始まります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Add this code to the beginning of the <i>src/lib.rs</i> file, above the test code:</span>このコードをテストコードの上の<i>src / lib.rs</i>ファイルの先頭に追加します：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="mod network {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">After the <code>mod</code> keyword, we put the name of the module, <code>network</code> , and then a block of code in curly brackets.</span> <code>mod</code>キーワードの後に​​、モジュール名、 <code>network</code> 、そしてコードブロックを中括弧で入れます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Everything inside this block is inside the namespace <code>network</code> .</span>このブロック内のすべてが名前空間<code>network</code>内にあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this case, we have a single function, <code>connect</code> .</span>この場合、 <code>connect</code>という単一の関数が<code>connect</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we wanted to call this function from code outside the <code>network</code> module, we would need to specify the module and use the namespace syntax <code>::</code> like so: <code>network::connect()</code> .</span>この関数を<code>network</code>モジュール外のコードから呼び出す場合は、モジュールを指定して、namespace構文<code>::</code> <code>network::connect()</code>を使用する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can also have multiple modules, side by side, in the same <i>src/lib.rs</i> file.</span>同じ<i>src / lib.rs</i>ファイルに複数のモジュールを並べて配置することもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, to also have a <code>client</code> module that has a function named <code>connect</code> , we can add it as shown in Listing 7-1.</span>たとえば、 <code>connect</code>という名前の関数を持つ<code>client</code>モジュールを追加するには、リスト7-1のように追加します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="mod network {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=}></div><div data-l=""></div><div data-l="mod client {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 7-1: The <code>network</code> module and the <code>client</code> module defined side by side in <i>src/lib.rs</i></span></span> <span class=caption>リスト7-1： <i>src / lib.rsに</i>並んで定義された<code>network</code>モジュールと<code>client</code>モジュール</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we have a <code>network::connect</code> function and a <code>client::connect</code> function.</span>今度は<code>network::connect</code>関数と<code>client::connect</code>関数があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These can have completely different functionality, and the function names do not conflict with each other because they&#39;re in different modules.</span>これらは完全に異なる機能を持つことができ、関数名は異なるモジュールに存在するため、互いに競合しません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this case, because we&#39;re building a library, the file that serves as the entry point for building our library is <i>src/lib.rs</i> .</span>この場合、ライブラリを構築しているので、ライブラリを構築するためのエントリポイントとなるファイルは<i>src / lib.rs</i>です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, in respect to creating modules, there&#39;s nothing special about <i>src/lib.rs</i> .</span>しかし、モジュールの作成に関しては、 <i>src / lib.rsに</i>特別なことは何もありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We could also create modules in <i>src/main.rs</i> for a binary crate in the same way as we&#39;re creating modules in <i>src/lib.rs</i> for the library crate.</span>ライブラリ<i>crateのsrc / lib.rsに</i>モジュールを作成するのと同じ方法で、 <i>src / main.rsに</i>モジュールを作成してバイナリクレートを作成することもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In fact, we can put modules inside of modules, which can be useful as your modules grow to keep related functionality organized together and separate functionality apart.</span>実際には、モジュールをモジュール内に置くことができます。これは、関連する機能をまとめて機能を分離するためにモジュールが大きくなるにつれて役立ちます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The way you choose to organize your code depends on how you think about the relationship between the parts of your code.</span>コードを整理する方法は、コードの各部分の関係をどのように考えるかによって異なります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For instance, the <code>client</code> code and its <code>connect</code> function might make more sense to users of our library if they were inside the <code>network</code> namespace instead, as in Listing 7-2.</span>例えば、リスト7-2のように、 <code>client</code>コードとその<code>connect</code>関数が、代わりに<code>network</code>名前空間の内部にある場合、ライブラリのユーザにとっては意味があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="mod network {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    mod client {"></div><div data-l="        fn connect() {"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 7-2: Moving the <code>client</code> module inside the <code>network</code> module</span></span> <span class=caption>リスト7-2： <code>client</code>モジュールを<code>network</code>モジュール内で移動する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In your <i>src/lib.rs</i> file, replace the existing <code>mod network</code> and <code>mod client</code> definitions with the ones in Listing 7-2, which have the <code>client</code> module as an inner module of <code>network</code> .</span> <i>src / lib.rs</i>ファイルで、既存の<code>mod network</code>と<code>mod client</code>定義をリスト7-2の<code>mod client</code>定義に置き換えます。リスト7-2の<code>mod client</code>定義は、 <code>network</code>内部モジュールとして<code>client</code>モジュールを持ち<code>network</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The functions <code>network::connect</code> and <code>network::client::connect</code> are both named <code>connect</code> , but they don&#39;t conflict with each other because they&#39;re in different namespaces.</span>関数<code>network::connect</code>と<code>network::client::connect</code>はどちらも<code>connect</code>という名前ですが、異なる名前空間にあるため互いに矛盾しません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this way, modules form a hierarchy.</span>このようにして、モジュールは階層を形成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The contents of <i>src/lib.rs</i> are at the topmost level, and the submodules are at lower levels.</span> <i>src / lib.rs</i>の内容は最上位にあり、サブモジュールは下位にあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here&#39;s what the organization of our example in Listing 7-1 looks like when thought of as a hierarchy:</span>リスト7-1の例の構成は、階層として考えられているように見えます。</span> </p><br><div data-lang=text><div data-l=communicator></div><div data-l=" ├── network"></div><div data-l=" └── client"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">And here&#39;s the hierarchy corresponding to the example in Listing 7-2:</span>リスト7-2の例に対応する階層を次に示します。</span> </p><br><div data-lang=text><div data-l=communicator></div><div data-l=" └── network"></div><div data-l="     └── client"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The hierarchy shows that in Listing 7-2, <code>client</code> is a child of the <code>network</code> module rather than a sibling.</span>階層は、リスト7-2の<code>client</code>が兄弟ではなく<code>network</code>モジュールの子であることを示してい<code>client</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">More complicated projects can have many modules, and they&#39;ll need to be organized logically in order for you to keep track of them.</span>より複雑なプロジェクトは多くのモジュールを持つことができ、それらを追跡するために論理的に編成する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">What “logically” means in your project is up to you and depends on how you and your library&#39;s users think about your project&#39;s domain.</span>あなたのプロジェクトにおける &quot;論理的&quot;とは、あなたとあなたの図書館のユーザーがあなたのプロジェクトのドメインについてどう思うかによって異なります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Use the techniques shown here to create side-by-side modules and nested modules in whatever structure you would like.</span>ここに示すテクニックを使用して、任意の構造でサイドバイサイドモジュールとネストされたモジュールを作成します。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Moving Modules to Other Files</span>他のファイルへのモジュールの移動</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Modules form a hierarchical structure, much like another structure in computing that you&#39;re used to: filesystems!</span>モジュールは、階層構造を形成します。これは、あなたが慣れ親しんだコンピューティングのもう一つの構造と同じです：ファイルシステム！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can use Rust&#39;s module system along with multiple files to split up Rust projects so not everything lives in <i>src/lib.rs</i> or <i>src/main.rs</i> .</span> Rustのモジュールシステムと複数のファイルを使ってRustプロジェクトを分けることができるので、 <i>src / lib.rs</i>や<i>src / main.rsに</i>すべてが存在するわけではありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For this example, let&#39;s start with the code in Listing 7-3.</span>この例では、リスト7-3のコードから始めましょう。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="mod client {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=}></div><div data-l=""></div><div data-l="mod network {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    mod server {"></div><div data-l="        fn connect() {"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 7-3: Three modules, <code>client</code> , <code>network</code> , and <code>network::server</code> , all defined in <i>src/lib.rs</i></span></span> <span class=caption>リスト7-3：3つのモジュール、 <code>client</code> 、 <code>network</code> 、 <code>network::server</code> 。全て<i>src / lib.rsで</i>定義されてい<code>network::server</code> 。</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The file <i>src/lib.rs</i> has this module hierarchy:</span> <i>src / lib.rs</i>ファイルには、次のモジュール階層があります。</span> </p><br><div data-lang=text><div data-l=communicator></div><div data-l=" ├── client"></div><div data-l=" └── network"></div><div data-l="     └── server"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If these modules had many functions, and those functions were becoming lengthy, it would be difficult to scroll through this file to find the code we wanted to work with.</span>これらのモジュールに多くの機能があり、それらの機能が長くなっている場合は、このファイルをスクロールして作業したいコードを見つけるのは難しいでしょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because the functions are nested inside one or more <code>mod</code> blocks, the lines of code inside the functions will start getting lengthy as well.</span>関数は1つまたは複数の<code>mod</code>ブロックの内部にネストされているので、関数内のコード行も長くなるようになります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These would be good reasons to separate the <code>client</code> , <code>network</code> , and <code>server</code> modules from <i>src/lib.rs</i> and place them into their own files.</span>これらは、 <code>client</code> 、 <code>network</code> 、および<code>server</code>モジュールを<i>src / lib.rs</i>から分離して、それらを独自のファイルに置く良い理由になります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, let&#39;s replace the <code>client</code> module code with only the declaration of the <code>client</code> module so that <i>src/lib.rs</i> looks like code shown in Listing 7-4.</span>まずは、代わって<code>client</code>の宣言のみでモジュールコードを<code>client</code>リスト7-4に示すコードのように見える<i>のsrc / lib.rs</i>ようにモジュール。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="mod client;"></div><div data-l=""></div><div data-l="mod network {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    mod server {"></div><div data-l="        fn connect() {"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 7-4: Extracting the contents of the <code>client</code> module but leaving the declaration in <i>src/lib.rs</i></span></span> <span class=caption>リスト7-4： <code>client</code>モジュールの内容を抽出するが、宣言は<i>src / lib.rsに残す</i></span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;re still <i>declaring</i> the <code>client</code> module here, but by replacing the block with a semicolon, we&#39;re telling Rust to look in another location for the code defined within the scope of the <code>client</code> module.</span>ここでは<code>client</code>モジュールを<i>宣言し</i>てい<code>client</code>が、ブロックをセミコロンに置き換えることで、Rustに<code>client</code>モジュールのスコープ内で定義されたコードの別の場所を探すように指示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In other words, the line <code>mod client;</code></span>言い換えれば、ライン<code>mod client;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">means this:</span>これは、</span> </p><br><div data-lang=rust,ignore><div data-l="mod client {"></div><div data-l="#    // contents of client.rs"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">contents of client.rs</span> client.rsの内容</span> </div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we need to create the external file with that module name.</span>今度は、そのモジュール名で外部ファイルを作成する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Create a <i>client.rs</i> file in your <i>src/</i> directory and open it.</span> <i>src /</i>ディレクトリに<i>client.rs</i>ファイルを作成して<i>開き</i>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then enter the following, which is the <code>connect</code> function in the <code>client</code> module that we removed in the previous step:</span>次に、前の手順で削除した<code>client</code>モジュールの<code>connect</code>関数である、次のように入力します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/client.rs</span></span> <span class=filename>ファイル名：src / client.rs</span></span> </p><br><div data-lang=rust><div data-l="fn connect() {"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that we don&#39;t need a <code>mod</code> declaration in this file because we already declared the <code>client</code> module with <code>mod</code> in <i>src/lib.rs</i> .</span> <i>src / lib.rsに</i> <code>mod</code>を持つ<code>client</code>モジュールをすでに宣言しているので、このファイルには<code>mod</code>宣言は必要ありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This file just provides the <i>contents</i> of the <code>client</code> module.</span>このファイルは<code>client</code>モジュールの<i>内容</i>を提供するだけです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we put a <code>mod client</code> here, we&#39;d be giving the <code>client</code> module its own submodule named <code>client</code> !</span>ここに<code>mod client</code>を置くと、 <code>client</code>モジュールに<code>client</code>という名前のサブモジュールが与えられ<code>client</code> ！</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust only knows to look in <i>src/lib.rs</i> by default.</span>錆は、デフォルトで<i>src / lib.rs</i>を見ることしか知りません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we want to add more files to our project, we need to tell Rust in <i>src/lib.rs</i> to look in other files;</span>プロジェクトにさらにファイルを追加したい場合は、 <i>src / lib.rsの</i> Rustに他のファイルを見るように指示する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">this is why <code>mod client</code> needs to be defined in <i>src/lib.rs</i> and can&#39;t be defined in <i>src/client.rs</i> .</span>これはなぜある<code>mod client</code> <i>SRC / lib.rs</i>で定義する必要があり<i>、SRC / client.rs</i>に定義することはできません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now the project should compile successfully, although you&#39;ll get a few warnings.</span>これでプロジェクトは正常にコンパイルされますが、いくつかの警告が表示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Remember to use <code>cargo build</code> instead of <code>cargo run</code> because we have a library crate rather than a binary crate:</span>使用することを忘れないでください<code>cargo build</code>の代わりに、 <code>cargo run</code> 、我々は、ライブラリのクレートではなく、バイナリクレートを持っているので。</span> </p><br><div data-lang=text><div data-l="$ cargo build"></div><div data-l="   Compiling communicator v0.1.0 (file:///projects/communicator)"></div><div data-l="warning: function is never used: `connect`"></div><div data-l=" --&gt; src/client.rs:1:1"></div><div data-l="  |"></div><div data-l="1 | / fn connect() {"></div><div data-l="2 | | }"></div><div data-l="  | |_^"></div><div data-l="  |"></div><div data-l="  = note: #[warn(dead_code)] on by default"></div><div data-l=""></div><div data-l="warning: function is never used: `connect`"></div><div data-l=" --&gt; src/lib.rs:4:5"></div><div data-l="  |"></div><div data-l="4 | /     fn connect() {"></div><div data-l="5 | |     }"></div><div data-l="  | |_____^"></div><div data-l=""></div><div data-l="warning: function is never used: `connect`"></div><div data-l=" --&gt; src/lib.rs:8:9"></div><div data-l="  |"></div><div data-l="8 | /         fn connect() {"></div><div data-l="9 | |         }"></div><div data-l="  | |_________^"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These warnings tell us that we have functions that are never used.</span>これらの警告は、使用されていない機能があることを示しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Don&#39;t worry about these warnings for now;</span>今はこれらの警告を心配しないでください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">we&#39;ll address them later in this chapter in the “Controlling Visibility with <code>pub</code> ” section.</span>この章の「 <code>pub</code>可視性の制御」の後半で説明します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The good news is that they&#39;re just warnings;</span>良いニュースは、彼らはただの警告だということです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">our project built successfully!</span>私たちのプロジェクトはうまくいった！</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, let&#39;s extract the <code>network</code> module into its own file using the same pattern.</span>次に、 <code>network</code>モジュールを同じパターンで独自のファイルに展開しましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In <i>src/lib.rs</i> , delete the body of the <code>network</code> module and add a semicolon to the declaration, like so:</span> <i>src / lib.rs</i>で、 <code>network</code>モジュールの本体を削除し、次のように宣言にセミコロンを追加します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/lib.rs</span></span> <span class=filename>ファイル名：src / lib.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="mod client;"></div><div data-l=""></div><div data-l="mod network;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then create a new <i>src/network.rs</i> file and enter the following:</span>新しい<i>src / network.rs</i>ファイルを作成し、次のように入力します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/network.rs</span></span> <span class=filename>ファイル名：src / network.rs</span></span> </p><br><div data-lang=rust><div data-l="fn connect() {"></div><div data-l=}></div><div data-l=""></div><div data-l="mod server {"></div><div data-l="    fn connect() {"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Notice that we still have a <code>mod</code> declaration within this module file;</span>このモジュールファイルにはまだ<code>mod</code>宣言があることに注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">this is because we still want <code>server</code> to be a submodule of <code>network</code> .</span>これは、 <code>server</code>を<code>network</code>サブモジュールにしたいから<code>network</code> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Run <code>cargo build</code> again.</span> <code>cargo build</code>再度実行します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Success!</span>成功！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We have one more module to extract: <code>server</code> .</span>私たちにはさらに1つの抽出モジュールがあり<code>server</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because it&#39;s a submodule—that is, a module within a module—our current tactic of extracting a module into a file named after that module won&#39;t work.</span>これはサブモジュール、つまりモジュール内のモジュールなので、モジュールをそのモジュールの名前をつけたファイルに展開する現在の方法は機能しません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll try anyway so you can see the error.</span>とにかく試してみると、エラーが表示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, change <i>src/network.rs</i> to have <code>mod server;</code></span>まず、 <i>src / network.rs</i>を変更して<code>mod server;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">instead of the <code>server</code> module&#39;s contents:</span> <code>server</code>モジュールの内容の代わりに：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/network.rs</span></span> <span class=filename>ファイル名：src / network.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="fn connect() {"></div><div data-l=}></div><div data-l=""></div><div data-l="mod server;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then create a <i>src/server.rs</i> file and enter the contents of the <code>server</code> module that we extracted:</span>次に、 <i>src / server.rs</i>ファイルを作成し、抽出した<code>server</code>モジュールの内容を入力し<code>server</code> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: src/server.rs</span></span> <span class=filename>ファイル名：src / server.rs</span></span> </p><br><div data-lang=rust><div data-l="fn connect() {"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we try to run <code>cargo build</code> , we&#39;ll get the error shown in Listing 7-5.</span> <code>cargo build</code>を実行しようとすると、リスト7-5のエラーが発生します。</span> </p><br><div data-lang=text><div data-l="$ cargo build"></div><div data-l="   Compiling communicator v0.1.0 (file:///projects/communicator)"></div><div data-l="error: cannot declare a new module at this location"></div><div data-l=" --&gt; src/network.rs:4:5"></div><div data-l="  |"></div><div data-l="4 | mod server;"></div><div data-l="  |     ^^^^^^"></div><div data-l="  |"></div><div data-l="note: maybe move this module `src/network.rs` to its own directory via `src/network/mod.rs`"></div><div data-l=" --&gt; src/network.rs:4:5"></div><div data-l="  |"></div><div data-l="4 | mod server;"></div><div data-l="  |     ^^^^^^"></div><div data-l="note: ... or maybe `use` the module `server` instead of possibly redeclaring it"></div><div data-l=" --&gt; src/network.rs:4:5"></div><div data-l="  |"></div><div data-l="4 | mod server;"></div><div data-l="  |     ^^^^^^"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 7-5: Error when trying to extract the <code>server</code> submodule into <i>src/server.rs</i></span></span> <span class=caption>コードリスト7-5： <code>server</code>サブモジュールを<i>src / server.rs</i>に展開しようとするとエラーが発生する</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The error says we <code>cannot declare a new module at this location</code> and is pointing to the <code>mod server;</code></span>エラーは<code>cannot declare a new module at this location</code>は<code>cannot declare a new module at this location</code> 、 <code>mod server;</code>指していると言い<code>mod server;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">line in <i>src/network.rs</i> .</span> <i>src / network.rsの</i>行。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">So <i>src/network.rs</i> is different than <i>src/lib.rs</i> somehow: keep reading to understand why.</span>だから<i>src / network.rs</i>は<i>src / lib.rsとは</i>何とか違っています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The note in the middle of Listing 7-5 is actually very helpful because it points out something we haven&#39;t yet talked about doing:</span>リスト7-5の真ん中のメモは、実際にはまだ話していないことを指摘しているので、実際には非常に役立ちます。</span> </p><br><div data-lang=text><div data-l="note: maybe move this module `network` to its own directory via"></div><div data-l="`network/mod.rs`"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Instead of continuing to follow the same file-naming pattern we used previously, we can do what the note suggests:</span>これまでに使用したのと同じファイル命名パターンを続行するのではなく、ノートで示唆していることを実行できます。</span> </p><br><div data-b=1.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Make a new <i>directory</i> named <i>network</i> , the parent module&#39;s name.</span>親モジュールの名前である<i>network</i>という名前の新しい<i>ディレクトリを作成し</i>ます。</span> </div><div data-b=2.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Move the <i>src/network.rs</i> file into the new <i>network</i> directory and rename it <i>src/network/mod.rs</i> .</span> <i>src / network.rs</i>ファイルを新しい<i>ネットワーク</i>ディレクトリに移動し、 <i>src /</i> <i>network / mod.rsという</i>名前に変更します。</span> </div><div data-b=3.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Move the submodule file <i>src/server.rs</i> into the <i>network</i> directory.</span>サブモジュールファイル<i>src / server.rs</i>を<i>ネットワーク</i>ディレクトリに移動します。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here are commands to carry out these steps:</span>これらの手順を実行するコマンドは次のとおりです。</span> </p><br><div data-lang=text><div data-l="$ mkdir src/network"></div><div data-l="$ mv src/network.rs src/network/mod.rs"></div><div data-l="$ mv src/server.rs src/network"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now when we try to run <code>cargo build</code> , compilation will work (we&#39;ll still have warnings, though).</span>今、私たちが<code>cargo build</code>を実行しようと<code>cargo build</code> 、コンパイルがうまくいくでしょう（ただし、まだ警告があります）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our module layout still looks exactly the same as it did when we had all the code in <i>src/lib.rs</i> in Listing 7-3:</span>コードリスト7-3の<i>src / lib.rs</i>にすべてのコードが含まれていたときと同じように、モジュールのレイアウトはまったく同じです。</span> </p><br><div data-lang=text><div data-l=communicator></div><div data-l=" ├── client"></div><div data-l=" └── network"></div><div data-l="     └── server"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The corresponding file layout now looks like this:</span>対応するファイルレイアウトは次のようになります。</span> </p><br><div data-lang=text><div data-l="└── src"></div><div data-l="    ├── client.rs"></div><div data-l="    ├── lib.rs"></div><div data-l="    └── network"></div><div data-l="        ├── mod.rs"></div><div data-l="        └── server.rs"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">So when we wanted to extract the <code>network::server</code> module, why did we have to also change the <i>src/network.rs</i> file to the <i>src/network/mod.rs</i> file and put the code for <code>network::server</code> in the <i>network</i> directory in <i>src/network/server.rs</i> ?</span>我々が抽出したいときに<code>network::server</code>モジュールを、なぜ我々はまた<i>、SRC /ネットワーク/ mod.rsファイル</i>へ<i>のsrc / network.rs</i>ファイルを変更し、ためのコード入れなければならなかったの<code>network::server</code> <i>ネットワーク</i>ディレクトリに<i>src / network / server.rsにあり</i>ますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Why couldn&#39;t we just extract the <code>network::server</code> module into <i>src/server.rs</i> ?</span>なぜ単に<i>src / server.rsに</i> <code>network::server</code>モジュールを抽出できないのですか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The reason is that Rust wouldn&#39;t be able to recognize that <code>server</code> was supposed to be a submodule of <code>network</code> if the <i>server.rs</i> file was in the <i>src</i> directory.</span>その理由は、 <i>server.rs</i>ファイルが<i>src</i>ディレクトリにある場合、Rustは<code>server</code>が<code>network</code>サブモジュールであると認識していないことになります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To clarify Rust&#39;s behavior here, let&#39;s consider a different example with the following module hierarchy, where all the definitions are in <i>src/lib.rs</i> :</span>ここでRustの動作を明らかにするために、すべての定義が<i>src / lib.rsに</i>ある次のモジュール階層の別の例を考えてみましょう。</span> </p><br><div data-lang=text><div data-l=communicator></div><div data-l=" ├── client"></div><div data-l=" └── network"></div><div data-l="     └── client"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this example, we have three modules again: <code>client</code> , <code>network</code> , and <code>network::client</code> .</span>この例では、 <code>client</code> 、 <code>network</code> 、および<code>network::client</code> 3つのモジュールが再びあり<code>network::client</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Following the same steps we did earlier for extracting modules into files, we would create <i>src/client.rs</i> for the <code>client</code> module.</span>以前にモジュールをファイルに解凍したのと同じ手順で、 <code>client</code>モジュールの<i>src / client.rs</i>を作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For the <code>network</code> module, we would create <i>src/network.rs</i> .</span> <code>network</code>モジュールの場合、 <i>src / network.rs</i>を作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But we wouldn&#39;t be able to extract the <code>network::client</code> module into a <i>src/client.rs</i> file because that already exists for the top-level <code>client</code> module!</span>しかし、 <code>network::client</code>モジュールを<i>src / client.rs</i>ファイルに<i>展開</i>することはできません。これは、トップレベルの<code>client</code>モジュール用にすでに存在しているからです！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we could put the code for <i>both</i> the <code>client</code> and <code>network::client</code> modules in the <i>src/client.rs</i> file, Rust wouldn&#39;t have any way to know whether the code was for <code>client</code> or for <code>network::client</code> .</span> <i>src / client.rs</i>ファイルに<code>client</code>と<code>network::client</code>モジュールの<i>両方</i>のコードを入れることができれば、Rustはコードが<code>client</code>か<code>network::client</code>用かを知ることができません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, in order to extract a file for the <code>network::client</code> submodule of the <code>network</code> module, we needed to create a directory for the <code>network</code> module instead of a <i>src/network.rs</i> file.</span>したがって、 <code>network</code>モジュールの<code>network::client</code>サブモジュール用のファイルを抽出するために、 <i>src / network.rs</i>ファイルの代わりに<code>network</code>モジュール用のディレクトリを作成する必要がありました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The code that is in the <code>network</code> module then goes into the <i>src/network/mod.rs</i> file, and the submodule <code>network::client</code> can have its own <i>src/network/client.rs</i> file.</span> <code>network</code>モジュールにあるコードは<i>src / network / mod.rs</i>ファイルに入り、サブモジュール<code>network::client</code>は独自の<i>src / network / client.rs</i>ファイルを持つことができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now the top-level <i>src/client.rs</i> is unambiguously the code that belongs to the <code>client</code> module.</span>現在、トップレベルの<i>src / client.rs</i>は、 <code>client</code>モジュールに属するコードを明白に示してい<code>client</code> 。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rules of Module Filesystems</span>モジュールファイルシステムのルール</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s summarize the rules of modules with regard to files:</span>ファイルに関するモジュールのルールを要約しましょう：</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If a module named <code>foo</code> has no submodules, you should put the declarations for <code>foo</code> in a file named <i>foo.rs</i> .</span> <code>foo</code>という名前のモジュールにサブモジュールがない場合は、 <code>foo</code>の宣言を<i>foo.rs</i>という名前のファイルに配置する必要があります。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If a module named <code>foo</code> does have submodules, you should put the declarations for <code>foo</code> in a file named <i>foo/mod.rs</i> .</span> <code>foo</code>という名前のモジュールにサブモジュールがある場合は、 <code>foo</code>の宣言を<i>foo / mod.rs</i>という名前のファイルに配置する必要があります。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These rules apply recursively, so if a module named <code>foo</code> has a submodule named <code>bar</code> and <code>bar</code> does not have submodules, you should have the following files in your <i>src</i> directory:</span>これらのルールは再帰的に適用されるため、 <code>foo</code>という名前のモジュールに<code>bar</code>という名前のサブモジュールがあり、 <code>bar</code>サブモジュールがない場合は、 <i>src</i>ディレクトリに次のファイルがあります。</span> </p><br><div data-lang=text><div data-l="└── foo"></div><div data-l="    ├── bar.rs (contains the declarations in `foo::bar`)"></div><div data-l="    └── mod.rs (contains the declarations in `foo`, including `mod bar`)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The modules should be declared in their parent module&#39;s file using the <code>mod</code> keyword.</span>モジュールは、 <code>mod</code>キーワードを使用して親モジュールのファイルで宣言する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, we&#39;ll talk about the <code>pub</code> keyword and get rid of those warnings!</span>次に、 <code>pub</code>キーワードについて説明し、その警告を取り除きます！</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch07-01-mod-and-the-filesystem.html');});</script>