<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=ch14-03-cargo-workspaces.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo Workspaces</span>カーゴワークスペース</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In Chapter 12, we built a package that included a binary crate and a library crate.</span>第12章では、バイナリクレートとライブラリクレートを含むパッケージを作成しました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As your project develops, you might find that the library crate continues to get bigger and you want to split up your package further into multiple library crates.</span>あなたのプロジェクトが進展するにつれて、図書館箱は引き続き大きくなり、パッケージを複数の図書館箱にさらに分割したいと思うかもしれません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this situation, Cargo offers a feature called <i>workspaces</i> that can help manage multiple related packages that are developed in tandem.</span>このような状況では、Cargoには複数の関連パッケージを一元的に管理するための<i>ワークスペース</i>という機能があり<i>ます</i> 。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Creating a Workspace</span>ワークスペースの作成</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A <i>workspace</i> is a set of packages that share the same <i>Cargo.lock</i> and output directory.</span> <i>ワークスペース</i>は、同じ<i>Cargo.lock</i>と出力ディレクトリを共有する一連のパッケージです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s make a project using a workspace—we&#39;ll use trivial code so we can concentrate on the structure of the workspace.</span>ワークスペースを使ってプロジェクトを作ってみましょう。私たちは、ワークスペースの構造に集中できるように、簡単なコードを使用します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There are multiple ways to structure a workspace;</span>ワークスペースを構成するには複数の方法があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">we&#39;re going to show one common way.</span> 1つの共通の方法を示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll have a workspace containing a binary and two libraries.</span>バイナリと2つのライブラリを含むワークスペースがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The binary, which will provide the main functionality, will depend on the two libraries.</span>主な機能を提供するバイナリは、2つのライブラリに依存します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">One library will provide an <code>add_one</code> function, and a second library an <code>add_two</code> function.</span> 1つのライブラリは<code>add_one</code>関数を提供し、2つ目のライブラリは<code>add_two</code>関数を<code>add_two</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These three crates will be part of the same workspace.</span>これらの3つの箱は同じワークスペースの一部になります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll start by creating a new directory for the workspace:</span>作業領域の新しいディレクトリを作成します。</span> </p><br><div data-lang=text><div data-l="$ mkdir add"></div><div data-l="$ cd add"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, in the <i>add</i> directory, we create the <i>Cargo.toml</i> file that will configure the entire workspace.</span>次に、 <i>add</i>ディレクトリにワークスペース全体を構成する<i>Cargo.toml</i>ファイルを作成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This file won&#39;t have a <code>[package]</code> section or the metadata we&#39;ve seen in other <i>Cargo.toml</i> files.</span>このファイルには、他の<i>Cargo.toml</i>ファイルで見た<code>[package]</code>セクションやメタデータはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Instead, it will start with a <code>[workspace]</code> section that will allow us to add members to the workspace by specifying the path to our binary crate;</span>代わりに、 <code>[workspace]</code>セクションから開始し、バイナリクレートへのパスを指定することでワークスペースにメンバーを追加できます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">in this case, that path is <i>adder</i> :</span>この場合、そのパスは<i>加算器</i>です：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: Cargo.toml</span></span> <span class=filename>ファイル名：Cargo.toml</span></span> </p><br><div data-lang=toml><div data-l=[workspace]></div><div data-l=""></div><div data-l="members = ["></div><div data-l="    &quot;adder&quot;,"></div><div data-l=]></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, we&#39;ll create the <code>adder</code> binary crate by running <code>cargo new</code> within the <i>add</i> directory:</span>次に、 <i>add</i>ディレクトリ内で<code>cargo new</code>実行して、 <code>adder</code>バイナリクレートを作成します。</span> </p><br><div data-lang=text><div data-l="$ cargo new --bin adder"></div><div data-l="     Created binary (application) `adder` project"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">At this point, we can build the workspace by running <code>cargo build</code> .</span>この時点で、 <code>cargo build</code>実行して作業領域を構築することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The files in your <i>add</i> directory should look like this:</span> <i>add</i>ディレクトリのファイルは次のようになります。</span> </p><br><div data-lang=text><div data-l="├── Cargo.lock"></div><div data-l="├── Cargo.toml"></div><div data-l="├── adder"></div><div data-l="│   ├── Cargo.toml"></div><div data-l="│   └── src"></div><div data-l="│       └── main.rs"></div><div data-l="└── target"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The workspace has one <i>target</i> directory at the top level for the compiled artifacts to be placed into;</span>ワークスペースには、コンパイルされた成果物が配置される最上位に1つの<i>ターゲット・</i>ディレクトリーがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the <code>adder</code> crate doesn&#39;t have its own <i>target</i> directory.</span> <code>adder</code>枠はそれ自身の<i>目標</i>ディレクトリを持たない。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Even if we were to run <code>cargo build</code> from inside the <i>adder</i> directory, the compiled artifacts would still end up in <i>add/target</i> rather than <i>add/adder/target</i> .</span>たとえ、私たちが<i>adder</i>ディレクトリの中から<code>cargo build</code>を実行するとしても、コンパイルされた成果物は<i>/ adder / targetを追加</i> <i>するの</i>ではなく、 <i>add / target</i>で終わるでしょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo structures the <i>target</i> directory in a workspace like this because the crates in a workspace are meant to depend on each other.</span> Cargoは、ワークスペース内のクレートが相互に依存するため、このようなワークスペース内の<i>ターゲット</i>ディレクトリを構造化します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If each crate had its own <i>target</i> directory, each crate would have to recompile each of the other crates in the workspace to have the artifacts in its own <i>target</i> directory.</span>各クレートに独自の<i>ターゲット</i>ディレクトリがある場合、各クレートはワークスペース内の他の各クレートを再コンパイルして、独自の<i>ターゲット</i>ディレクトリにアーティファクトを持たせる必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By sharing one <i>target</i> directory, the crates can avoid unnecessary rebuilding.</span> 1つの<i>ターゲット</i>ディレクトリを共有することで、不必要な再構築を避けることができます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Creating the Second Crate in the Workspace</span>ワークスペースでの第2のクレートの作成</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, let&#39;s create another member crate in the workspace and call it <code>add-one</code> .</span>次に、ワークスペースに別のメンバークレートを作成し、それを<code>add-one</code>と呼んでみましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Change the top-level <i>Cargo.toml</i> to specify the <i>add-one</i> path in the <code>members</code> list:</span>トップレベルの<i>Cargo.toml</i>を変更して、 <code>members</code>リストの<i>追加1の</i>パスを指定します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: Cargo.toml</span></span> <span class=filename>ファイル名：Cargo.toml</span></span> </p><br><div data-lang=toml><div data-l=[workspace]></div><div data-l=""></div><div data-l="members = ["></div><div data-l="    &quot;adder&quot;,"></div><div data-l="    &quot;add-one&quot;,"></div><div data-l=]></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then generate a new library crate named <code>add-one</code> :</span>次に、 <code>add-one</code>という名前の新しいライブラリクレートを生成します。</span> </p><br><div data-lang=text><div data-l="$ cargo new add-one"></div><div data-l="     Created library `add-one` project"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Your <i>add</i> directory should now have these directories and files:</span> <i>add</i>ディレクトリに次のディレクトリとファイルが作成されます。</span> </p><br><div data-lang=text><div data-l="├── Cargo.lock"></div><div data-l="├── Cargo.toml"></div><div data-l="├── add-one"></div><div data-l="│   ├── Cargo.toml"></div><div data-l="│   └── src"></div><div data-l="│       └── lib.rs"></div><div data-l="├── adder"></div><div data-l="│   ├── Cargo.toml"></div><div data-l="│   └── src"></div><div data-l="│       └── main.rs"></div><div data-l="└── target"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the <i>add-one/src/lib.rs</i> file, let&#39;s add an <code>add_one</code> function:</span> <i>add-one / src / lib.rs</i>ファイルに、 <code>add_one</code>関数を追加しましょう：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: add-one/src/lib.rs</span></span> <span class=filename>ファイル名：add-one / src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="pub fn add_one(x: i32) -&gt; i32 {"></div><div data-l="    x + 1"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now that we have a library crate in the workspace, we can have the binary crate <code>adder</code> depend on the library crate <code>add-one</code> .</span>ワークスペースにライブラリ・クレートがあるので、バイナリ・クレート・<code>adder</code>ライブラリ・クレート・<code>add-one</code>依存させることができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">First, we&#39;ll need to add a path dependency on <code>add-one</code> to <i>adder/Cargo.toml</i> .</span>まず、 <i>addder / Cargo.toml</i>に<code>add-one</code>にパスの依存関係を追加する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: adder/Cargo.toml</span></span> <span class=filename>ファイル名：adder / Cargo.toml</span></span> </p><br><div data-lang=toml><div data-l=[dependencies]></div><div data-l=""></div><div data-l="add-one = { path = &quot;../add-one&quot; }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo doesn&#39;t assume that crates in a workspace will depend on each other, so we need to be explicit about the dependency relationships between the crates.</span> Cargoでは、ワークスペース内のクレートが互いに依存するとは想定されていないため、クレート間の依存関係について明示する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, let&#39;s use the <code>add_one</code> function from the <code>add-one</code> crate in the <code>adder</code> crate.</span>次に、 <code>adder</code>枠の<code>add-one</code>枠から<code>add_one</code>関数を使用しましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Open the <i>adder/src/main.rs</i> file and add an <code>extern crate</code> line at the top to bring the new <code>add-one</code> library crate into scope.</span> <i>adder / src / main.rs</i>ファイルを開き、上部に<code>extern crate</code> <i>crate</i>行を<code>add-one</code>して、新しい<code>add-one</code>ライブラリのcrateを有効範囲に入れます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then change the <code>main</code> function to call the <code>add_one</code> function, as in Listing 14-7:</span>リスト14-7のように、 <code>main</code>関数を変更して<code>add_one</code>関数を呼び出します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: adder/src/main.rs</span></span> <span class=filename>ファイル名：adder / src / main.rs</span></span> </p><br><div data-lang=rust,ignore><div data-l="extern crate add_one;"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let num = 10;"></div><div data-l="    println!(&quot;Hello, world! {} plus one is {}!&quot;, num, add_one::add_one(num));"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=caption>Listing 14-7: Using the <code>add-one</code> library crate from the <code>adder</code> crate</span></span> <span class=caption>リスト14-7： <code>adder</code>箱の<code>add-one</code>ライブラリのcrateを使う</span></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s build the workspace by running <code>cargo build</code> in the top-level <i>add</i> directory!</span>最上位の<i>add</i>ディレクトリに<code>cargo build</code>を実行して作業領域を構築しましょう！</span> </p><br><div data-lang=text><div data-l="$ cargo build"></div><div data-l="   Compiling add-one v0.1.0 (file:///projects/add/add-one)"></div><div data-l="   Compiling adder v0.1.0 (file:///projects/add/adder)"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.68 secs"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To run the binary crate from the <i>add</i> directory, we need to specify which package in the workspace we want to use by using the <code>-p</code> argument and the package name with <code>cargo run</code> :</span> <i>add</i>ディレクトリからバイナリ・クレートを実行するには、 <code>-p</code>引数を使用して作業領域内のどのパッケージを使用するかを指定し、 <code>cargo run</code>時にパッケージ名を指定する必要があります。</span> </p><br><div data-lang=text><div data-l="$ cargo run -p adder"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running `target/debug/adder`"></div><div data-l="Hello, world! 10 plus one is 11!"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This runs the code in <i>adder/src/main.rs</i> , which depends on the <code>add-one</code> crate.</span>これは、 <code>add-one</code> <i>/ crate</i>に依存する<i>adder / src / main.rs</i>のコードを実行します。</span> </p><br><h4> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Depending on an External Crate in a Workspace</span>ワークスペース内の外部クレートに応じて</span> </h4><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Notice that the workspace has only one <i>Cargo.lock</i> file at the top level of the workspace rather than having a <i>Cargo.lock</i> in each crate&#39;s directory.</span>ワークスペースには、各クレートのディレクトリに<i>Cargo.lockを置くの</i>ではなく、ワークスペースの最上位に1つの<i>Cargo.lock</i>ファイルしかありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This ensures that all crates are using the same version of all dependencies.</span>これにより、すべてのクレートがすべての依存関係の同じバージョンを使用していることが保証されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we add the <code>rand</code> crate to the <i>adder/Cargo.toml</i> and <i>add-one/Cargo.toml</i> files, Cargo will resolve both of those to one version of <code>rand</code> and record that in the one <i>Cargo.lock</i> .</span> <i>加算器/ Cargo.toml</i>と<i>add-one / Cargo.toml</i>ファイルに<code>rand</code> <i>crate</i>を<i>追加</i>すると、Cargoはそれらの両方を1つのバージョンの<code>rand</code>解決し、1つの<i>Cargo.lockに</i>記録します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Making all crates in the workspace use the same dependencies means the crates in the workspace will always be compatible with each other.</span>同じ依存関係を使用するワークスペース内のすべてのクレートを作成すると、ワークスペース内のクレートが常に互いに互換性があることを意味します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s add the <code>rand</code> crate to the <code>[dependencies]</code> section in the <i>add-one/Cargo.toml</i> file to be able to use the <code>rand</code> crate in the <code>add-one</code> crate:</span>さんが追加してみましょう<code>rand</code>にクレートを<code>[dependencies]</code>を使用できるようにする<i>アドオン1 / Cargo.toml</i>ファイルのセクション<code>rand</code>にクレートを<code>add-one</code>クレート：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: add-one/Cargo.toml</span></span> <span class=filename>ファイル名：add-one / Cargo.toml</span></span> </p><br><div data-lang=toml><div data-l=[dependencies]></div><div data-l=""></div><div data-l="rand = &quot;0.3.14&quot;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can now add <code>extern crate rand;</code></span> <code>extern crate rand;</code>追加できるようになりました<code>extern crate rand;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">to the <i>add-one/src/lib.rs</i> file, and building the whole workspace by running <code>cargo build</code> in the <i>add</i> directory will bring in and compile the <code>rand</code> crate:</span> <i>add-one / src / lib.rs</i>ファイルに<i>追加</i>し、 <i>add</i>ディレクトリに<code>cargo build</code>を実行してワークスペース全体を<code>cargo build</code>すると、 <code>rand</code> <i>crateが読み込ま</i>れコンパイルされます：</span> </p><br><div data-lang=text><div data-l="$ cargo build"></div><div data-l="    Updating registry `https://github.com/rust-lang/crates.io-index`"></div><div data-l=" Downloading rand v0.3.14"></div><div data-l="   --snip--"></div><div data-l="   Compiling rand v0.3.14"></div><div data-l="   Compiling add-one v0.1.0 (file:///projects/add/add-one)"></div><div data-l="   Compiling adder v0.1.0 (file:///projects/add/adder)"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 10.18 secs"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The top-level <i>Cargo.lock</i> now contains information about the dependency of <code>add-one</code> on <code>rand</code> .</span>トップレベルの<i>Cargo.lockに</i> 、 <code>add-one</code> <code>rand</code>への依存性に関する情報が含まれるようになりました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, even though <code>rand</code> is used somewhere in the workspace, we can&#39;t use it in other crates in the workspace unless we add <code>rand</code> to their <i>Cargo.toml</i> files as well.</span>しかし、にもかかわらず、 <code>rand</code> 、我々は追加しない限り、ワークスペースのどこかで使用されている、我々は、ワークスペース内の他の木箱でそれを使用することはできません<code>rand</code>同様に彼らの<i>Cargo.tomlファイル</i>に。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, if we add <code>extern crate rand;</code></span>たとえば、 <code>extern crate rand;</code>を追加すると<code>extern crate rand;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">to the <i>adder/src/main.rs</i> file for the <code>adder</code> crate, we&#39;ll get an error:</span> <code>adder</code>クレートのための<i>/ src / main.rs</i>ファイルの<code>adder</code>に、エラーが表示されます：</span> </p><br><div data-lang=text><div data-l="$ cargo build"></div><div data-l="   Compiling adder v0.1.0 (file:///projects/add/adder)"></div><div data-l="error: use of unstable library feature 'rand': use `rand` from crates.io (see"></div><div data-l="issue #27703)"></div><div data-l=" --&gt; adder/src/main.rs:1:1"></div><div data-l="  |"></div><div data-l="1 | extern crate rand;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To fix this, edit the <i>Cargo.toml</i> file for the <code>adder</code> crate and indicate that <code>rand</code> is a dependency for that crate as well.</span>これを修正するには、 <code>adder</code>枠の<i>Cargo.toml</i>ファイルを編集し、 <code>rand</code>がその枠の依存関係であることを示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Building the <code>adder</code> crate will add <code>rand</code> to the list of dependencies for <code>adder</code> in <i>Cargo.lock</i> , but no additional copies of <code>rand</code> will be downloaded.</span> <code>adder</code>クレートをビルドすると、 <i>Cargo.lockの</i> <code>adder</code>の依存関係リストに<code>rand</code>が追加されますが、 <code>rand</code>の追加コピーはダウンロードされません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo has ensured that every crate in the workspace using the <code>rand</code> crate will be using the same version.</span> Cargoは、 <code>rand</code>クレートを使用する作業スペースのすべての箱が同じバージョンを使用することを保証しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Using the same version of <code>rand</code> across the workspace saves space because we won&#39;t have multiple copies and ensures that the crates in the workspace will be compatible with each other.</span>同じバージョンの<code>rand</code>をワークスペースにわたって使用すると、複数のコピーを持たないため、ワークスペース内のクレートが互いに互換性があるため、スペースが節約されます。</span> </p><br><h4> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Adding a Test to a Workspace</span>ワークスペースへのテストの追加</span> </h4><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For another enhancement, let&#39;s add a test of the <code>add_one::add_one</code> function within the <code>add_one</code> crate:</span>もう1つの機能強化のために、 <code>add_one::add_one</code>関数のテストを<code>add_one</code>クレートに追加しましょう：</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><span class=filename>Filename: add-one/src/lib.rs</span></span> <span class=filename>ファイル名：add-one / src / lib.rs</span></span> </p><br><div data-lang=rust><div data-l="pub fn add_one(x: i32) -&gt; i32 {"></div><div data-l="    x + 1"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::*;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="        assert_eq!(3, add_one(2));"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now run <code>cargo test</code> in the top-level <i>add</i> directory:</span>次に、トップレベルの<i>add</i>ディレクトリで<code>cargo test</code>を実行します。</span> </p><br><div data-lang=text><div data-l="$ cargo test"></div><div data-l="   Compiling add-one v0.1.0 (file:///projects/add/add-one)"></div><div data-l="   Compiling adder v0.1.0 (file:///projects/add/adder)"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.27 secs"></div><div data-l="     Running target/debug/deps/add_one-f0253159197f7841"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div><div data-l=""></div><div data-l="     Running target/debug/deps/adder-f88af9d2cc175a5e"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div><div data-l=""></div><div data-l="   Doc-tests add-one"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The first section of the output shows that the <code>it_works</code> test in the <code>add-one</code> crate passed.</span>出力の最初のセクションは、 <code>add-one</code>クレートの<code>it_works</code>テストが<code>it_works</code>した<code>add-one</code>示しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next section shows that zero tests were found in the <code>adder</code> crate, and then the last section shows zero documentation tests were found in the <code>add-one</code> crate.</span>次のセクションでは、 <code>adder</code>箱にゼロのテストが見つかり、最後のセクションに<code>add-one</code>クレートのドキュメントのテストがゼロである<code>add-one</code>が示されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Running <code>cargo test</code> in a workspace structured like this one will run the tests for all the crates in the workspace.</span>このように構成された作業空間で<code>cargo test</code>を実行すると、ワークスペース内のすべてのクレートのテストが実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can also run tests for one particular crate in a workspace from the top-level directory by using the <code>-p</code> flag and specifying the name of the crate we want to test:</span>また、 <code>-p</code>フラグを使用してテストするクレートの名前を指定することで、トップレベルディレクトリからワークスペース内の特定の1つのクレートのテストを実行することもできます。</span> </p><br><div data-lang=text><div data-l="$ cargo test -p add-one"></div><div data-l="    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running target/debug/deps/add_one-b3235fea9a156f74"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div><div data-l=""></div><div data-l="   Doc-tests add-one"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This output shows <code>cargo test</code> only ran the tests for the <code>add-one</code> crate and didn&#39;t run the <code>adder</code> crate tests.</span>この出力は、 <code>cargo test</code>では、 <code>add-one</code>クレートの<code>cargo test</code>のみを実行し、 <code>adder</code>クレートテストを実行しなかったことを示しています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you publish the crates in the workspace to <i>https://crates.io/</i> , each crate in the workspace will need to be published separately.</span>ワークスペース内のクレートを<i>https://crates.io/</i>に公開する場合は、ワークスペース内の各クレートを個別に公開する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>cargo publish</code> command does not have an <code>--all</code> flag or a <code>-p</code> flag, so you must change to each crate&#39;s directory and run <code>cargo publish</code> on each crate in the workspace to publish the crates.</span> <code>cargo publish</code>コマンドには<code>--all</code>フラグまたは<code>-p</code>フラグがないため、各クレートのディレクトリに移動し、ワークスペースの各クレートで<code>cargo publish</code>を実行してクレートを公開する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For additional practice, add an <code>add-two</code> crate to this workspace in a similar way as the <code>add-one</code> crate!</span>追加の練習をするには、 <code>add-one</code>クレートと同様の方法で、このワークスペースに<code>add-two</code>クレートを<code>add-one</code>ください！</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As your project grows, consider using a workspace: it&#39;s easier to understand smaller, individual components than one big blob of code.</span>プロジェクトが成長するにつれて、ワークスペースの使用を検討してください。一つの大きなコードよりも小さく、個々のコンポーネントを理解する方が簡単です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Furthermore, keeping the crates in a workspace can make coordination between them easier if they are often changed at the same time.</span>さらに、ワークスペース内にクレートを保持することで、頻繁に変更されると、それらの間の調整をより簡単に行うことができます。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','ch14-03-cargo-workspaces.html');});</script>