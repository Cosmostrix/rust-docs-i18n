<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=lifetimes.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lifetimes</span>生涯</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is the last of three sections presenting Rust&#39;s ownership system.</span>これは、Rustの所有システムを提示する3つのセクションの最後です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is one of Rust&#39;s most distinct and compelling features, with which Rust developers should become quite acquainted.</span>これは、Rustの最も顕著で魅力的な機能の1つで、Rustの開発者はかなり知り合いになるはずです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Ownership is how Rust achieves its largest goal, memory safety.</span>所有権とは、Rustが最大の目標であるメモリの安全性を達成する方法です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There are a few distinct concepts, each with its own chapter:</span>いくつかの異なる概念があり、それぞれ独自の章があります。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#3ownership>ownership</a> , the key concept</span> <a class=notranslate href=#3ownership>ownership</a> 、キーコンセプト</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#3borrowing>borrowing</a> , and their associated feature &#39;references&#39;</span> <a class=notranslate href=#3borrowing>borrowing</a> 、およびそれらの関連するフィーチャ &#39;参照&#39;</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">lifetimes, which you&#39;re reading now</span>あなたが今読んでいる生涯</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These three chapters are related, and in order.</span>これら3つの章は関連しており、順番に説明されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You&#39;ll need all three to fully understand the ownership system.</span>所有権システムを完全に理解するには、3つすべてが必要です。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1ownership.html>ownership</a> <a class=notranslate href=#1references-and-borrowing.html>borrowing</a></span> <a class=notranslate href=#1ownership.html>ownership</a> <a class=notranslate href=#1references-and-borrowing.html>borrowing</a></span> <br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Meta</span>メタ</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Before we get to the details, two important notes about the ownership system.</span>詳細を知る前に、オーナーシップシステムに関する2つの重要な注意事項。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust has a focus on safety and speed.</span>錆は安全性とスピードに焦点を当てています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It accomplishes these goals through many &#39;zero-cost abstractions&#39;, which means that in Rust, abstractions cost as little as possible in order to make them work.</span>これは、多くの「ゼロコスト抽象化」によってこれらの目標を達成します。つまり、Rustでは抽象化のコストをできるだけ少なくして機能させることを意味します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The ownership system is a prime example of a zero-cost abstraction.</span>所有権システムは、ゼロコスト抽象化の主要な例です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">All of the analysis we&#39;ll talk about in this guide is <s>done at compile time</s> .</span>このガイド<s>で説明する</s>すべての分析は<s>、コンパイル時に行われます</s> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You do not pay any run-time cost for any of these features.</span>これらの機能のランタイムコストを支払うことはありません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, this system does have a certain cost: learning curve.</span>しかし、このシステムには一定のコストがあります：学習曲線。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Many new users to Rust experience something we like to call &#39;fighting with the borrow checker&#39;, where the Rust compiler refuses to compile a program that the author thinks is valid.</span> Rustの新しいユーザーの多くは、Rustコンパイラが作成者が有効だと思うプログラムをコンパイルすることを拒否する「borrow checkerとの戦い」と呼ばれることを経験しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This often happens because the programmer&#39;s mental model of how ownership should work doesn&#39;t match the actual rules that Rust implements.</span>これは、所有者がどのように動作するかについてのプログラマーの精神モデルが、Rustが実装する実際のルールと一致しないためによく発生します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You probably will experience similar things at first.</span>最初は似たようなことを経験するでしょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is good news, however: more experienced Rust developers report that once they work with the rules of the ownership system for a period of time, they fight the borrow checker less and less.</span>ただし、経験豊かなRustデベロッパーは、所有システムのルールを一定期間使用すると、借りチェッカーとの競争が少なくなることを報告しています。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">With that in mind, let&#39;s learn about lifetimes.</span>そのことを念頭に置いて、生涯について学びましょう。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lifetimes</span>生涯</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lending out a reference to a resource that someone else owns can be complicated.</span>他の人が所有しているリソースへの参照を貸し出すことは複雑になる可能性があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, imagine this set of operations:</span>たとえば、次の一連の操作を想像してみてください。</span> </p><br><div data-b=1.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">I acquire a handle to some kind of resource.</span>私はある種のリソースへのハンドルを取得します。</span> </div><div data-b=2.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">I lend you a reference to the resource.</span>私はあなたにリソースへの参照を貸します。</span> </div><div data-b=3.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">I decide I&#39;m done with the resource, and deallocate it, while you still have your reference.</span>私はあなたがまだあなたの参照を持っている間、私はリソースで完了し、それを割り当てを解除することを決定します。</span> </div><div data-b=4.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You decide to use the resource.</span>あなたはリソースを使用することに決めました。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Uh oh!</span>ええとああ！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Your reference is pointing to an invalid resource.</span>参照が無効なリソースを指しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is called a dangling pointer or &#39;use after free&#39;, when the resource is memory.</span>リソースがメモリの場合、これはダングリングポインタまたは &#39;フリー後の使用&#39;と呼ばれます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A small example of such a situation would be:</span>このような状況の小さな例は次のようになります。</span> </p><br><div data-lang=rust,ignore><div data-l="#//let r;              // Introduce reference: `r`."></div><div data-l="let r;              // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Introduce reference: <code>r</code> .</span>参照を導入する： <code>r</code> 。</span> </div><div data-l={></div><div data-l="#//    let i = 1;      // Introduce scoped value: `i`."></div><div data-l="    let i = 1;      // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Introduce scoped value: <code>i</code> .</span>スコープ値を導入する： <code>i</code> 。</span> </div><div data-l="#//    r = &amp;i;         // Store reference of `i` in `r`."></div><div data-l="    r = &amp;i;         // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Store reference of <code>i</code> in <code>r</code> .</span> <code>r</code>の<code>i</code>参照を格納する。</span> </div><div data-l="#//}                   // `i` goes out of scope and is dropped."></div><div data-l="}                   // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>i</code> goes out of scope and is dropped.</span> <code>i</code>は範囲外に出て落ちる。</span> </div><div data-l=""></div><div data-l="#//println!(&quot;{}&quot;, r);  // `r` still refers to `i`."></div><div data-l="println!(&quot;{}&quot;, r);  // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>r</code> still refers to <code>i</code> .</span> <code>r</code>まだ<code>i</code>指します。</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To fix this, we have to make sure that step four never happens after step three.</span>この問題を解決するには、ステップ3の後にステップ4が起こらないようにする必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the small example above the Rust compiler is able to report the issue as it can see the lifetimes of the various values in the function.</span>上の小さな例では、Rustコンパイラは関数内のさまざまな値の存続期間を見ることができるため、問題を報告することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When we have a function that takes arguments by reference the situation becomes more complex.</span>参照によって引数を取る関数があるとき、状況はより複雑になります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Consider the following example:</span>次の例を考えてみましょう。</span> </p><br><div data-lang=rust,ignore><div data-l="fn skip_prefix(line: &amp;str, prefix: &amp;str) -&gt; &amp;str {"></div><div data-l="#    // ..."></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">...</span> ...</span> </div><div data-l="#   line"></div><div data-l=}></div><div data-l=""></div><div data-l="let line = &quot;lang:en=Hello World!&quot;;"></div><div data-l="let lang = &quot;en&quot;;"></div><div data-l=""></div><div data-l="let v;"></div><div data-l={></div><div data-l="#//    let p = format!(&quot;lang:{}=&quot;, lang);  // -+ `p` comes into scope."></div><div data-l="    let p = format!(&quot;lang:{}=&quot;, lang);  // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>p</code> comes into scope.</span> -  + <code>p</code>がスコープに入ります。</span> </div><div data-l="#//    v = skip_prefix(line, p.as_str());  //  |"></div><div data-l="    v = skip_prefix(line, p.as_str());  // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//}                                       // -+ `p` goes out of scope."></div><div data-l="}                                       // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>p</code> goes out of scope.</span> -  + <code>p</code>は範囲外になります。</span> </div><div data-l="println!(&quot;{}&quot;, v);"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here we have a function <code>skip_prefix</code> which takes two <code>&amp;str</code> references as parameters and returns a single <code>&amp;str</code> reference.</span>ここでは、機能してい<code>skip_prefix</code> 2つの取り<code>&amp;str</code>パラメータとして参照を単一返し<code>&amp;str</code>参照を。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We call it by passing in references to <code>line</code> and <code>p</code> : Two variables with different lifetimes.</span>私たちはそれを<code>line</code>と<code>p</code>への参照を渡すことで呼びます：生涯の異なる2つの変数。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now the safety of the <code>println€</code> -line depends on whether the reference returned by <code>skip_prefix</code> function references the still living <code>line</code> or the already dropped <code>p</code> string.</span> <code>println€</code>の行の安全性は、 <code>skip_prefix</code>関数によって返された参照が静止している<code>line</code>または既にドロップされた<code>p</code>文字列を参照するかどうかによって決まります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because of the above ambiguity, Rust will refuse to compile the example code.</span>上記のあいまいさのために、Rustはサンプルコードのコンパイルを拒否します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To get it to compile we need to tell the compiler more about the lifetimes of the references.</span>それをコンパイルするには、コンパイラに参照の存続期間についてもっと詳しく伝える必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This can be done by making the lifetimes explicit in the function declaration:</span>これは、関数宣言で明示的な存続期間を設定することによって行うことができます。</span> </p><br><div data-lang=rust><div data-l="fn skip_prefix&lt;'a, 'b&gt;(line: &amp;'a str, prefix: &amp;'b str) -&gt; &amp;'a str {"></div><div data-l="#    // ..."></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">...</span> ...</span> </div><div data-l="#   line"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s examine the changes without going too deep into the syntax for now - we&#39;ll get to that later.</span>今のところ構文に深く進まずに変更を調べてみましょう。後でそれを説明します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The first change was adding the <code>&lt;&#39;a, &#39;b&gt;</code> after the method name.</span>最初の変更はメソッド名の後に<code>&lt;&#39;a, &#39;b&gt;</code>を追加することでした。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This introduces two lifetime parameters: <code>&#39;a</code> and <code>&#39;b</code> .</span> ：これは、二つの寿命パラメータ紹介<code>&#39;a</code>と<code>&#39;b</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Next, each reference in the function signature was associated with one of the lifetime parameters by adding the lifetime name after the <code>&amp;</code> .</span>次に、関数シグネチャ内の各参照は、 <code>&amp;</code>後にライフタイム名を追加することで、1つの存続時間パラメータに関連付けられました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This tells the compiler how the lifetimes between different references are related.</span>これは、異なる参照間の存続期間がどのように関係しているかをコンパイラに伝えます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As a result the compiler is now able to deduce that the return value of <code>skip_prefix</code> has the same lifetime as the <code>line</code> parameter, which makes the <code>v</code> reference safe to use even after the <code>p</code> goes out of scope in the original example.</span>その結果、コンパイラーは、 <code>skip_prefix</code>の戻り値が<code>line</code>パラメーターと同じ有効期間であることを推測することができます。これにより、 <code>p</code>が元の例の範囲外になった後でも<code>v</code>参照を安全に使用できるようになります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In addition to the compiler being able to validate the usage of <code>skip_prefix</code> return value, it can also ensure that the implementation follows the contract established by the function declaration.</span>コンパイラは<code>skip_prefix</code>戻り値の使用を検証できるだけでなく、実装が関数宣言によって確立されたコントラクトに確実に従うようにすることもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is useful especially when you are implementing traits that are introduced <a href=#3traits>later in the book</a> .</span>これは、特に<a href=#3traits>本の後半で</a>紹介される特性を実装する場合に便利です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Note</b> It&#39;s important to understand that lifetime annotations are <s>descriptive</s> , not <s>prescriptive</s> .</span> <b>注意</b>生涯の注釈は<s>説明的</s>ではなく、 <s>規範</s> <s>的</s>であることを理解することが重要です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This means that how long a reference is valid is determined by the code, not by the annotations.</span>これは、参照が有効である期間は、アノテーションではなくコードによって決定されることを意味します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The annotations, however, give information about lifetimes to the compiler that uses them to check the validity of references.</span>しかし、アノテーションは、コンパイラが参照の有効性をチェックするのに使用するライフタイムに関する情報を提供します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The compiler can do so without annotations in simple cases, but needs the programmer&#39;s support in complex scenarios.</span>コンパイラは単純なケースではアノテーションなしで行うことができますが、複雑なシナリオではプログラマのサポートが必要です。</span> </p><br> <a class=notranslate href=#1traits.html>traits</a> <br> <h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Syntax</span>構文</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>&#39;a</code> reads &#39;the lifetime a&#39;.</span> <code>&#39;a</code>は生涯a&#39;を読む。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Technically, every reference has some lifetime associated with it, but the compiler lets you elide (ie omit, see <a href=#3lifetime-elision>&quot;Lifetime Elision&quot;</a> below) them in common cases.</span>技術的には、すべてのリファレンスにはそれに関連する寿命がありますが、コンパイラでは一般的なケースでそれらを省略することができます（つまり、 <a href=#3lifetime-elision>「ライフタイム・エリート」</a>は省略します）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Before we get to that, though, let&#39;s look at a short example with explicit lifetimes:</span>それに着く前に、明示的な生涯を使った簡単な例を見てみましょう。</span> </p><br> <a class=notranslate href=#1#lifetime-elision>lifetime-elision</a> <br> <div data-lang=rust,ignore><div data-l="fn bar&lt;'a&gt;(...)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We previously talked a little about <a href=#3functions>function syntax</a> , but we didn&#39;t discuss the <code>&lt;&gt;</code> s after a function&#39;s name.</span>以前は<a href=#3functions>関数の構文</a>について少し話をしましたが、関数の名前の後に<code>&lt;&gt;</code>記述しませんでした。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A function can have &#39;generic parameters&#39; between the <code>&lt;&gt;</code> s, of which lifetimes are one kind.</span>関数は、 <code>&lt;&gt;</code> sの間に &#39;generic parameters&#39;を持つことができます。そのうちの生涯は1種類です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll discuss other kinds of generics <a href=#3generics>later in the book</a> , but for now, let&#39;s focus on the lifetimes aspect.</span>この<a href=#3generics>本の後半では、</a>他の種類のジェネリックについて議論しますが、今のところ、生涯の側面に焦点を当てましょう。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1functions.html>functions</a> <a class=notranslate href=#1generics.html>generics</a></span> <a class=notranslate href=#1functions.html>functions</a> <a class=notranslate href=#1generics.html>generics</a></span> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We use <code>&lt;&gt;</code> to declare our lifetimes.</span>私たちは、 <code>&lt;&gt;</code>を使用して私たちの生涯を宣言します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This says that <code>bar</code> has one lifetime, <code>&#39;a</code> .</span>これは、と言っている<code>bar</code> 、1つの寿命を持っています<code>&#39;a</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we had two reference parameters with different lifetimes, it would look like this:</span>ライフタイムの異なる2つの参照パラメータがある場合は、次のようになります。</span> </p><br><br><div data-lang=rust,ignore><div data-l="fn bar&lt;'a, 'b&gt;(...)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then in our parameter list, we use the lifetimes we&#39;ve named:</span>次にパラメータリストでは、命名したライフタイムを使用します。</span> </p><br><div data-lang=rust,ignore><div data-l="...(x: &amp;'a i32)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we wanted a <code>&amp;mut</code> reference, we&#39;d do this:</span> <code>&amp;mut</code>リファレンスが必要な場合は、次のようにします。</span> </p><br><div data-lang=rust,ignore><div data-l="...(x: &amp;'a mut i32)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you compare <code>&amp;mut i32</code> to <code>&amp;&#39;a mut i32</code> , they&#39;re the same, it&#39;s that the lifetime <code>&#39;a</code> has snuck in between the <code>&amp;</code> and the <code>mut i32</code> .</span>あなたが<code>&amp;mut i32</code>と<code>&amp;&#39;a mut i32</code>を比較する<code>&amp;mut i32</code> 、それらは同じです。それは、生涯<code>&#39;a</code> <code>&amp;</code> <code>mut i32</code>間に<code>mut i32</code>です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We read <code>&amp;mut i32</code> as &#39;a mutable reference to an <code>i32</code> &#39; and <code>&amp;&#39;a mut i32</code> as &#39;a mutable reference to an <code>i32</code> with the lifetime <code>&#39;a</code> &#39;.</span>私たちは、読み<code>&amp;mut i32</code> 「への変更可能な参照として<code>i32</code> 」と<code>&amp;&#39;a mut i32</code>への変更可能な参照として」 <code>i32</code>寿命を持ちます<code>&#39;a</code> 』。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In <code>struct</code> s</span> <code>struct</code></span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You&#39;ll also need explicit lifetimes when working with <a class=notranslate href=#3structs><code>struct</code></a> s that contain references:</span>また、参照を含む<a class=notranslate href=#3structs><code>struct</code></a>作業する場合は、明示的な存続期間が必要です。</span> </p><br><div data-lang=rust><div data-l="struct Foo&lt;'a&gt; {"></div><div data-l="    x: &amp;'a i32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#//    let y = &amp;5; // This is the same as `let _y = 5; let y = &amp;_y;`."></div><div data-l="    let y = &amp;5; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is the same as <code>let _y = 5; let y = &amp;_y;</code></span>これは<code>let _y = 5; let y = &amp;_y;</code>と同じ<code>let _y = 5; let y = &amp;_y;</code></span> <code>let _y = 5; let y = &amp;_y;</code> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">.</span> 。</span> </div><div data-l="    let f = Foo { x: y };"></div><div data-l=""></div><div data-l="    println!(&quot;{}&quot;, f.x);"></div><div data-l=}></div></div><br> <a class=notranslate href=#1structs.html>structs</a> <br> <p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As you can see, <code>struct</code> s can also have lifetimes.</span>ご覧のように、 <code>struct</code>は寿命も持つことができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In a similar way to functions,</span>関数と同様に、</span> </p><br><div data-lang=rust><div data-l="struct Foo&lt;'a&gt; {"></div><div data-l="# x: &amp;'a i32,"></div><div data-l="# }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">declares a lifetime, and</span>生涯を宣言し、</span> </p><br><div data-lang=rust><div data-l="# struct Foo&lt;'a&gt; {"></div><div data-l="x: &amp;'a i32,"></div><div data-l="# }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">uses it.</span>それを使用します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">So why do we need a lifetime here?</span>ではなぜここに生涯が必要なのでしょうか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We need to ensure that any reference to a <code>Foo</code> cannot outlive the reference to an <code>i32</code> it contains.</span> <code>Foo</code>への参照が含まれている<code>i32</code>への参照を失効させることができないようにする必要があります。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>impl</code> blocks</span> <code>impl</code>ブロック</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s implement a method on <code>Foo</code> :</span> <code>Foo</code>メソッドを実装しましょう：</span> </p><br><div data-lang=rust><div data-l="struct Foo&lt;'a&gt; {"></div><div data-l="    x: &amp;'a i32,"></div><div data-l=}></div><div data-l=""></div><div data-l="impl&lt;'a&gt; Foo&lt;'a&gt; {"></div><div data-l="    fn x(&amp;self) -&gt; &amp;'a i32 { self.x }"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#//    let y = &amp;5; // This is the same as `let _y = 5; let y = &amp;_y;`."></div><div data-l="    let y = &amp;5; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is the same as <code>let _y = 5; let y = &amp;_y;</code></span>これは<code>let _y = 5; let y = &amp;_y;</code>と同じ<code>let _y = 5; let y = &amp;_y;</code></span> <code>let _y = 5; let y = &amp;_y;</code> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">.</span> 。</span> </div><div data-l="    let f = Foo { x: y };"></div><div data-l=""></div><div data-l="    println!(&quot;x is: {}&quot;, f.x());"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As you can see, we need to declare a lifetime for <code>Foo</code> in the <code>impl</code> line.</span>ご覧のように、 <code>impl</code>ラインで<code>Foo</code>生存期間を宣言する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We repeat <code>&#39;a</code> twice, like on functions: <code>impl&lt;&#39;a&gt;</code> defines a lifetime <code>&#39;a</code> , and <code>Foo&lt;&#39;a&gt;</code> uses it.</span>私たちは繰り返し<code>&#39;a</code> ：機能上のように、二回<code>impl&lt;&#39;a&gt;</code>生涯定義<code>&#39;a</code>および<code>Foo&lt;&#39;a&gt;</code>それを使用しています。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Multiple lifetimes</span>複数の生涯</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you have multiple references, you can use the same lifetime multiple times:</span>複数の参照がある場合は、同じ生涯を複数回使用できます。</span> </p><br><div data-lang=rust><div data-l="fn x_or_y&lt;'a&gt;(x: &amp;'a str, y: &amp;'a str) -&gt; &amp;'a str {"></div><div data-l="#    x"></div><div data-l="# }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This says that <code>x</code> and <code>y</code> both are alive for the same scope, and that the return value is also alive for that scope.</span>これは、 <code>x</code>と<code>y</code>両方が同じスコープに対して生存しており、戻り値もそのスコープに対して有効であることを示しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you wanted <code>x</code> and <code>y</code> to have different lifetimes, you can use multiple lifetime parameters:</span> <code>x</code>と<code>y</code>ライフタイムが異なるようにするには、複数のライフタイムパラメータを使用できます。</span> </p><br><div data-lang=rust><div data-l="fn x_or_y&lt;'a, 'b&gt;(x: &amp;'a str, y: &amp;'b str) -&gt; &amp;'a str {"></div><div data-l="#    x"></div><div data-l="# }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In this example, <code>x</code> and <code>y</code> have different valid scopes, but the return value has the same lifetime as <code>x</code> .</span>この例では、 <code>x</code>と<code>y</code>有効スコープは異なりますが、戻り値の有効期間は<code>x</code>と同じです。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Thinking in scopes</span>スコープで考える</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A way to think about lifetimes is to visualize the scope that a reference is valid for.</span>生涯について考える方法は、参照が有効である範囲を視覚化することです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example:</span>例えば：</span> </p><br><div data-lang=rust><div data-l="fn main() {"></div><div data-l="#//    let y = &amp;5;     // -+ `y` comes into scope."></div><div data-l="#                    //  |"></div><div data-l="    let y = &amp;5;     // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>y</code> comes into scope.</span> -  + <code>y</code>がスコープに入ります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#    // Stuff...     //  |"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Stuff... // |</span>スタッフ... // |</span> </div><div data-l="#                    //  |"></div><div data-l="                    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//}                   // -+ `y` goes out of scope."></div><div data-l="}                   // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>y</code> goes out of scope.</span> -  + <code>y</code>は範囲外になります。</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Adding in our <code>Foo</code> :</span>私たちの<code>Foo</code>追加する：</span> </p><br><div data-lang=rust><div data-l="struct Foo&lt;'a&gt; {"></div><div data-l="    x: &amp;'a i32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#//    let y = &amp;5;           // -+ `y` comes into scope."></div><div data-l="    let y = &amp;5;           // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>y</code> comes into scope.</span> -  + <code>y</code>がスコープに入ります。</span> </div><div data-l="#//    let f = Foo { x: y }; // -+ `f` comes into scope."></div><div data-l="#                          //  |"></div><div data-l="    let f = Foo { x: y }; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>f</code> comes into scope.</span> -  + <code>f</code>がスコープに入ります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#    // Stuff...           //  |"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Stuff... // |</span>スタッフ... // |</span> </div><div data-l="#                          //  |"></div><div data-l="                          // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//}                         // -+ `f` and `y` go out of scope."></div><div data-l="}                         // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>f</code> and <code>y</code> go out of scope.</span> -  + <code>f</code>と<code>y</code>は範囲外になります。</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Our <code>f</code> lives within the scope of <code>y</code> , so everything works.</span>私たちの<code>f</code>は<code>y</code>の範囲内に住んでいるので、すべてが動作します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">What if it didn&#39;t?</span>もしそうでなければ？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This code won&#39;t work:</span>このコードは機能しません：</span> </p><br><div data-lang=rust,ignore><div data-l="struct Foo&lt;'a&gt; {"></div><div data-l="    x: &amp;'a i32,"></div><div data-l=}></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#//    let x;                    // -+ `x` comes into scope."></div><div data-l="#                              //  |"></div><div data-l="    let x;                    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>x</code> comes into scope.</span> -  + <code>x</code>がスコープに入ります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//    {                         //  |"></div><div data-l="    {                         // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//        let y = &amp;5;           // ---+ `y` comes into scope."></div><div data-l="        let y = &amp;5;           // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">---+ <code>y</code> comes into scope.</span> --- + <code>y</code>がスコープに入ります。</span> </div><div data-l="#//        let f = Foo { x: y }; // ---+ `f` comes into scope."></div><div data-l="        let f = Foo { x: y }; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">---+ <code>f</code> comes into scope.</span> --- + <code>f</code>がスコープに入ります。</span> </div><div data-l="#//        x = &amp;f.x;             //  | | This causes an error."></div><div data-l="        x = &amp;f.x;             // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This causes an error.</span>これにより、エラーが発生します。</span> </div><div data-l="#//    }                         // ---+ `f` and y go out of scope."></div><div data-l="#                              //  |"></div><div data-l="    }                         // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">---+ <code>f</code> and y go out of scope.</span> --- + <code>f</code>とyは範囲外になります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//    println!(&quot;{}&quot;, x);        //  |"></div><div data-l="    println!(&quot;{}&quot;, x);        // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">|</span> |</span> </div><div data-l="#//}                             // -+ `x` goes out of scope."></div><div data-l="}                             // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-+ <code>x</code> goes out of scope.</span> -  + <code>x</code>は範囲外になります。</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Whew!</span>すごい！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As you can see here, the scopes of <code>f</code> and <code>y</code> are smaller than the scope of <code>x</code> .</span>ここからわかるように、 <code>f</code>と<code>y</code>のスコープは<code>x</code>のスコープよりも小さくなっています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But when we do <code>x = &amp;f.x</code> , we make <code>x</code> a reference to something that&#39;s about to go out of scope.</span>しかし、 <code>x = &amp;f.x</code>を実行すると、 <code>x</code>は範囲外に出てくるものへの参照になります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Named lifetimes are a way of giving these scopes a name.</span>名前付きのライフタイムは、これらのスコープに名前を付ける方法です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Giving something a name is the first step towards being able to talk about it.</span>何かに名前を付けることは、それについて話すことができるようになるための第一歩です。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">&#39;static</span> &#39;静的</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The lifetime named &#39;static&#39; is a special lifetime.</span> &#39;static&#39;という名前の生涯は特別な生涯です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It signals that something has the lifetime of the entire program.</span>それは何かがプログラム全体の生存期間を持つことを伝えます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Most Rust programmers first come across <code>&#39;static</code> when dealing with strings:</span>ほとんどのRustプログラマーは、文字列を扱うときに最初に<code>&#39;static</code>に出くわします：</span> </p><br><div data-lang=rust><div data-l="let x: &amp;'static str = &quot;Hello, world.&quot;;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">String literals have the type <code>&amp;&#39;static str</code> because the reference is always alive: they are baked into the data segment of the final binary.</span>参照が常に生きているので、文字列リテラルの型は<code>&amp;&#39;static str</code>です。それらは最終バイナリのデータセグメントに焼き付けられます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Another example are globals:</span>もう1つの例はグローバルです。</span> </p><br><div data-lang=rust><div data-l="static FOO: i32 = 5;"></div><div data-l="let x: &amp;'static i32 = &amp;FOO;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This adds an <code>i32</code> to the data segment of the binary, and <code>x</code> is a reference to it.</span>これは、バイナリのデータセグメントに<code>i32</code>を追加し、 <code>x</code>はそのバイナリの参照です。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lifetime Elision</span>ライフタイムエリート</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust supports powerful local type inference in the bodies of functions, but it deliberately does not perform any reasoning about types for item signatures.</span> Rustは、関数の本体で強力なローカル型推論をサポートしますが、意図的に項目シグネチャの型についての推論を実行しません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, for ergonomic reasons, a very restricted secondary inference algorithm called “lifetime elision” does apply when judging lifetimes.</span>しかし人間工学的な理由から、生涯を判断する際には、「ライフタイムエリージョン」と呼ばれる非常に制限された二次推論アルゴリズムが適用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Lifetime elision is concerned solely with inferring lifetime parameters using three easily memorizable and unambiguous rules.</span>ライフタイムエリージョンは、単に簡単に記憶でき、明白な3つのルールを使用して寿命パラメータを推定することにのみ関係する。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This means lifetime elision acts as a shorthand for writing an item signature, while not hiding away the actual types involved as full local inference would if applied to it.</span>これは、生涯エリジョンが、アイテムの署名を書き込むための略語として機能し、実際のタイプが完全なローカル推論として適用される場合は隠さないことを意味します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When talking about lifetime elision, we use the terms <i>input lifetime</i> and <i>output lifetime</i> .</span>ライフタイムエリージョンについて言えば、 <i>入力寿命</i>と<i>出力寿命</i>という用語を使用し<i>ます</i> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">An <i>input lifetime</i> is a lifetime associated with a parameter of a function, and an <i>output lifetime</i> is a lifetime associated with the return value of a function.</span> <i>入力寿命</i>は、関数のパラメータに関連付けられた有効期間であり、 <i>出力有効期間</i>は、関数の戻り値に関連付けられた有効期間です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, this function has an input lifetime:</span>たとえば、この関数の入力有効期間は次のとおりです。</span> </p><br><div data-lang=rust,ignore><div data-l="fn foo&lt;'a&gt;(bar: &amp;'a str)"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This one has an output lifetime:</span>これは出力寿命を持っています：</span> </p><br><div data-lang=rust,ignore><div data-l="fn foo&lt;'a&gt;() -&gt; &amp;'a str"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This one has a lifetime in both positions:</span>これは、両方の位置で生涯を持っています：</span> </p><br><div data-lang=rust,ignore><div data-l="fn foo&lt;'a&gt;(bar: &amp;'a str) -&gt; &amp;'a str"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here are the three rules:</span>ここに3つのルールがあります：</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each elided lifetime in a function&#39;s arguments becomes a distinct lifetime parameter.</span>関数の引数の中で失われた各寿命は、別個の寿命パラメータになります。</span> </div><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If there is exactly one input lifetime, elided or not, that lifetime is assigned to all elided lifetimes in the return values of that function.</span>厳密に1つの入力ライフタイムが存在する場合、そのライフタイムは、その関数の戻り値のすべての寿命が省略されたものに割り当てられます。</span> </div><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If there are multiple input lifetimes, but one of them is <code>&amp;self</code> or <code>&amp;mut self</code> , the lifetime of <code>self</code> is assigned to all elided output lifetimes.</span>そこに複数の入力寿命がありますが、それらのいずれかである場合<code>&amp;self</code>または<code>&amp;mut self</code>の寿命<code>self</code>すべて省略さ出力寿命に割り当てられています。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Otherwise, it is an error to elide an output lifetime.</span>それ以外の場合は、出力ライフタイムを削除するのはエラーです。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Examples</span>例</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here are some examples of functions with elided lifetimes.</span>生存期間がない関数のいくつかの例を次に示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ve paired each example of an elided lifetime with its expanded form.</span>私たちは、失われた生涯のそれぞれの例をその拡張された形と組み合わせました。</span> </p><br><div data-lang=rust,ignore><div data-l="#//fn print(s: &amp;str); // elided"></div><div data-l="fn print(s: &amp;str); // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn print&lt;'a&gt;(s: &amp;'a str); // expanded"></div><div data-l="fn print&lt;'a&gt;(s: &amp;'a str); // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div><div data-l=""></div><div data-l="#//fn debug(lvl: u32, s: &amp;str); // elided"></div><div data-l="fn debug(lvl: u32, s: &amp;str); // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn debug&lt;'a&gt;(lvl: u32, s: &amp;'a str); // expanded"></div><div data-l="fn debug&lt;'a&gt;(lvl: u32, s: &amp;'a str); // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the preceding example, <code>lvl</code> doesn&#39;t need a lifetime because it&#39;s not a reference ( <code>&amp;</code> ).</span>上記の例では、 <code>lvl</code>は参照（ <code>&amp;</code> ）ではないため、ライフタイムは必要ありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Only things relating to references (such as a <code>struct</code> which contains a reference) need lifetimes.</span>参照に関連するもの（参照を含む<code>struct</code>など）のみが寿命を必要とします。</span> </p><br><div data-lang=rust,ignore><div data-l="#//fn substr(s: &amp;str, until: u32) -&gt; &amp;str; // elided"></div><div data-l="fn substr(s: &amp;str, until: u32) -&gt; &amp;str; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn substr&lt;'a&gt;(s: &amp;'a str, until: u32) -&gt; &amp;'a str; // expanded"></div><div data-l="fn substr&lt;'a&gt;(s: &amp;'a str, until: u32) -&gt; &amp;'a str; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div><div data-l=""></div><div data-l="#//fn get_str() -&gt; &amp;str; // ILLEGAL, no inputs"></div><div data-l="fn get_str() -&gt; &amp;str; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">ILLEGAL, no inputs</span>不当な、入力がない</span> </div><div data-l=""></div><div data-l="#//fn frob(s: &amp;str, t: &amp;str) -&gt; &amp;str; // ILLEGAL, two inputs"></div><div data-l="fn frob(s: &amp;str, t: &amp;str) -&gt; &amp;str; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">ILLEGAL, two inputs</span>不合理な、2つの入力</span> </div><div data-l="#//fn frob&lt;'a, 'b&gt;(s: &amp;'a str, t: &amp;'b str) -&gt; &amp;str; // Expanded: Output lifetime is ambiguous"></div><div data-l="fn frob&lt;'a, 'b&gt;(s: &amp;'a str, t: &amp;'b str) -&gt; &amp;str; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Expanded: Output lifetime is ambiguous</span> Expanded：出力の寿命があいまいです</span> </div><div data-l=""></div><div data-l="#//fn get_mut(&amp;mut self) -&gt; &amp;mut T; // elided"></div><div data-l="fn get_mut(&amp;mut self) -&gt; &amp;mut T; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn get_mut&lt;'a&gt;(&amp;'a mut self) -&gt; &amp;'a mut T; // expanded"></div><div data-l="fn get_mut&lt;'a&gt;(&amp;'a mut self) -&gt; &amp;'a mut T; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div><div data-l=""></div><div data-l="#//fn args&lt;T: ToCStr&gt;(&amp;mut self, args: &amp;[T]) -&gt; &amp;mut Command; // elided"></div><div data-l="fn args&lt;T: ToCStr&gt;(&amp;mut self, args: &amp;[T]) -&gt; &amp;mut Command; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn args&lt;'a, 'b, T: ToCStr&gt;(&amp;'a mut self, args: &amp;'b [T]) -&gt; &amp;'a mut Command; // expanded"></div><div data-l="fn args&lt;'a, 'b, T: ToCStr&gt;(&amp;'a mut self, args: &amp;'b [T]) -&gt; &amp;'a mut Command; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div><div data-l=""></div><div data-l="#//fn new(buf: &amp;mut [u8]) -&gt; BufWriter; // elided"></div><div data-l="fn new(buf: &amp;mut [u8]) -&gt; BufWriter; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">elided</span>逃げた</span> </div><div data-l="#//fn new&lt;'a&gt;(buf: &amp;'a mut [u8]) -&gt; BufWriter&lt;'a&gt;; // expanded"></div><div data-l="fn new&lt;'a&gt;(buf: &amp;'a mut [u8]) -&gt; BufWriter&lt;'a&gt;; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">expanded</span>拡張された</span> </div></div><script>_addload(function(){_setupIW('com');_csi('en','ja','lifetimes.html');});</script>