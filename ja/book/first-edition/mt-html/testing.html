<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180709_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=testing.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Testing</span>テスト</span> </h1><br><blockquote><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Program testing can be a very effective way to show the presence of bugs, but it is hopelessly inadequate for showing their absence.</span>プログラムテストは、バグの存在を示す非常に効果的な方法ですが、不在を示すために絶望的に不十分です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Edsger W. Dijkstra, &quot;The Humble Programmer&quot; (1972)</span> Edsger W. Dijkstra、 &quot;The Humble Programmer&quot;（1972）</span> </p></blockquote><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s talk about how to test Rust code.</span>錆のコードをテストする方法について話しましょう。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">What we will not be talking about is the right way to test Rust code.</span>私たちが話していないことは、錆コードをテストする正しい方法です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There are many schools of thought regarding the right and wrong way to write tests.</span>テストを書くための正しい方法と間違った方法に関する多くの考え方があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">All of these approaches use the same basic tools, and so we&#39;ll show you the syntax for using them.</span>これらのアプローチはすべて同じ基本ツールを使用しているので、それらを使用するための構文を示します。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>test</code> attribute</span> <code>test</code>属性</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">At its simplest, a test in Rust is a function that&#39;s annotated with the <code>test</code> attribute.</span>最も簡単な方法では、Rustでの<code>test</code>は<code>test</code>属性で注釈を付けられた関数です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s make a new project with Cargo called <code>adder</code> :</span> Cargoで<code>adder</code>という新しいプロジェクトを作ってみましょう：</span> </p><br><div data-lang=bash><div data-l="$ cargo new adder"></div><div data-l="$ cd adder"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo will automatically generate a simple test when you make a new project.</span> Cargoは、新しいプロジェクトを作成すると自動的に簡単なテストを生成します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here&#39;s the contents of <code>src/lib.rs</code> :</span> <code>src/lib.rs</code>内容は<code>src/lib.rs</code>です。</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For now, let&#39;s remove the <code>mod</code> bit, and focus on just the function:</span>今のところ、 <code>mod</code>ビットを削除し、関数にのみ焦点を当てましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note the <code>#[test]</code> .</span> <code>#[test]</code>注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This attribute indicates that this is a test function.</span>この属性は、これがテスト関数であることを示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It currently has no body.</span>現在、ボディはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That&#39;s good enough to pass!</span>それは合格するのに十分です！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can run the tests with <code>cargo test</code> :</span> <code>cargo test</code>テストを実行できます：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.15 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo compiled and ran our tests.</span>貨物はコンパイルされ、テストを実行しました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There are two sets of output here: one for the test we wrote, and another for documentation tests.</span>ここには2種類の出力があります.1つはテスト用に、もう1つはドキュメンテーションテスト用です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We&#39;ll talk about those later.</span>後でそれらについて話します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For now, see this line:</span>今のところ、次の行を見てください：</span> </p><br><div data-lang=text><div data-l="test it_works ... ok"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note the <code>it_works</code> .</span> <code>it_works</code>注意して<code>it_works</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This comes from the name of our function:</span>これは私たちの機能の名前から来ています：</span> </p><br><div data-lang=rust><div data-l="# fn main() {"></div><div data-l="fn it_works() {"></div><div data-l=}></div><div data-l="# }"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We also get a summary line:</span>要約の行も表示されます。</span> </p><br><div data-lang=text><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">So why does our do-nothing test pass?</span>では、何もしないテストはなぜ合格するのですか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Any test which doesn&#39;t <code>panic€</code> passes, and any test that does <code>panic€</code> fails.</span> <code>panic€</code>を<code>panic€</code>ないテストや、 <code>panic€</code>テストは失敗します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s make our test fail:</span>私たちのテストを失敗させましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l="    assert!(false);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>assert€</code> is a macro provided by Rust which takes one argument: if the argument is <code>true</code> , nothing happens.</span> <code>assert€</code>は引数Rustが提供するマクロであり、引数が<code>true</code>は何も起こりません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If the argument is <code>false</code> , it will <code>panic€</code> .</span>引数が<code>false</code>場合、それは<code>panic€</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s run our tests again:</span>テストをもう一度やり直しましょう：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.17 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... FAILED"></div><div data-l=""></div><div data-l=failures:></div><div data-l=""></div><div data-l="---- it_works stdout ----"></div><div data-l="        thread 'it_works' panicked at 'assertion failed: false', src/lib.rs:5"></div><div data-l="note: Run with `RUST_BACKTRACE=1` for a backtrace."></div><div data-l=""></div><div data-l=""></div><div data-l=failures:></div><div data-l="    it_works"></div><div data-l=""></div><div data-l="test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="error: test failed"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust indicates that our test failed:</span>錆はテストが失敗したことを示します：</span> </p><br><div data-lang=text><div data-l="test it_works ... FAILED"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">And that&#39;s reflected in the summary line:</span>それは要約の行に反映されています：</span> </p><br><div data-lang=text><div data-l="test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We also get a non-zero status code.</span>ゼロ以外のステータスコードも取得します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can use <code>$?</code></span> <code>$?</code>を使うことができます<code>$?</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">on macOS and Linux:</span> macOSとLinuxでは：</span> </p><br><div data-lang=bash><div data-l="$ echo $?"></div><div data-l=101></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">On Windows, if you&#39;re using <code>cmd</code> :</span> Windowsでは、 <code>cmd</code>を使用している場合：</span> </p><br><div data-lang=bash><div data-l="&gt; echo %ERRORLEVEL%"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">And if you&#39;re using PowerShell:</span> PowerShellを使用している場合：</span> </p><br><div data-lang=bash><div data-l="&gt; echo $LASTEXITCODE # the code itself"></div><div data-l="&gt; echo $? # a boolean, fail or succeed"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is useful if you want to integrate <code>cargo test</code> into other tooling.</span>これは、 <code>cargo test</code>を他のツーリングに統合する場合に便利です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can invert our test&#39;s failure with another attribute: <code>should_panic</code> :</span>テストの失敗を別の属性で<code>should_panic</code>ことができます： <code>should_panic</code> ：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[test]></div><div data-l=#[should_panic]></div><div data-l="fn it_works() {"></div><div data-l="    assert!(false);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This test will now succeed if we <code>panic€</code> and fail if we complete.</span>このテストは、私たちが<code>panic€</code>た場合に成功し、完了したら失敗します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s try it:</span>試してみよう：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.17 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust provides another macro, <code>assert_eq€</code> , that compares two arguments for equality:</span> Rustは、 <code>assert_eq€</code>別のマクロを提供しています。これは、2つの引数が等しいか<code>assert_eq€</code>かを比較します。</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[test]></div><div data-l=#[should_panic]></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(&quot;Hello&quot;, &quot;world&quot;);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Does this test pass or fail?</span>このテストは合格か失敗か</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because of the <code>should_panic</code> attribute, it passes:</span> <code>should_panic</code>属性のため、次のように<code>should_panic</code>ます。</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.21 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>should_panic</code> tests can be fragile, as it&#39;s hard to guarantee that the test didn&#39;t fail for an unexpected reason.</span>予期しない理由でテストが失敗しなかったことを保証するのが難しいため、 <code>should_panic</code>テストは壊れやすい可能性があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To help with this, an optional <code>expected</code> parameter can be added to the <code>should_panic</code> attribute.</span>これを助けるために、オプションの<code>expected</code>パラメータを<code>should_panic</code>属性に追加することができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The test harness will make sure that the failure message contains the provided text.</span>テストハーネスは、失敗メッセージに指定されたテキストが含まれていることを確認します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A safer version of the example above would be:</span>上記の例のより安全なバージョンは、次のようになります。</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l=#[test]></div><div data-l="#[should_panic(expected = &quot;assertion failed&quot;)]"></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(&quot;Hello&quot;, &quot;world&quot;);"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That&#39;s all there is to the basics!</span>それが基本です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s write one &#39;real&#39; test:</span> 「本当の」テストを書きましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(4, add_two(2));"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is a very common use of <code>assert_eq€</code> : call some function with some known arguments and compare it to the expected output.</span>これは<code>assert_eq€</code>非常に一般的な使用<code>assert_eq€</code> 。いくつかの既知の引数で関数を呼び出し、それを期待される出力と比較します。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>ignore</code> attribute</span> <code>ignore</code>属性</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Sometimes a few specific tests can be very time-consuming to execute.</span>場合によっては、いくつかの特定のテストが実行に非常に時間がかかることがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These can be disabled by default by using the <code>ignore</code> attribute:</span> <code>ignore</code>属性を使用すると、デフォルトで無効にすることが<code>ignore</code>ます。</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(4, add_two(2));"></div><div data-l=}></div><div data-l=""></div><div data-l=#[test]></div><div data-l=#[ignore]></div><div data-l="fn expensive_test() {"></div><div data-l="#    // Code that takes an hour to run..."></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Code that takes an hour to run...</span>実行に1時間かかるコード...</span> </div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we run our tests and see that <code>it_works</code> is run, but <code>expensive_test</code> is not:</span>今、私たちは私たちのテストを実行していることがわかり<code>it_works</code>実行されますが、 <code>expensive_test</code>ありません：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.20 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 2 tests"></div><div data-l="test expensive_test ... ignored"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 1 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The expensive tests can be run explicitly using <code>cargo test -- --ignored</code> :</span>高価なテストは、 <code>cargo test -- --ignored</code>を使用して明示的に実行できます<code>cargo test -- --ignored</code> ：</span> </p><br><div data-lang=bash><div data-l="$ cargo test -- --ignored"></div><div data-l="    Finished debug [unoptimized + debuginfo] target(s) in 0.0 secs"></div><div data-l="     Running target/debug/deps/adder-941f01916ca4a642"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test expensive_test ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>--ignored</code> argument is an argument to the test binary, and not to Cargo, which is why the command is <code>cargo test -- --ignored</code> .</span> <code>--ignored</code>引数は、テストバイナリの引数であり、 <code>--ignored</code>引数ではありません。そのため、コマンドは<code>cargo test -- --ignored</code>です。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>tests</code> module</span> <code>tests</code>モジュール</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is one way in which our existing example is not idiomatic: it&#39;s missing the <code>tests</code> module.</span>既存の例がイディオムではない1つの方法があります： <code>tests</code>モジュールがありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You might have noticed this test module was present in the code that was initially generated with <code>cargo new</code> but was missing from our last example.</span>このテストモジュールが最初に<code>cargo new</code>生成されたコードに存在していたが、最後の例では見つからなかったことに気が付いたかもしれません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s explain what this does.</span>これが何をしているのか説明しよう。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The idiomatic way of writing our example looks like this:</span>私たちの例を書いている慣用的なやり方は次のようになります：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::add_two;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="        assert_eq!(4, add_two(2));"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There&#39;s a few changes here.</span>ここにはいくつかの変更があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The first is the introduction of a <code>mod tests</code> with a <code>cfg</code> attribute.</span> 1つは、 <code>cfg</code>属性を持つ<code>mod tests</code>導入です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The module allows us to group all of our tests together, and to also define helper functions if needed, that don&#39;t become a part of the rest of our crate.</span>このモジュールを使用すると、すべてのテストをグループ化し、必要に応じてヘルパー関数を定義することができます。これらはヘルパーの残りの部分にはなりません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>cfg</code> attribute only compiles our test code if we&#39;re currently trying to run the tests.</span> <code>cfg</code>属性は、現在テストを実行しようとしている場合にのみテストコードをコンパイルします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This can save compile time, and also ensures that our tests are entirely left out of a normal build.</span>これにより、コンパイル時間を節約することができ、また、テストが完全に通常のビルドから外れることも保証されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The second change is the <code>use</code> declaration.</span> 2番目の変更は<code>use</code>宣言です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because we&#39;re in an inner module, we need to bring the tested function into scope.</span>私たちは内部のモジュールであるため、テストされた関数をスコープに入れる必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This can be annoying if you have a large module, and so this is a common use of globs.</span>これは大規模なモジュールがある場合には迷惑になることがあるので、これはglobの一般的な使用です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s change our <code>src/lib.rs</code> to make use of it:</span> <code>src/lib.rs</code>を変更してみましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::*;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="        assert_eq!(4, add_two(2));"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note the different <code>use</code> line.</span>異なる<code>use</code>行に注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we run our tests:</span>今度はテストを実行します：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="    Updating registry `https://github.com/rust-lang/crates.io-index`"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="     Running target/debug/deps/adder-91b3e234d4ed382a"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It works!</span>できます！</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The current convention is to use the <code>tests</code> module to hold your &quot;unit-style&quot; tests.</span>現在のコンベンションでは、 <code>tests</code>モジュールを使用して &quot;ユニットスタイル&quot;のテストを保持します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Anything that tests one small bit of functionality makes sense to go here.</span> 1つの小さな機能をテストするものはここに行くのが理にかなっています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But what about &quot;integration-style&quot; tests instead?</span>しかし、代わりに &quot;統合スタイル&quot;テストはどうでしょうか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For that, we have the <code>tests</code> directory.</span>そのために、 <code>tests</code>ディレクトリがあります。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>tests</code> directory</span> <code>tests</code>ディレクトリ</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each file in <code>tests/*.rs</code> directory is treated as an individual crate.</span> <code>tests/*.rs</code>ディレクトリ内の各ファイルは個別のクレートとして扱われます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To write an integration test, let&#39;s make a <code>tests</code> directory and put a <code>tests/integration_test.rs</code> file inside with this as its contents:</span>統合テストを書くには、 <code>tests</code>ディレクトリを作り、その内容として<code>tests/integration_test.rs</code>ファイルを内部に入れてみましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="#//# // Sadly, this code will not work in play.rust-lang.org, because we have no"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Sadly, this code will not work in play.rust-lang.org, because we have no</span>残念ながら、このコードはplay.rust-lang.orgでは動作しません。</span> </div><div data-l="#//# // crate adder to import. You'll need to try this part on your own machine."></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">crate adder to import.</span>インポートするクレート加算器。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You&#39;ll need to try this part on your own machine.</span>あなた自身のマシンでこの部分を試す必要があります。</span> </div><div data-l="extern crate adder;"></div><div data-l=""></div><div data-l=#[test]></div><div data-l="fn it_works() {"></div><div data-l="    assert_eq!(4, adder::add_two(2));"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This looks similar to our previous tests, but slightly different.</span>これは以前のテストと似ていますが、少し異なります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We now have an <code>extern crate adder</code> at the top.</span>私たちは今、 <code>extern crate adder</code>上部を頂点にします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is because each test in the <code>tests</code> directory is an entirely separate crate, and so we need to import our library.</span>これは、 <code>tests</code>ディレクトリの各テストが完全に別個のクレートであるため、ライブラリをインポートする必要があるためです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is also why <code>tests</code> is a suitable place to write integration-style tests: they use the library like any other consumer of it would.</span>これは、 <code>tests</code>が統合スタイルのテストを書くのに適した場所でもある理由です。彼らは、他の消費者のようにライブラリを使用します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s run them:</span>それらを実行しましょう：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0 (file:///home/you/projects/adder)"></div><div data-l="     Running target/debug/deps/adder-91b3e234d4ed382a"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="     Running target/debug/integration_test-68064b69521c828a"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 0 tests"></div><div data-l=""></div><div data-l="test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we have three sections: our previous test is also run, as well as our new one.</span>今私たちは3つのセクションを持っています：私たちの以前のテストは新しいものと同様に実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Cargo will ignore files in subdirectories of the <code>tests/</code> directory.</span> Cargoは<code>tests/</code>ディレクトリのサブディレクトリにあるファイルを無視します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore shared modules in integrations tests are possible.</span>したがって、統合テストの共有モジュールが可能です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example <code>tests/common/mod.rs</code> is not separately compiled by cargo but can be imported in every test with <code>mod common;</code></span>たとえば、 <code>tests/common/mod.rs</code>は、貨物で別々にコンパイルされませんが、 <code>mod common;</code>してすべてのテストでインポートできます<code>mod common;</code></span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">That&#39;s all there is to the <code>tests</code> directory.</span> <code>tests</code>ディレクトリにはこれだけです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>tests</code> module isn&#39;t needed here, since the whole thing is focused on tests.</span> <code>tests</code>モジュールはここでは必要ありません。なぜならすべてがテストに焦点を当てているからです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note, when building integration tests, cargo will not pass the <code>test</code> attribute to the compiler.</span>統合テストを構築するとき、貨物は<code>test</code>属性をコンパイラに渡しません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It means that all parts in <code>cfg(test)</code> won&#39;t be included in the build used in your integration tests.</span>つまり、 <code>cfg(test)</code>すべての部分は、統合テストで使用されるビルドに含まれません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s finally check out that third section: documentation tests.</span>最後に、第3のセクション：ドキュメンテーションテストを見てみましょう。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Documentation tests</span>ドキュメンテーションテスト</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Nothing is better than documentation with examples.</span>例を持つ文書より優れているものはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Nothing is worse than examples that don&#39;t actually work, because the code has changed since the documentation has been written.</span>ドキュメンテーションが書かれて以来、コードが変更されたため、実際には動作しない例よりも悪いものはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To this end, Rust supports automatically running examples in your documentation ( <b>note:</b> this only works in library crates, not binary crates).</span>このため、Rustはドキュメントで自動的に実行されるサンプルをサポートしています（ <b>注：</b>これはバイナリボックスではなく、ライブラリボックスでのみ機能します）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here&#39;s a fleshed-out <code>src/lib.rs</code> with examples:</span>ここに例を<code>src/lib.rs</code>ている<code>src/lib.rs</code>があります。</span> </p><br><div data-lang=rust,ignore><div data-l="#//# // The next line exists to trick play.rust-lang.org into running our code as a"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The next line exists to trick play.rust-lang.org into running our code as a</span>次の行は、play.rust-lang.orgに私たちのコードを</span> </div><div data-l="#//# // test:"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">test:</span>テスト：</span> </div><div data-l="#//# // fn main"></div><div data-l="# // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">fn main</span> fnメイン</span> </div><div data-l=#></div><div data-l="//! The `adder` crate provides functions that add numbers to other numbers."></div><div data-l=//!></div><div data-l="//! # Examples"></div><div data-l=//!></div><div data-l="//! ```"></div><div data-l="//! assert_eq!(4, adder::add_two(2));"></div><div data-l="//! ```"></div><div data-l=""></div><div data-l="#///// This function adds two to its argument."></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This function adds two to its argument.</span>この関数は引数に2を加えます。</span> </div><div data-l=///></div><div data-l="#///// # Examples"></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"># Examples</span> ＃例</span> </div><div data-l=///></div><div data-l="#///// ```"></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">```</span> `` ``</span> </div><div data-l="#///// use adder::add_two;"></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">use adder::add_two;</span> addder :: add_twoを使用します。</span> </div><div data-l=///></div><div data-l="#///// assert_eq!(4, add_two(2));"></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">assert_eq!(4, add_two(2));</span> assert_eq！（4、add_two（2））;</span> </div><div data-l="#///// ```"></div><div data-l="/// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">```</span> `` ``</span> </div><div data-l="pub fn add_two(a: i32) -&gt; i32 {"></div><div data-l="    a + 2"></div><div data-l=}></div><div data-l=""></div><div data-l=#[cfg(test)]></div><div data-l="mod tests {"></div><div data-l="    use super::*;"></div><div data-l=""></div><div data-l="    #[test]"></div><div data-l="    fn it_works() {"></div><div data-l="        assert_eq!(4, add_two(2));"></div><div data-l="    }"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note the module-level documentation with <code>//€</code> and the function-level documentation with <code>///</code> .</span>モジュールレベルのドキュメントには<code>//€</code>を使用し、関数レベルのドキュメントには<code>///</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust&#39;s documentation supports Markdown in comments, and so triple graves mark code blocks.</span> RustのドキュメンテーションはコメントのMarkdownをサポートしているので、3重墓はコードブロックをマークします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It is conventional to include the <code># Examples</code> section, exactly like that, with examples following.</span>通常は、 <code># Examples</code>セクションを正確にそのように含め、その後に例を示します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Let&#39;s run the tests again:</span>テストをもう一度やり直してみましょう：</span> </p><br><div data-lang=bash><div data-l="$ cargo test"></div><div data-l="   Compiling adder v0.1.0. (file:///home/you/projects/adder)"></div><div data-l="     Running target/debug/deps/adder-91b3e234d4ed382a"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test tests::it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="     Running target/debug/integration_test-68064b69521c828a"></div><div data-l=""></div><div data-l="running 1 test"></div><div data-l="test it_works ... ok"></div><div data-l=""></div><div data-l="test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured"></div><div data-l=""></div><div data-l="   Doc-tests adder"></div><div data-l=""></div><div data-l="running 2 tests"></div><div data-l="test add_two_0 ... ok"></div><div data-l="test _0 ... ok"></div><div data-l=""></div><div data-l="test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Now we have all three kinds of tests running!</span>今、3種類のテストを実行しています！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note the names of the documentation tests: the <code>_0</code> is generated for the module test, and <code>add_two_0</code> for the function test.</span>ドキュメンテーション・テストの名前に注意してください。モジュール・テストでは<code>_0</code> 、ファンクション・テストでは<code>add_two_0</code>が生成されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These will auto increment with names like <code>add_two_1</code> as you add more examples.</span>これらは、例を追加すると、 <code>add_two_1</code>などの名前で自動的に増分されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We haven&#39;t covered all of the details with writing documentation tests.</span>私たちは、すべての詳細をドキュメントテストを書くことでカバーしていません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For more, please see the <a href=#2documentation.html>Documentation chapter</a> .</span>詳細については、 <a href=#2documentation.html>ドキュメントの章</a>を参照してください。</span> </p><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Testing and concurrency</span>テストと並行性</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It is important to note that tests are run concurrently using threads.</span>テストはスレッドを使用して同時に実行されることに注意することが重要です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For this reason, care should be taken to ensure your tests do not depend on each-other, or on any shared state.</span>このため、テストがお互いや共有状態に依存しないように注意する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">&quot;Shared state&quot; can also include the environment, such as the current working directory, or environment variables.</span> 「共有状態」には、現在の作業ディレクトリや環境変数などの環境も含めることができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If this is an issue it is possible to control this concurrency, either by setting the environment variable <code>RUST_TEST_THREADS</code> , or by passing the argument <code>--test-threads</code> to the tests:</span>これが問題の場合は、環境変数<code>RUST_TEST_THREADS</code>設定するか、テストに<code>--test-threads</code>引数を渡して、この並行性を制御できます。</span> </p><br><div data-lang=bash><div data-l="$ RUST_TEST_THREADS=1 cargo test   # Run tests with no concurrency"></div><div data-l=...></div><div data-l="$ cargo test -- --test-threads=1   # Same as above"></div><div data-l=...></div></div><br><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Test output</span>テスト出力</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By default Rust&#39;s test library captures and discards output to standard out/error, eg output from <code>println€()</code> .</span>デフォルトでは、Rustのテストライブラリは出力をキャプチャし、標準出力/エラー（例えば<code>println€()</code>からの出力）に破棄します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This too can be controlled using the environment or a switch:</span>これは、環境またはスイッチを使用して制御することもできます。</span> </p><br><br><div data-lang=bash><div data-l="$ RUST_TEST_NOCAPTURE=1 cargo test   # Preserve stdout/stderr"></div><div data-l=...></div><div data-l="$ cargo test -- --nocapture          # Same as above"></div><div data-l=...></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However a better method avoiding capture is to use logging rather than raw output.</span>しかし、キャプチャを避けるより良い方法は、生の出力ではなくロギングを使用することです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Rust has a <a href=#3log>standard logging API</a> , which provides a frontend to multiple logging implementations.</span> Rustには<a href=#3log>標準のロギングAPIがあり</a> 、複数のロギング実装にフロントエンドを提供します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This can be used in conjunction with the default <a class=notranslate href=#4env_logger>env_logger</a> to output any debugging information in a manner that can be controlled at runtime.</span>これは、実行時に制御できる方法でデバッグ情報を出力するために、デフォルトの<a class=notranslate href=#4env_logger>env_logger</a>と組み合わせて使用​​できます。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://crates.io/crates/log>log</a> <a class=notranslate href=#1https://crates.io/crates/env_logger>env_logger</a></span> <a class=notranslate href=#1https://crates.io/crates/log>log</a> <a class=notranslate href=#1https://crates.io/crates/env_logger>env_logger</a></span><script>_addload(function(){_setupIW('com');_csi('en','ja','testing.html');});</script>