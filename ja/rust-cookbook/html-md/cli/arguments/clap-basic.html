<!DOCTYPE html>
<h2>Parse command line arguments</h2>
<br>
<p><a href="#3clap">!<a class="notranslate" href="#4clap-badge">clap-badge</a></a> <a href="#3cat-command-line">!<a class="notranslate" href="#4cat-command-line-badge">cat-command-line-badge</a></a></p>
<br>
<p>This application describes the structure of its command-line interface using
<code>clap</code>'s builder style. The <a class="notranslate" href="#4documentation">documentation</a> gives two other possible ways to
instantiate an application.</p>
<br>
<p>In the builder style, <code>with_name</code> is the unique identifier that <code>value_of</code> will
use to retrieve the value passed. The <code>short</code> and <code>long</code> options control the
flag the user will be expected to type; short flags look like <code>-f</code> and long
flags look like <code>--file</code>.</p>
<br>
<div data-lang="rust"><div data-l="extern crate clap;"></div><div data-l=""></div><div data-l="use clap::{Arg, App};"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let matches = App::new(&quot;My Test Program&quot;)"></div><div data-l="        .version(&quot;0.1.0&quot;)"></div><div data-l="        .author(&quot;Hackerman Jones &lt;hckrmnjones@hack.gov&gt;&quot;)"></div><div data-l="        .about(&quot;Teaches argument parsing&quot;)"></div><div data-l="        .arg(Arg::with_name(&quot;file&quot;)"></div><div data-l="                 .short(&quot;f&quot;)"></div><div data-l="                 .long(&quot;file&quot;)"></div><div data-l="                 .takes_value(true)"></div><div data-l="                 .help(&quot;A cool file&quot;))"></div><div data-l="        .arg(Arg::with_name(&quot;num&quot;)"></div><div data-l="                 .short(&quot;n&quot;)"></div><div data-l="                 .long(&quot;number&quot;)"></div><div data-l="                 .takes_value(true)"></div><div data-l="                 .help(&quot;Five less than your favorite number&quot;))"></div><div data-l="        .get_matches();"></div><div data-l=""></div><div data-l="    let myfile = matches.value_of(&quot;file&quot;).unwrap_or(&quot;input.txt&quot;);"></div><div data-l="    println!(&quot;The file passed is: {}&quot;, myfile);"></div><div data-l=""></div><div data-l="    let num_str = matches.value_of(&quot;num&quot;);"></div><div data-l="    match num_str {"></div><div data-l="        None =&gt; println!(&quot;No idea what your favorite number is.&quot;),"></div><div data-l="        Some(s) =&gt; {"></div><div data-l="            match s.parse::&lt;i32&gt;() {"></div><div data-l="                Ok(n) =&gt; println!(&quot;Your favorite number must be {}.&quot;, n + 5),"></div><div data-l="                Err(_) =&gt; println!(&quot;That's not a number! {}&quot;, s),"></div><div data-l="            }"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l="}"></div></div>
<br>
<p>Usage information is generated by <code>clap</code>. The usage for the example application
looks like this.</p>
<br>
<div data-lang=""><div data-l="My Test Program 0.1.0"></div><div data-l="Hackerman Jones &lt;hckrmnjones@hack.gov&gt;"></div><div data-l="Teaches argument parsing"></div><div data-l=""></div><div data-l="USAGE:"></div><div data-l="    testing [OPTIONS]"></div><div data-l=""></div><div data-l="FLAGS:"></div><div data-l="    -h, --help       Prints help information"></div><div data-l="    -V, --version    Prints version information"></div><div data-l=""></div><div data-l="OPTIONS:"></div><div data-l="    -f, --file &lt;file&gt;     A cool file"></div><div data-l="    -n, --number &lt;num&gt;    Five less than your favorite number"></div></div>
<br>
<p>We can test the application by running a command like the following.</p>
<br>
<div data-lang=""><div data-l="$ cargo run -- -f myfile.txt -n 251"></div></div>
<br>
<p>The output is:</p>
<br>
<div data-lang=""><div data-l="The file passed is: myfile.txt"></div><div data-l="Your favorite number must be 256."></div></div>
<br>
<a class="notranslate" href="#1https://docs.rs/clap/">documentation</a>