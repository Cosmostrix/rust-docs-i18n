<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=macros-by-example.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Macros By Example</span>例によるマクロ</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>macro_rules</code> allows users to define syntax extension in a declarative way.</span> <code>macro_rules</code>は、ユーザーが宣言的な方法で構文拡張を定義できるようにします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We call such extensions &quot;macros by example&quot; or simply &quot;macros&quot;.</span>このような拡張機能を「マクロを例として」または単に「マクロ」と呼びます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Currently, macros can expand to expressions, statements, items, or patterns.</span>現在、マクロは式、文、項目、またはパターンに展開できます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">(A <code>sep_token</code> is any token other than <code>*</code> and <code>+</code> . A <code>non_special_token</code> is any token other than a delimiter or <code>$</code> .)</span> （ <code>sep_token</code>は、 <code>*</code>と<code>+</code>以外のトークンで、 <code>non_special_token</code>はデリミタまたは<code>$</code>以外のトークンです。）</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The macro expander looks up macro invocations by name, and tries each macro rule in turn.</span>マクロエクスパンダはマクロ呼び出しを名前で検索し、各マクロルールを順番に試行します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It transcribes the first successful match.</span>それは最初の成功したマッチを転写する。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Matching and transcription are closely related to each other, and we will describe them together.</span>マッチングと転写はお互いに密接に関連しており、それらを一緒に説明します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The macro expander matches and transcribes every token that does not begin with a <code>$</code> literally, including delimiters.</span>マクロエクスパンダは、区切り文字を含めて、 <code>$</code>始まらないすべてのトークンと一致して転記します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For parsing reasons, delimiters must be balanced, but they are otherwise not special.</span>構文解析の理由から、デリミタはバランスをとる必要がありますが、特殊文字ではありません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the matcher, <code>$</code> <s>name</s> <code>:</code> <s>designator</s> matches the nonterminal in the Rust syntax named by <s>designator</s> .</span>正規表現では、 <code>$</code> <s>name</s> <code>:</code> <s>designator</s>は、 <s>designator</s>によって命名されたRust構文の非終端記号と一致します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Valid designators are:</span>有効な指定子は次のとおりです。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>item</code> : an <a class=notranslate href=#4item>item</a></span> <code>item</code> ： <a class=notranslate href=#4item>item</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>block</code> : a <a class=notranslate href=#4block>block</a></span> <code>block</code> ： <a class=notranslate href=#4block>block</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>stmt</code> : a <a class=notranslate href=#4statement>statement</a></span> <code>stmt</code> ： <a class=notranslate href=#4statement>statement</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>pat</code> : a <a class=notranslate href=#4pattern>pattern</a></span> <code>pat</code> ： <a class=notranslate href=#4pattern>pattern</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>expr</code> : an <a class=notranslate href=#4expression>expression</a></span> <code>expr</code> ： <a class=notranslate href=#4expression>expression</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ty</code> : a <a class=notranslate href=#4type>type</a></span> <code>ty</code> ： <a class=notranslate href=#4type>type</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ident</code> : an <a class=notranslate href=#4identifier>identifier</a> or <a class=notranslate href=#4keyword>keyword</a></span> <code>ident</code> ： <a class=notranslate href=#4identifier>identifier</a>または<a class=notranslate href=#4keyword>keyword</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>path</code> : a <a class=notranslate href=#4path>path</a></span> <code>path</code> ： <a class=notranslate href=#4path>path</a></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>tt</code> : a token tree (a single <a class=notranslate href=#4token>token</a> by matching <code>()</code> , <code>[]</code> , or <code>{}</code> )</span> <code>tt</code> ：トークンツリー（ <code>()</code> 、 <code>[]</code> 、または<code>{}</code>マッチさせた単一の<a class=notranslate href=#4token>token</a> ）</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>meta</code> : the contents of an <a class=notranslate href=#4attribute>attribute</a></span> <code>meta</code> ： <a class=notranslate href=#4attribute>attribute</a>の内容</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>lifetime</code> : a lifetime.</span> <code>lifetime</code> ：生涯。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Examples: <code>&#39;static</code> , <code>&#39;a</code> .</span>例： <code>&#39;static</code> <code>&#39;a</code> 。</span> </div><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1items.html>item</a> <a class=notranslate href=#1expressions/block-expr.html>block</a> <a class=notranslate href=#1statements.html>statement</a> <a class=notranslate href=#1expressions/match-expr.html>pattern</a> <a class=notranslate href=#1expressions.html>expression</a> <a class=notranslate href=#1types.html>type</a> <a class=notranslate href=#1identifiers.html>identifier</a> <a class=notranslate href=#1keywords.html>keyword</a> <a class=notranslate href=#1paths.html>path</a> <a class=notranslate href=#1tokens.html>token</a> <a class=notranslate href=#1attributes.html>attribute</a></span> <a class=notranslate href=#1items.html>item</a> <a class=notranslate href=#1expressions/block-expr.html>block</a> <a class=notranslate href=#1statements.html>statement</a> <a class=notranslate href=#1expressions/match-expr.html>pattern</a> <a class=notranslate href=#1expressions.html>expression</a> <a class=notranslate href=#1types.html>type</a> <a class=notranslate href=#1identifiers.html>identifier</a> <a class=notranslate href=#1keywords.html>keyword</a> <a class=notranslate href=#1paths.html>path</a> <a class=notranslate href=#1tokens.html>token</a> <a class=notranslate href=#1attributes.html>attribute</a></span> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In the transcriber, the designator is already known, and so only the name of a matched nonterminal comes after the dollar sign.</span>転記者では、指定子は既に知られているので、一致した非終端記号の名前だけがドル記号の後に来る。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In both the matcher and transcriber, the Kleene star-like operator indicates repetition.</span>マッチャーと転記者の両方で、Kleeneの星のような演算子は反復を示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Kleene star operator consists of <code>$</code> and parentheses, optionally followed by a separator token, followed by <code>*</code> or <code>+</code> .</span> Kleeneのスター演算子は<code>$</code>と括弧で構成され、任意にセパレータトークンが続き、 <code>*</code>または<code>+</code>続きます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>*</code> means zero or more repetitions, <code>+</code> means at least one repetition.</span> <code>*</code>は0回以上の繰り返しを意味し、 <code>+</code>は少なくとも1回の繰り返しを意味します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The parentheses are not matched or transcribed.</span>かっこは一致しないか転写されません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">On the matcher side, a name is bound to <s>all</s> of the names it matches, in a structure that mimics the structure of the repetition encountered on a successful match.</span>マッチャー側では、一致する<s>すべての</s>名前に名前が結び付けられ<s>ます</s> 。これは、正常に一致したときに遭遇する繰り返しの構造を模倣した構造です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The job of the transcriber is to sort that structure out.</span>転記者の仕事は、その構造を整理することです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The rules for transcription of these repetitions are called &quot;Macro By Example&quot;.</span>これらの繰り返しの転写の規則は、「マクロバイケース」と呼ばれます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Essentially, one &quot;layer&quot; of repetition is discharged at a time, and all of them must be discharged by the time a name is transcribed.</span>本質的に、繰り返しの1つの「レイヤー」は一度に排出され、名前はすべて転記されるまでに排出されなければなりません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, <code>( $( $i:ident ),* ) =&gt; ( $i )</code> is an invalid macro, but <code>( $( $i:ident ),* ) =&gt; ( $( $i:ident ),* )</code> is acceptable (if trivial).</span>したがって、 <code>( $( $i:ident ),* ) =&gt; ( $i )</code>は無効なマクロですが、 <code>( $( $i:ident ),* ) =&gt; ( $( $i:ident ),* )</code>許容される（些細であれば）。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When Macro By Example encounters a repetition, it examines all of the <code>$</code> <s>name</s> s that occur in its body.</span> Example by Macroは繰り返しに遭遇すると、本体にある<code>$</code> <s>name</s>すべてを調べます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">At the &quot;current layer&quot;, they all must repeat the same number of times, so <code>( $( $i:ident ),* ; $( $j:ident ),* ) =&gt; ( $( ($i,$j) ),* )</code> is valid if given the argument <code>(a,b,c ; d,e,f)</code> , but not <code>(a,b,c ; d,e)</code> .</span> &quot;現在のレイヤー&quot;では、それらはすべて同じ回数繰り返さなければならないので、 <code>( $( $i:ident ),* ; $( $j:ident ),* ) =&gt; ( $( ($i,$j) ),* )</code>は、 <code>(a,b,c ; d,e,f)</code>ではなく、 <code>(a,b,c ; d,e)</code>場合に有効です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The repetition walks through the choices at that layer in lockstep, so the former input transcribes to <code>(a,d), (b,e), (c,f)</code> .</span>その反復はロックステップでその層の選択肢を歩き回り、前者の入力は<code>(a,d), (b,e), (c,f)</code>転記される。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Nested repetitions are allowed.</span>ネストされた繰り返しが許可されます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Parsing limitations</span>解析の制限</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The parser used by the macro system is reasonably powerful, but the parsing of Rust syntax is restricted in two ways:</span>マクロシステムで使用されるパーサーはかなり強力ですが、Rust構文の構文解析には2通りの制限があります。</span> </p><br><div data-b=1.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Macro definitions are required to include suitable separators after parsing expressions and other bits of the Rust grammar.</span>マクロ定義には、式やRust文法の他のビットを解析した後に、適切な区切り文字を含める必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This implies that a macro definition like <code>$i:expr [ , ]</code> is not legal, because <code>[</code> could be part of an expression.</span>これは、 <code>$i:expr [ , ]</code>ようなマクロ定義は、 <code>[</code>式の一部である可能性があるためです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A macro definition like <code>$i:expr,</code> or <code>$i:expr;</code></span> <code>$i:expr,</code>や<code>$i:expr;</code>ようなマクロ定義<code>$i:expr;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">would be legal, however, because <code>,</code> and <code>;</code></span>しかし、法的になりますので<code>,</code>と<code>;</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">are legal separators.</span>法的な区切り文字です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">See <a class=notranslate href="#4RFC 550">RFC 550</a> for more information.</span>詳細については、 <a class=notranslate href="#4RFC 550">RFC 550</a>を参照してください。</span> </div><div data-b=2.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The parser must have eliminated all ambiguity by the time it reaches a <code>$</code> <s>name</s> <code>:</code> <s>designator</s> .</span>パーサは、 <code>$</code> <s>name</s> <code>:</code> <s>指定子に</s>達するまでにすべてのあいまいさを解消していなければなりません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This requirement most often affects name-designator pairs when they occur at the beginning of, or immediately after, a <code>$(...)*</code> ;</span>この要件は、 <code>$(...)*</code>の開始時または直後に名前指定子のペアが発生するときに最も頻繁に影響します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">requiring a distinctive token in front can solve the problem.</span>先に特有のトークンを要求することで問題を解決できます。</span> </div><br> <a class=notranslate href=#1https://github.com/rust-lang/rfcs/blob/master/text/0550-macro-future-proofing.md>RFC 550</a><script>_addload(function(){_setupIW('com');_csi('en','ja','macros-by-example.html');});</script>