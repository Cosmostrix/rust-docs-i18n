<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=subtyping.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Subtyping and Variance</span>サブタイプと差異</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Subtyping is implicit and can occur at any stage in type checking or inference.</span>サブタイプは暗黙的であり、型検査または推論のどの段階でも発生する可能性があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Subtyping in Rust is very restricted and occurs only due to variance with respect to lifetimes and between types with higher ranked lifetimes.</span>錆におけるサブタイプ化は非常に制限されており、生涯に関するばらつきおよびより高いランク付けされた寿命を有するタイプ間でのみ生じる。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If we were to erase lifetimes from types, then the only subtyping would be due to type equality.</span>タイプから生存期間を消去する場合、唯一のサブタイプは型の平等によるものです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Consider the following example: string literals always have <code>&#39;static</code> lifetime.</span>次の例を考えてみましょう。文字列リテラルは常に<code>&#39;static</code>有効期間を持ち<code>&#39;static</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Nevertheless, we can assign <code>s</code> to <code>t</code> :</span>それにもかかわらず、 <code>s</code>を<code>t</code>代入することができます。</span> </p><br><div data-lang=rust><div data-l="fn bar&lt;'a&gt;() {"></div><div data-l="    let s: &amp;'static str = &quot;hi&quot;;"></div><div data-l="    let t: &amp;'a str = s;"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Since <code>&#39;static</code> outlives the lifetime parameter <code>&#39;a</code> , <code>&amp;&#39;static str</code> is a subtype of <code>&amp;&#39;a str</code> .</span>以来<code>&#39;static</code>寿命パラメータをoutlives <code>&#39;a</code> <code>&amp;&#39;static str</code>のサブタイプである<code>&amp;&#39;a str</code> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#4Higher-ranked>Higher-ranked</a> &amp;#32;</span> <a class=notranslate href=#4Higher-ranked>Higher-ranked</a> ＆＃32;</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href="#4function pointers">function pointers</a> and <a class=notranslate href="#4trait objects">trait objects</a> have another subtype relation.</span> <a class=notranslate href="#4function pointers">function pointers</a>と<a class=notranslate href="#4trait objects">trait objects</a>は別のサブタイプの関係があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are subtypes of types that are given by substitutions of the higher-ranked lifetimes.</span>それらは、より高いランクの生涯の置換によって与えられるタイプのサブタイプである。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some examples:</span>いくつかの例：</span> </p><br><div data-lang=rust><div data-l="#// Here 'a is substituted for 'static"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here &#39;a is substituted for &#39;static</span>ここで &#39;aは&#39; static</span> </div><div data-l="let subtype: &amp;(for&lt;'a&gt; fn(&amp;'a i32) -&gt; &amp;'a i32) = &amp;((|x| x) as fn(&amp;_) -&gt; &amp;_);"></div><div data-l="let supertype: &amp;(fn(&amp;'static i32) -&gt; &amp;'static i32) = subtype;"></div><div data-l=""></div><div data-l="#// This works similarly for trait objects"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This works similarly for trait objects</span>これは、特性オブジェクト</span> </div><div data-l="let subtype: &amp;(for&lt;'a&gt; Fn(&amp;'a i32) -&gt; &amp;'a i32) = &amp;|x| x;"></div><div data-l="let supertype: &amp;(Fn(&amp;'static i32) -&gt; &amp;'static i32) = subtype;"></div><div data-l=""></div><div data-l="#// We can also substitute one higher-ranked lifetime for another"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We can also substitute one higher-ranked lifetime for another</span>私たちはまた、より高いランクの生涯を別の生涯に置き換えることもできます</span> </div><div data-l="let subtype: &amp;(for&lt;'a, 'b&gt; fn(&amp;'a i32, &amp;'b i32))= &amp;((|x, y| {}) as fn(&amp;_, &amp;_));"></div><div data-l="let supertype: &amp;for&lt;'c&gt; fn(&amp;'c i32, &amp;'c i32) = subtype;"></div></div><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Variance</span>分散</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Variance is a property that generic types have with respect to their arguments.</span>分散は、ジェネリック型が引数に対して持つ性質です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A generic type&#39;s <i>variance</i> in a parameter is how the subtyping of the parameter affects the subtyping of the type.</span>パラメーターの汎用タイプの<i>分散</i>は、パラメーターのサブタイプがそのタイプのサブタイプにどのように影響するかです。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>F&lt;T&gt;</code> is <i>covariant</i> over <code>T</code> if <code>T</code> being a subtype of <code>U</code> implies that <code>F&lt;T&gt;</code> is a subtype of <code>F&lt;U&gt;</code> (subtyping &quot;passes through&quot;)</span> <code>F&lt;T&gt;</code>上に<i>共変</i>された<code>T</code>場合<code>T</code>のサブタイプである<code>U</code>ことを意味<code>F&lt;T&gt;</code>のサブタイプである<code>F&lt;U&gt;</code> （サブタイプ「通過」）</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>F&lt;T&gt;</code> is <i>contravariant</i> over <code>T</code> if <code>T</code> being a subtype of <code>U</code> implies that <code>F&lt;U&gt;</code> is a subtype of <code>F&lt;T&gt;</code></span> <code>F&lt;T&gt;</code> IS <i>反変</i>オーバー<code>T</code>場合<code>T</code>のサブタイプである<code>U</code>あることを意味<code>F&lt;U&gt;</code>のサブタイプである<code>F&lt;T&gt;</code></span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>F&lt;T&gt;</code> is <i>invariant</i> over <code>T</code> otherwise (no subtyping relation can be derived)</span> <code>F&lt;T&gt;</code>は<code>T</code>以外では<i>不変</i>である（サブタイプの関係は導かれない）</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Variance of types is automatically determined as follows</span>タイプの差異は、以下のように自動的に決定されます</span> </p><br><div data-tbl><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Type</span>タイプ</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Variance in <code>&#39;a</code></span> <code>&#39;a</code>差異</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Variance in <code>T</code></span> <code>T</code>における分散</span> </div></div><div data-tbl><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-------------------------------</span> -------------------------------</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-------------------</span> -------------------</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">-------------------</span> -------------------</span> </div></div><div data-tbl><div> <code>&amp;&#39;a T</code> </div> <div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div></div><div data-tbl><div> <code>&amp;&#39;a mut T</code> </div> <div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">invariant</span>不変の</span> </div></div><div data-tbl><div> <code>*const T</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div></div><div data-tbl><div> <code>*mut T</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">invariant</span>不変の</span> </div></div><div data-tbl><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>[T]</code> and <code>[T; n]</code></span> <code>[T]</code>および<code>[T; n]</code></span> <code>[T; n]</code> </div><div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div></div><div data-tbl><div> <code>fn() -&gt; T</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div></div><div data-tbl><div> <code>fn(T) -&gt; ()</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">contravariant</span>対立形質</span> </div></div><div data-tbl><div> <code>std::cell::UnsafeCell&lt;T&gt;</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">invariant</span>不変の</span> </div></div><div data-tbl><div> <code>std::marker::PhantomData&lt;T&gt;</code> </div> <div></div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div></div><div data-tbl><div> <code>Trait&lt;T&gt; + &#39;a</code> </div> <div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">covariant</span>共変量</span> </div><div> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">invariant</span>不変の</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The variance of other <code>struct</code> , <code>enum</code> , <code>union</code> and tuple types is decided by looking at the variance of the types of their fields.</span>他の<code>struct</code> 、 <code>enum</code> 、 <code>union</code>およびtuple型の分散は、フィールドの型の分散を調べることによって決定されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If the parameter is used in positions with different variances then the parameter is invariant.</span>パラメータが異なる分散を有する位置で使用される場合、パラメータは不変である。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example the following struct is covariant in <code>&#39;a</code> and <code>T</code> and invariant in <code>&#39;b</code> and <code>U</code> .</span>例えば、以下の構造体は<code>&#39;a</code>と<code>T</code> <code>&#39;a</code>共変で、 <code>&#39;b</code>と<code>U</code> <code>&#39;b</code>不変である。</span> </p><br><div data-lang=rust><div data-l="use std::cell::UnsafeCell;"></div><div data-l="struct Variance&lt;'a, 'b, T, U: 'a&gt; {"></div><div data-l="#//    x: &amp;'a U,               // This makes `Variance` covariant in 'a, and would"></div><div data-l="#                            // make it covariant in U, but U is used later"></div><div data-l="    x: &amp;'a U,               // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This makes <code>Variance</code> covariant in &#39;a, and would make it covariant in U, but U is used later</span>これは、 <code>Variance</code> aをaで共変させ、Uで共変にしますが、Uは後で使用されます</span> </div><div data-l="#//    y: *const T,            // Covariant in T"></div><div data-l="    y: *const T,            // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Covariant in T</span> Tの共変量</span> </div><div data-l="#//    z: UnsafeCell&lt;&amp;'b f64&gt;, // Invariant in 'b"></div><div data-l="    z: UnsafeCell&lt;&amp;'b f64&gt;, // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Invariant in &#39;b</span>不変の &#39;b</span> </div><div data-l="#//    w: *mut U,              // Invariant in U, makes the whole struct invariant"></div><div data-l="    w: *mut U,              // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Invariant in U, makes the whole struct invariant</span> Uの不変式は、構造体全体を不変にする</span> </div><div data-l=}></div></div><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1type-coercions.html>coercions</a> <a class=notranslate href=#1types.html#function-pointer-types>function pointers</a> <a class=notranslate href=#1../nomicon/hrtb.html>Higher-ranked</a> <a class=notranslate href=#1types.html#trait-object-lifetime-bounds>lifetime bound</a> <a class=notranslate href=#1types.html#trait-objects>trait objects</a></span> <a class=notranslate href=#1types.html#function-pointer-types>function pointers</a> <a class=notranslate href=#1type-coercions.html>coercions</a> <a class=notranslate href=#1types.html#function-pointer-types>function pointers</a> <a class=notranslate href=#1../nomicon/hrtb.html>Higher-ranked</a> <a class=notranslate href=#1types.html#trait-object-lifetime-bounds>lifetime bound</a> <a class=notranslate href=#1types.html#trait-objects>trait objects</a></span><script>_addload(function(){_setupIW('com');_csi('en','ja','subtyping.html');});</script>