<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=passes.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">MIR passes</span> MIRパス</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you would like to get the MIR for a function (or constant, etc), you can use the <code>optimized_mir(def_id)</code> query.</span>関数（または定数など）のMIRを取得する場合は、 <code>optimized_mir(def_id)</code>クエリを使用できます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This will give you back the final, optimized MIR.</span>これにより、最終的に最適化されたMIRが返されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For foreign def-ids, we simply read the MIR from the other crate&#39;s metadata.</span>外国のdef-idsでは、他の箱のメタデータからMIRを読み込むだけです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But for local def-ids, the query will construct the MIR and then iteratively optimize it by applying a series of passes.</span>しかし、ローカルdef-idsの場合、クエリはMIRを構築し、一連のパスを適用して反復的に最適化します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This section describes how those passes work and how you can extend them.</span>このセクションでは、パスの仕組みとパスの拡張方法について説明します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To produce the <code>optimized_mir(D)</code> for a given def-id <code>D</code> , the MIR passes through several suites of optimizations, each represented by a query.</span>与えられたdef-id <code>D</code>に対する<code>optimized_mir(D)</code>を生成するために、MIRはいくつかの最適化スイートを通過し、それぞれがクエリによって表されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each suite consists of multiple optimizations and transformations.</span>各スイートは、複数の最適化と変換で構成されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These suites represent useful intermediate points where we want to access the MIR for type checking or other purposes:</span>これらのスイートは、タイプチェックやその他の目的でMIRにアクセスしたい場合に便利な中間点です。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>mir_build(D)</code> – not a query, but this constructs the initial MIR</span> <code>mir_build(D)</code> - クエリではないが、これは最初のMIRを構築する</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>mir_const(D)</code> – applies some simple transformations to make MIR ready for constant evaluation;</span> <code>mir_const(D)</code> - いくつかの簡単な変換を適用して、MIRを定数評価の準備を整えます。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>mir_validated(D)</code> – applies some more transformations, making MIR ready for borrow checking;</span> <code>mir_validated(D)</code> - いくつかの変換を適用し、MIRを借用チェックの準備が整えます。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>optimized_mir(D)</code> – the final state, after all optimizations have been performed.</span> <code>optimized_mir(D)</code> - すべての最適化が実行された後の最終状態。</span> </div><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Seeing how the MIR changes as the compiler executes</span>コンパイラの実行時にMIRがどのように変化するかを見る</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>-Zdump-mir=F</code> is a handy compiler options that will let you view the MIR for each function at each stage of compilation.</span> <code>-Zdump-mir=F</code>は、コンパイルの各段階で各関数のMIRを表示するのに便利なコンパイラオプションです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>-Zdump-mir</code> takes a <b>filter</b> <code>F</code> which allows you to control which functions and which passes you are interesting in. For example:</span> <code>-Zdump-mir</code>は<b>フィルタ</b> <code>F</code>を受け取ります。この関数を使用すると、どの関数をどの関数に渡すかを制御できます。たとえば、次のようになります。</span> </p><br><div data-lang=bash><div data-l="&gt; rustc -Zdump-mir=foo ..."></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This will dump the MIR for any function whose name contains <code>foo</code> ;</span>これは、名前に<code>foo</code>が含まれる関数のMIRをダンプします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">it will dump the MIR both before and after every pass.</span>すべてのパスの前後にMIRをダンプします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Those files will be created in the <code>mir_dump</code> directory.</span>これらのファイルは、 <code>mir_dump</code>ディレクトリに作成されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There will likely be quite a lot of them!</span>おそらくそれらのかなりたくさんあるでしょう！</span> </p><br><div data-lang=bash><div data-l="&gt; cat &gt; foo.rs"></div><div data-l="fn main() {"></div><div data-l="    println!(&quot;Hello, world!&quot;);"></div><div data-l=}></div><div data-l=^D></div><div data-l="&gt; rustc -Zdump-mir=main foo.rs"></div><div data-l="&gt; ls mir_dump/* | wc -l"></div><div data-l="     161"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The files have names like <code>rustc.main.000-000.CleanEndRegions.after.mir</code> .</span>ファイルには<code>rustc.main.000-000.CleanEndRegions.after.mir</code>ような名前が<code>rustc.main.000-000.CleanEndRegions.after.mir</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These names have a number of parts:</span>これらの名前にはいくつかの部分があります。</span> </p><br><div data-lang=text><div data-l=rustc.main.000-000.CleanEndRegions.after.mir></div><div data-l="      ---- --- --- --------------- ----- either before or after"></div><div data-l="      |    |   |   name of the pass"></div><div data-l="      |    |   index of dump within the pass (usually 0, but some passes dump intermediate states)"></div><div data-l="      |    index of the pass"></div><div data-l="      def-path to the function etc being dumped"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can also make more selective filters.</span>より選択的なフィルタを作成することもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, <code>main &amp; CleanEndRegions</code> will select for things that reference <i>both</i> <code>main</code> and the pass <code>CleanEndRegions</code> :</span>たとえば、 <code>main &amp; CleanEndRegions</code>は<i>、</i> <code>main</code>とパスの<i>両方</i>を参照するものを選択します<code>CleanEndRegions</code> ：</span> </p><br><div data-lang=bash><div data-l="&gt; rustc -Zdump-mir='main &amp; CleanEndRegions' foo.rs"></div><div data-l="&gt; ls mir_dump"></div><div data-l="rustc.main.000-000.CleanEndRegions.after.mir	rustc.main.000-000.CleanEndRegions.before.mir"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Filters can also have <code>|</code></span>フィルタには<code>|</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">parts to combine multiple sets of <code>&amp;</code> -filters.</span>複数の<code>&amp;</code>フィルターセットを組み合わせるための部品。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example <code>main &amp; CleanEndRegions | main &amp; NoLandingPads</code></span>たとえば、 <code>main &amp; CleanEndRegions | main &amp; NoLandingPads</code></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>main &amp; CleanEndRegions | main &amp; NoLandingPads</code> will select <i>either</i> <code>main</code> and <code>CleanEndRegions</code> <i>or</i> <code>main</code> and <code>NoLandingPads</code> :</span> <code>main &amp; CleanEndRegions | main &amp; NoLandingPads</code>は<i>、</i> <code>main</code>と<code>CleanEndRegions</code> <i>、</i> <code>main</code>と<code>NoLandingPads</code> <i>いずれか</i>を選択し<i>ます</i> ：</span> </p><br><div data-lang=bash><div data-l="&gt; rustc -Zdump-mir='main &amp; CleanEndRegions | main &amp; NoLandingPads' foo.rs"></div><div data-l="&gt; ls mir_dump"></div><div data-l=rustc.main-promoted[0].002-000.NoLandingPads.after.mir></div><div data-l=rustc.main-promoted[0].002-000.NoLandingPads.before.mir></div><div data-l=rustc.main-promoted[0].002-006.NoLandingPads.after.mir></div><div data-l=rustc.main-promoted[0].002-006.NoLandingPads.before.mir></div><div data-l=rustc.main-promoted[1].002-000.NoLandingPads.after.mir></div><div data-l=rustc.main-promoted[1].002-000.NoLandingPads.before.mir></div><div data-l=rustc.main-promoted[1].002-006.NoLandingPads.after.mir></div><div data-l=rustc.main-promoted[1].002-006.NoLandingPads.before.mir></div><div data-l=rustc.main.000-000.CleanEndRegions.after.mir></div><div data-l=rustc.main.000-000.CleanEndRegions.before.mir></div><div data-l=rustc.main.002-000.NoLandingPads.after.mir></div><div data-l=rustc.main.002-000.NoLandingPads.before.mir></div><div data-l=rustc.main.002-006.NoLandingPads.after.mir></div><div data-l=rustc.main.002-006.NoLandingPads.before.mir></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">(Here, the <code>main-promoted[0]</code> files refer to the MIR for &quot;promoted constants&quot; that appeared within the <code>main</code> function.)</span> （ここでは、 <code>main-promoted[0]</code>ファイルは<code>main</code>関数内に登場した &quot;promoted constant&quot;のMIRを参照しています）。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Implementing and registering a pass</span>パスの実装と登録</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A <code>MirPass</code> is some bit of code that processes the MIR, typically – but not always – transforming it along the way somehow.</span> <code>MirPass</code>はMIRを処理するコードですが、いつもとは限りませんが、何とか途中でそれを変換します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, it might perform an optimization.</span>たとえば、最適化を実行する場合があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>MirPass</code> trait itself is found in in <a href=#3mirtransform>the <code>rustc_mir::transform</code> module</a> , and it basically consists of one method, <code>run_pass</code> , that simply gets an <code>&amp;mut Mir</code> (along with the tcx and some information about where it came from).</span> <code>MirPass</code>特性自体は<a href=#3mirtransform><code>rustc_mir::transform</code>モジュール</a>にあります。基本的には<code>run_pass</code> 1つのメソッドから成ってい<a href=#3mirtransform>ます</a> 。これは単に<code>&amp;mut Mir</code> （どこから来たのかについてのtcxといくつかの情報を）取得します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The MIR is therefore modified in place (which helps to keep things efficient).</span>したがって、MIRはその場で変更されます（物事を効率的に保つのに役立ちます）。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A good example of a basic MIR pass is <a class=notranslate href="#4`NoLandingPads`">`NoLandingPads`</a> , which walks the MIR and removes all edges that are due to unwinding – this is used when configured with <code>panic=abort</code> , which never unwinds.</span>基本的なMIRパスの良い例は、MIRを歩き、巻き戻しに起因するすべてのエッジを除去する<a class=notranslate href="#4`NoLandingPads`">`NoLandingPads`</a> 。これは<a class=notranslate href="#4`NoLandingPads`">`NoLandingPads`</a>しない<code>panic=abort</code>で構成されている場合に使用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As you can see from its source, a MIR pass is defined by first defining a dummy type, a struct with no fields, something like:</span>そのソースから見ることができるように、MIRパスは最初にダミー型を定義し、フィールドを持たない構造体を定義します。</span> </p><br><div data-lang=rust><div data-l="struct MyPass;"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">for which you then implement the <code>MirPass</code> trait.</span>そのために<code>MirPass</code>特性を実装します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can then insert this pass into the appropriate list of passes found in a query like <code>optimized_mir</code> , <code>mir_validated</code> , etc. (If this is an optimization, it should go into the <code>optimized_mir</code> list.)</span>このパスを<code>optimized_mir</code> 、 <code>mir_validated</code>などのクエリで見つかった適切なパスリストに挿入することができます（これが最適化されている場合は、 <code>optimized_mir</code>リストに移動する必要があります）。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you are writing a pass, there&#39;s a good chance that you are going to want to use a <a class=notranslate href="#4MIR visitor">MIR visitor</a> .</span>パスを書いている場合は、 <a class=notranslate href="#4MIR visitor">MIR visitor</a>を使用する可能性があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">MIR visitors are a handy way to walk all the parts of the MIR, either to search for something or to make small edits.</span> MIR訪問者は、何かを検索したり、小さな編集をするために、MIRのすべての部分を歩く便利な方法です。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Stealing</span>窃盗</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The intermediate queries <code>mir_const()</code> and <code>mir_validated()</code> yield up a <code>&amp;&#39;tcx Steal&lt;Mir&lt;&#39;tcx&gt;&gt;</code> , allocated using <code>tcx.alloc_steal_mir()</code> .</span>中間クエリ<code>mir_const()</code>と<code>mir_const()</code> 、 <code>mir_validated()</code>を使用して割り当てられた<code>&amp;&#39;tcx Steal&lt;Mir&lt;&#39;tcx&gt;&gt;</code>を<code>tcx.alloc_steal_mir()</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This indicates that the result may be <b>stolen</b> by the next suite of optimizations – this is an optimization to avoid cloning the MIR.</span>これは、次の一連の最適化によって結果が<b>盗ま</b>れる可能性があることを示します。これは、MIRの複製を回避するための最適化です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Attempting to use a stolen result will cause a panic in the compiler.</span>盗まれた結果を使用しようとすると、コンパイラでパニックが発生します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, it is important that you do not read directly from these intermediate queries except as part of the MIR processing pipeline.</span>したがって、MIR処理パイプラインの一部として以外は、これらの中間クエリから直接読み取らないことが重要です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because of this stealing mechanism, some care must also be taken to ensure that, before the MIR at a particular phase in the processing pipeline is stolen, anyone who may want to read from it has already done so.</span>この窃取メカニズムのために、処理パイプラインの特定のフェーズでMIRが盗まれる前に、MIRから処理パイプラインを盗まれる前に、それを読みたいと思っている人は、すでにそれを行っていることを確認する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Concretely, this means that if you have some query <code>foo(D)</code> that wants to access the result of <code>mir_const(D)</code> or <code>mir_validated(D)</code> , you need to have the successor pass &quot;force&quot; <code>foo(D)</code> using <code>ty::queries::foo::force(...)</code> .</span>具体的には、これは、 <code>mir_const(D)</code>または<code>mir_validated(D)</code>の結果にアクセスするクエリ<code>foo(D)</code>ある場合、後継者に<code>ty::queries::foo::force(...)</code>を使用して &quot;force&quot; <code>foo(D)</code>を渡す必要があることを<code>mir_const(D)</code>ます<code>ty::queries::foo::force(...)</code> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This will force a query to execute even though you don&#39;t directly require its result.</span>これにより、結果を直接要求していなくても、クエリが強制的に実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">As an example, consider MIR const qualification.</span>例として、MIR const資格を検討してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It wants to read the result produced by the <code>mir_const()</code> suite.</span>これは、 <code>mir_const()</code>スイートによって生成された結果を読み取ることを望みます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, that result will be <b>stolen</b> by the <code>mir_validated()</code> suite.</span>ただし、その結果は<code>mir_validated()</code>スイートによって<b>盗ま</b>れます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If nothing was done, then <code>mir_const_qualif(D)</code> would succeed if it came before <code>mir_validated(D)</code> , but fail otherwise.</span>何もしなかった場合、 <code>mir_const_qualif(D)</code>は<code>mir_validated(D)</code>前に<code>mir_validated(D)</code>ば成功しますが、そうでなければ失敗します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, <code>mir_validated(D)</code> will <b>force</b> <code>mir_const_qualif</code> before it actually steals, thus ensuring that the reads have already happened (remember that <a href=#2./query.html>queries are memoized</a> , so executing a query twice simply loads from a cache the second time):</span>したがって、 <code>mir_validated(D)</code>は実際に盗む前に<code>mir_const_qualif</code>を<b>強制</b>し、読み込みが既に行われていることを確認します（ <a href=#2./query.html>クエリがメモされる</a>ので、クエリを2回実行するだけで2回目にキャッシュからロードされます）。</span> </p><br><div data-lang=text><div data-l="mir_const(D) --read-by--&gt; mir_const_qualif(D)"></div><div data-l="     |                       ^"></div><div data-l="  stolen-by                  |"></div><div data-l="     |                    (forces)"></div><div data-l="     v                       |"></div><div data-l="mir_validated(D) ------------+"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This mechanism is a bit dodgy.</span>このメカニズムは少しばかげている。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is a discussion of more elegant alternatives in <a class=notranslate href=#4rust-lang/rust#41710>rust-lang/rust#41710</a> .</span> <a class=notranslate href=#4rust-lang/rust#41710>rust-lang/rust#41710</a>のよりエレガントな選択肢の議論があります。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://github.com/rust-lang/rust/issues/41710>rust-lang/rust#41710</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/transform/>mirtransform</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/transform/no_landing_pads/struct.NoLandingPads.html>`NoLandingPads`</a> <a class=notranslate href=#1mir/visitor.html>MIR visitor</a></span> <a class=notranslate href=#1https://github.com/rust-lang/rust/issues/41710>rust-lang/rust#41710</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/transform/>mirtransform</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/transform/no_landing_pads/struct.NoLandingPads.html>`NoLandingPads`</a> <a class=notranslate href=#1mir/visitor.html>MIR visitor</a></span><script>_addload(function(){_setupIW('com');_csi('en','ja','passes.html');});</script>