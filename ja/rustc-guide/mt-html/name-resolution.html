<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=name-resolution.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Name resolution</span>名前解決</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The name resolution is a separate pass in the compiler.</span>名前解決は、コンパイラ内の別のパスです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Its input is the syntax tree, produced by parsing input files.</span>その入力は、入力ファイルを解析することによって生成された構文木です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It produces links from all the names in the source to relevant places where the name was introduced.</span>ソース内のすべての名前から、名前が導入された関連する場所へのリンクが作成されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It also generates helpful error messages, like typo suggestions, traits to import or lints about unused items.</span>また、入力ミス、未使用アイテムのインポートやリントなどの有用なエラーメッセージも生成されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A successful run of the name resolution ( <code>Resolver::resolve_crate</code> ) creates kind of an index the rest of the compilation may use to ask about the present names (through the <code>hir::lowering::Resolver</code> interface).</span>名前解決（ <code>Resolver::resolve_crate</code> ）の実行が成功すると、コンパイルの残りの部分が（ <code>hir::lowering::Resolver</code>インターフェースを介して）現在の名前について尋ねるために使用できるインデックスの種類が作成されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The name resolution lives in the <code>librustc_resolve</code> crate, with the meat in <code>lib.rs</code> and some helpers or symbol-type specific logic in the other modules.</span>名前解決は<code>librustc_resolve</code>枠内にあり、 <code>librustc_resolve</code>の肉と、他のモジュールのヘルパーやシンボル型の特定のロジックを<code>lib.rs</code>ます。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Namespaces</span>名前空間</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Different kind of symbols live in different namespaces ‒ eg.</span>異なる種類のシンボルは、異なる名前空間に存在します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">types don&#39;t clash with variables.</span>型は変数と衝突しません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This usually doesn&#39;t happen, because variables start with lower-case letter while types with upper case one, but this is only a convention.</span>変数は小文字で始まり、大文字の型で始まるタイプなので、通常はこれは起こりませんが、これは慣例に過ぎません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is legal Rust code that&#39;ll compile (with warnings):</span>これはコンパイルできる合法的な錆のコードです（警告付き）：</span> </p><br><div data-lang=rust><div data-l="type x = u32;"></div><div data-l="let x: x = 1;"></div><div data-l="#//let y: x = 2; // See? x is still a type here."></div><div data-l="let y: x = 2; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">See?</span>見る？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">x is still a type here.</span> xはまだここの型です。</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To cope with this, and with slightly different scoping rules for these namespaces, the resolver keeps them separated and builds separate structures for them.</span>これに対処するために、これらの名前空間のスコープの規則が少しずつ異なりますが、リゾルバはそれらを分離して保持し、それらのために別々の構造を構築します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In other words, when the code talks about namespaces, it doesn&#39;t mean the module hierarchy, it&#39;s types vs. values vs. macros.</span>言い換えれば、コードが名前空間について語るとき、それはモジュールの階層を意味するものではなく、型と値の対マクロです。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Scopes and ribs</span>スコープとリブ</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A name is visible only in certain area in the source code.</span>名前は、ソースコードの特定の領域でのみ表示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This forms a hierarchical structure, but not necessarily a simple one ‒ if one scope is part of another, it doesn&#39;t mean the name visible in the outer one is also visible in the inner one, or that it refers to the same thing.</span>これは階層構造を形成しますが、必ずしも単純なものではありません。つまり、あるスコープが別のスコープの一部である場合、外側のスコープに表示されている名前も内側のスコープ内に表示されているか、同じものを参照しているわけではありません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To cope with that, the compiler introduces the concept of Ribs.</span>それに対処するために、コンパイラはRibsの概念を導入します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is abstraction of a scope.</span>これはスコープの抽象です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Every time the set of visible names potentially changes, a new rib is pushed onto a stack.</span>表示される名前のセットが変更されるたびに、新しいリブがスタックにプッシュされます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The places where this can happen includes for example:</span>これが起こる可能性のある場所は、たとえば次のとおりです。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The obvious places ‒ curly braces enclosing a block, function boundaries, modules.</span>明白な場所 - ブロック、関数境界、モジュールを囲む中括弧。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Introducing a let binding ‒ this can shadow another binding with the same name.</span> letバインディングの導入 - これは、同じ名前の別のバインディングをシャドウすることができます。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Macro expansion border ‒ to cope with macro hygiene.</span> Macro expansion border  - マクロの衛生に対処する。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When searching for a name, the stack of ribs is traversed from the innermost outwards.</span>名前を検索するとき、肋骨のスタックは最も内側から外側に横断されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This helps to find the closest meaning of the name (the one not shadowed by anything else).</span>これは、名前の最も近い意味を見つけるのに役立ちます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The transition to outer rib may also change the rules what names are usable ‒ if there are nested functions (not closures), the inner one can&#39;t access parameters and local bindings of the outer one, even though they should be visible by ordinary scoping rules.</span>外側のリブへの遷移は、名前が使えるルールも変更することがあります。ネストされた関数（クロージャではない）があると、通常のスコープで見ることができるにもかかわらず、内側のものは外側のパラメータとローカルバインディングにアクセスできませんルール</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">An example:</span>例：</span> </p><br><div data-lang=rust><div data-l="#//fn do_something&lt;T: Default&gt;(val: T) { // &lt;- New rib in both types and values (1)"></div><div data-l="fn do_something&lt;T: Default&gt;(val: T) { // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">&lt;- New rib in both types and values (1)</span> &lt; - 型と値の両方の新しいrib（1）</span> </div><div data-l="#    // `val` is accessible, as is the helper function"></div><div data-l="#    // `T` is accessible"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>val</code> is accessible, as is the helper function <code>T</code> is accessible</span> <code>val</code>はアクセス可能であり、ヘルパー関数<code>T</code>はアクセス可能である</span> </div><div data-l="#//    let helper = || { // New rib on `helper` (2) and another on the block (3)"></div><div data-l="    let helper = || { // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">New rib on <code>helper</code> (2) and another on the block (3)</span> <code>helper</code>新しいリブ（2）とブロックの新しいリブ（3）</span> </div><div data-l="#        // `val` is accessible here"></div><div data-l="        // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>val</code> is accessible here</span> <code>val</code>ここにアクセス可能です</span> </div><div data-l="#//    }; // End of (3)"></div><div data-l="    }; // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">End of (3)</span> （3）の終わり</span> </div><div data-l="#    // `val` is accessible, `helper` variable shadows `helper` function"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>val</code> is accessible, <code>helper</code> variable shadows <code>helper</code> function</span> <code>val</code>はアクセス可能で、 <code>helper</code>変数のシャドウ<code>helper</code>関数</span> </div><div data-l="#//    fn helper() { // &lt;- New rib in both types and values (4)"></div><div data-l="    fn helper() { // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">&lt;- New rib in both types and values (4)</span> &lt; - 型と値の両方に新しいリブ（4）</span> </div><div data-l="#        // `val` is not accessible here, (4) is not transparent for locals)"></div><div data-l="#        // `T` is not accessible here"></div><div data-l="        // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>val</code> is not accessible here, (4) is not transparent for locals) <code>T</code> is not accessible here</span>ここでは<code>val</code>アクセスできない、（4）地方には透明ではない） <code>T</code>はここではアクセスできない</span> </div><div data-l="#//    } // End of (4)"></div><div data-l="    } // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">End of (4)</span> （4）の終わり</span> </div><div data-l="#//    let val = T::default(); // New rib (5)"></div><div data-l="    let val = T::default(); // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">New rib (5)</span>新しいリブ（5）</span> </div><div data-l="#    // `val` is the variable, not the parameter here"></div><div data-l="    // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>val</code> is the variable, not the parameter here</span> <code>val</code>は変数であり、ここではパラメータではありません</span> </div><div data-l="#//} // End of (5), (2) and (1)"></div><div data-l="} // "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">End of (5), (2) and (1)</span> （5）、（2）、（1）の終わり</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Because the rules for different namespaces are a bit different, each namespace has its own independent rib stack that is constructed in parallel to the others.</span>異なる名前空間の規則は少し異なりますので、各名前空間は他の名前空間と並行して構築された独自の独立したリブスタックを持っています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In addition, there&#39;s also a rib stack for local labels (eg. names of loops or blocks), which isn&#39;t a full namespace in its own right.</span>さらに、ローカルラベル用のリブスタック（ループやブロックの名前など）もありますが、これは完全な名前空間ではありません。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Overall strategy</span>全体的な戦略</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To perform the name resolution of the whole crate, the syntax tree is traversed top-down and every encountered name is resolved.</span>クレート全体の名前解決を実行するには、構文ツリーを上下に移動し、遭遇したすべての名前が解決されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This works for most kinds of names, because at the point of use of a name it is already introduced in the Rib hierarchy.</span>これは名前の使用時にすでにRib階層に導入されているため、ほとんどの種類の名前に有効です。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There are some exceptions to this.</span>これにはいくつかの例外があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Items are bit tricky, because they can be used even before encountered ‒ therefore every block needs to be first scanned for items to fill in its Rib.</span>アイテムは遭遇する前であっても使用することができるため、少し厄介です。したがって、すべてのブロックを最初にスキャンして、その肋骨に記入する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Other, even more problematic ones, are imports which need recursive fixed-point resolution and macros, that need to be resolved and expanded before the rest of the code can be processed.</span>その他の問題のあるものは、再帰的な固定小数点の解決とマクロが必要なインポートです。残りのコードを処理できるようになる前に解決して展開する必要があります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Therefore, the resolution is performed in multiple stages.</span>したがって、解像度は多段階で行われる。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">TODO:</span> TODO：</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is a result of the first pass of learning the code.</span>これは、コードを学習する最初の段階の結果です。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It is definitely incomplete and not detailed enough.</span>間違いなく不完全であり、十分詳細ではない。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It also might be inaccurate in places.</span>また、場所によっては不正確かもしれません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Still, it probably provides useful first guidepost to what happens in there.</span>それでも、そこで起こることに役立つ最初の目安を与えるでしょう。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">What exactly does it link to and how is that published and consumed by following stages of compilation?</span>それは正確に何にリンクされ、コンパイルの後続の段階でどのように公開され、消費されますか？</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Who calls it and how it is actually used.</span>誰がそれを呼び出し、どのように実際に使用されているか。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Is it a pass and then the result is only used, or can it be computed incrementally (eg. for RLS)?</span>それは合格ですか、結果は唯一使用されるか、またはそれを段階的に計算できますか（例えばRLSの場合）？</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The overall strategy description is a bit vague.</span>全体的な戦略の説明は少し曖昧です。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Where does the name <code>Rib</code> come from?</span> <code>Rib</code>の名前はどこから来たのですか？</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Does this thing have its own tests, or is it tested only as part of some e2e testing?</span>このものは独自のテストを持っていますか、または一部のe2eテストの一部としてのみテストされていますか？</span> </div><script>_addload(function(){_setupIW('com');_csi('en','ja','name-resolution.html');});</script>