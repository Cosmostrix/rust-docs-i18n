<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=type-checking.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Type checking</span>型チェック</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <a class=notranslate href=#3typeck><code>rustc_typeck</code></a> crate contains the source for &quot;type collection&quot; and &quot;type checking&quot;, as well as a few other bits of related functionality.</span> <a class=notranslate href=#3typeck><code>rustc_typeck</code></a>枠には、 &quot;type collection&quot;と &quot;type checking&quot;のソース、および関連する機能の他のビットが含まれています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">(It draws heavily on the <a class=notranslate href="#4type inference">type inference</a> and <a class=notranslate href="#4trait solving">trait solving</a> .)</span> （これは<a class=notranslate href="#4type inference">type inference</a>と<a class=notranslate href="#4trait solving">trait solving</a>大きく依存します。）</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/librustc_typeck>typeck</a> <a class=notranslate href=#1type-inference.html>type inference</a> <a class=notranslate href=#1traits/resolution.html>trait solving</a></span> <a class=notranslate href=#1type-inference.html>type inference</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/librustc_typeck>typeck</a> <a class=notranslate href=#1type-inference.html>type inference</a> <a class=notranslate href=#1traits/resolution.html>trait solving</a></span> <br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Type collection</span>タイプコレクション</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Type &quot;collection&quot; is the process of converting the types found in the HIR ( <code>hir::Ty</code> ), which represent the syntactic things that the user wrote, into the <b>internal representation</b> used by the compiler ( <code>Ty&lt;&#39;tcx&gt;</code> ) – we also do similar conversions for where-clauses and other bits of the function signature.</span>タイプ &quot;collection&quot;は、ユーザが書いた構文を表すHIR（ <code>hir::Ty</code> ）で見つかったタイプを、コンパイラ（ <code>Ty&lt;&#39;tcx&gt;</code> ）が使用する<b>内部表現</b>に変換するプロセスです。 where-clauseと関数シグネチャの他のビットについても同様の変換を行います。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To try and get a sense for the difference, consider this function:</span>違いを感じ取るために、この関数を考えてみましょう：</span> </p><br><div data-lang=rust,ignore><div data-l="struct Foo { }"></div><div data-l="fn foo(x: Foo, y: self::Foo) { ... }"></div><div data-l="#//        ^^^     ^^^^^^^^^"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">^^^ ^^^^^^^^^</span> ^^^ ^^^^^^^^^^^</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Those two parameters <code>x</code> and <code>y</code> each have the same type: but they will have distinct <code>hir::Ty</code> nodes.</span>これらの2つのパラメータ<code>x</code>と<code>y</code>それぞれ同じ型ですが、別々の<code>hir::Ty</code>ノードを持ちます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Those nodes will have different spans, and of course they encode the path somewhat differently.</span>それらのノードは異なるスパンを持ち、もちろんそれらのパスを多少異なる方法でエンコードします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">But once they are &quot;collected&quot; into <code>Ty&lt;&#39;tcx&gt;</code> nodes, they will be represented by the exact same internal type.</span>しかし、それらが<code>Ty&lt;&#39;tcx&gt;</code>ノードに「収集」されると、それらはまったく同じ内部型によって表されることになる。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Collection is defined as a bundle of <a class=notranslate href=#4queries>queries</a> for computing information about the various functions, traits, and other items in the crate being compiled.</span>コレクションは、コンパイルされている枠内のさまざまな機能、特性、およびその他の項目に関する情報を計算するための<a class=notranslate href=#4queries>queries</a>バンドルとして定義されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that each of these queries is concerned with <i>interprocedural</i> things – for example, for a function definition, collection will figure out the type and signature of the function, but it will not visit the <i>body</i> of the function in any way, nor examine type annotations on local variables (that&#39;s the job of type <i>checking</i> ).</span>これらのクエリのそれぞれは、 <i>手続き間の</i>ものに関係していることに注意してください。例えば、関数定義では、関数の型とシグネチャをコレクションが調べますが、関数の<i>本体</i>を訪れることはありませんし、 （これは型<i>チェック</i>の仕事です）。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For more details, see the <a class=notranslate href=#3collect><code>collect</code></a> module.</span>詳細は、 <a class=notranslate href=#3collect><code>collect</code></a>モジュールを参照してください。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1query.html>queries</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_typeck/collect/>collect</a></span> <a class=notranslate href=#1query.html>queries</a> <a class=notranslate href=#1https://doc.rust-lang.org/nightly/nightly-rustc/rustc_typeck/collect/>collect</a></span> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>TODO</b> : actually talk about type checking...</span> <b>TODO</b> ：タイプチェックについて実際に話す...</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','type-checking.html');});</script>