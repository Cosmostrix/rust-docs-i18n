<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=adding.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Adding new tests</span>新しいテストの追加</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>In general, we expect every PR that fixes a bug in rustc to come accompanied by a regression test of some kind.</b></span> <b>一般的に、rustcのバグを修正したすべてのPRには、何らかの回帰テストが伴うことが予想されます。</b></span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This test should fail in master but pass after the PR.</span>このテストはマスターで失敗しますが、PRの後に合格します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These tests are really useful for preventing us from repeating the mistakes of the past.</span>これらのテストは、私たちが過去の過ちを繰り返さないようにするのに役立ちます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To add a new test, the first thing you generally do is to create a file, typically a Rust source file.</span>新しいテストを追加するには、最初に一般的に行うのは、ファイル、通常はRustソースファイルを作成することです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Test files have a particular structure:</span>テストファイルの構造は次のとおりです。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They always begin with the <a href=#2./conventions.html#copyright>copyright notice</a> ;</span>彼らは常に<a href=#2./conventions.html#copyright>著作権表示</a>から始まります。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">then they should have some kind of <a href=#2#explanatory_comment>comment explaining what the test is about</a> ;</span> <a href=#2#explanatory_comment>テストの内容を説明するコメント</a>が必要です。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">next, they can have one or more <a href=#2#header_commands>header commands</a> , which are special comments that the test interpreter knows how to interpret.</span>次に、1つ以上の<a href=#2#header_commands>ヘッダコマンドを</a>持つことができ<a href=#2#header_commands>ます</a> 。これは、テストインタープリタが解釈する方法を知っている特別なコメントです。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">finally, they have the Rust source.</span>最後に、彼らは錆源を持っています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This may have various <a href=#2#error_annotations>error annotations</a> which indicate expected compilation errors or warnings.</span>これには、予想されるコンパイルエラーまたは警告を示すさまざまな<a href=#2#error_annotations>エラー注釈</a>が含まれている可能性があります。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Depending on the test suite, there may be some other details to be aware of: - For <a href=#2#ui>the <code>ui</code> test suite</a> , you need to generate reference output files.</span>テストスイートによっては、注意すべきいくつかの他の詳細があるかもしれません： -のため<a href=#2#ui><code>のUI</code>テストスイート</a>には、リファレンス出力ファイルを生成する必要があります。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">What kind of test should I add?</span>どんなテストを追加すればいいですか？</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It can be difficult to know what kind of test to use.</span>使用するテストの種類を知ることは難しいかもしれません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here are some rough heuristics:</span>ここにいくつかの大まかなヒューリスティックがあります：</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some tests have specialized needs:</span>いくつかのテストには特別なニーズがあります。</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">need to run gdb or lldb?</span> gdbまたはlldbを実行する必要がありますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">use the <code>debuginfo</code> test suite</span> <code>debuginfo</code>テストスイートを使用する</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">need to inspect LLVM IR or MIR IR?</span> LLVM IRまたはMIR IRを検査する必要がありますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">use the <code>codegen</code> or <code>mir-opt</code> test suites</span> <code>codegen</code>または<code>mir-opt</code>テストスイートを使用する</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">need to run rustdoc?</span> rustdocを実行する必要がありますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Prefer a <code>rustdoc</code> test</span> <code>rustdoc</code>テストを好む</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">need to inspect the resulting binary in some way?</span>結果のバイナリを何らかの方法で検査する必要がありますか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then use <code>run-make</code></span>次に、 <code>run-make</code>使用し<code>run-make</code></span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For most other things, <a href=#2#ui>a <code>ui</code> (or <code>ui-fulldeps</code> ) test</a> is to be preferred:</span>ほとんどの場合<a href=#2#ui>、 <code>ui</code> （または<code>ui-fulldeps</code> ）のテスト</a>が優先されます。</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ui</code> tests subsume both run-pass, compile-fail, and parse-fail tests</span> <code>ui</code>テストは、実行パス、コンパイル失敗、および解析失敗テストの両方を含む</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">in the case of warnings or errors, <code>ui</code> tests capture the full output, which makes it easier to review but also helps prevent &quot;hidden&quot; regressions in the output</span>警告またはエラーが発生した場合、 <code>ui</code>テストは完全な出力をキャプチャします。これにより、レビューが容易になりますが、出力の「隠れた」回帰を防ぐのにも役立ちます</span> </div><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Naming your test</span>テストの名前付け</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">We have not traditionally had a lot of structure in the names of tests.</span>私たちは伝統的にテストの名前に多くの構造を持っていませんでした。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Moreover, for a long time, the rustc test runner did not support subdirectories (it now does), so test suites like <a class=notranslate href="#4`src/test/run-pass`">`src/test/run-pass`</a> have a huge mess of files in them.</span>さらに、長い間、rustcテストランナーはサブディレクトリをサポートしていませんでした（現在はそうです）。したがって、 <a class=notranslate href="#4`src/test/run-pass`">`src/test/run-pass`</a>ようなテストスイートには、ファイルの大混乱があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is not considered an ideal setup.</span>これは理想的な設定ではありません。</span> </p><br> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/test/run-pass/>`src/test/run-pass`</a> <br> <p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For regression tests – basically, some random snippet of code that came in from the internet – we often just name the test after the issue.</span>回帰テスト - 基本的に、インターネットから入ったコードのランダムな断片 - 私たちはしばしば問題の後にテストの名前をつけます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, <code>src/test/run-pass/issue-12345.rs</code> .</span>たとえば、 <code>src/test/run-pass/issue-12345.rs</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If possible, though, it is better if you can put the test into a directory that helps identify what piece of code is being tested here (eg, <code>borrowck/issue-12345.rs</code> is much better), or perhaps give it a more meaningful name.</span>可能であれば、ここでテストされているコードの識別に役立つディレクトリにテストを入れることができれば（例えば、 <code>borrowck/issue-12345.rs</code>がはるかに優れています）、もっと意味のある名。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Still, <b>do include the issue number somewhere</b> .</span>それでも、 <b>どこかに問題番号を記載してください</b> 。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When writing a new feature, <b>create a subdirectory to store your tests</b> .</span>新しいフィーチャーを<b>作成する</b>ときは<b>、テストを保管するサブディレクトリーを作成します</b> 。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, if you are implementing RFC 1234 (&quot;Widgets&quot;), then it might make sense to put the tests in directories like:</span>たとえば、RFC 1234（「Widgets」）を実装している場合は、次のようなディレクトリにテストを置くことができます。</span> </p><br><div data-b=-> <code>src/test/ui/rfc1234-widgets/</code> </div> <div data-b=-> <code>src/test/run-pass/rfc1234-widgets/</code> </div> <div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">etc</span>等</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In other cases, there may already be a suitable directory.</span>それ以外の場合は、既に適切なディレクトリが存在する可能性があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">(The proper directory structure to use is actually an area of active debate.)</span> （使用する適切なディレクトリ構造は実際には活発な議論の領域です。）</span> </p><br><p><a name=explanatory_comment></a></p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Comment explaining what the test is about</span>テストの内容を説明するコメント</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When you create a test file, <b>include a comment summarizing the point of the test immediately after the copyright notice</b> .</span>テストファイルを作成するときは<b>、著作権表示の直後にテストポイントを要約するコメントを入れて</b>ください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This should highlight which parts of the test are more important, and what the bug was that the test is fixing.</span>これは、テストのどの部分がより重要であるか、そしてテストが修正しているバグが何かを強調する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Citing an issue number is often very helpful.</span>発行番号を引用すると、多くの場合非常に役立ちます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This comment doesn&#39;t have to be super extensive.</span>このコメントは、非常に広範である必要はありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Just something like &quot;Regression test for #18060: match arms were matching in the wrong order.&quot;</span> 「＃18060の回帰テスト：マッチした武器が間違った順番で一致していました。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">might already be enough.</span>すでに十分かもしれない。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These comments are very useful to others later on when your test breaks, since they often can highlight what the problem is.</span>これらのコメントは、後でテストが中断したときに他の人に非常に役立ちます。なぜなら、問題の内容を強調することが多いからです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are also useful if for some reason the tests need to be refactored, since they let others know which parts of the test were important (often a test must be rewritten because it no longer tests what is was meant to test, and then it&#39;s useful to know what it <i>was</i> meant to test exactly).</span>何らかの理由でテストをリファクタリングする必要がある場合は、テストのどの部分が重要であるかを他の人に知らせるので便利です（多くの場合、テストの対象となったものをテストしないためにテストを書き直す必要があります。それ<i>が</i>正確にテスト<i>される</i>ことを意図してい<i>た</i>ことを知る）。</span> </p><br><p><a name=header_commands></a></p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Header commands: configuring rustc</span>ヘッダーコマンド：rustcの設定</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Header commands are special comments that the test runner knows how to interpret.</span>ヘッダーコマンドは、テストランナーが解釈する方法を知っている特別なコメントです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They must appear before the Rust source in the test.</span>テストでRustソースの前に現れなければなりません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are normally put after the short comment that explains the point of this test.</span>彼らは通常このテストのポイントを説明する短いコメントの後に置かれます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, this test uses the <code>// compile-flags</code> command to specify a custom flag to give to rustc when the test is compiled:</span>たとえば、このテストでは、 <code>// compile-flags</code>に<code>// compile-flags</code>コマンドを使用してrustcに与えるカスタムフラグを指定します。</span> </p><br><div data-lang=rust,ignore><div data-l="#// Copyright 2017 The Rust Project Developers. blah blah blah."></div><div data-l="#// ..."></div><div data-l="#// except according to those terms."></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Copyright 2017 The Rust Project Developers.</span>著作権2017錆プロジェクトの開発者。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">blah blah blah.</span>何とか何とか何とか。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">... except according to those terms.</span> ...それらの用語による以外は...</span> </div><div data-l=""></div><div data-l="#// Test the behavior of `0 - 1` when overflow checks are disabled."></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Test the behavior of <code>0 - 1</code> when overflow checks are disabled.</span>オーバーフローチェックが無効の場合、 <code>0 - 1</code>動作をテストします。</span> </div><div data-l=""></div><div data-l="#// compile-flags: -Coverflow-checks=off"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">compile-flags: -Coverflow-checks=off</span>コンパイルフラグ：-Coverflow-checks = off</span> </div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let x = 0 - 1;"></div><div data-l="    ..."></div><div data-l=}></div></div><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Ignoring tests</span>テストを無視する</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">These are used to ignore the test in some situations, which means the test won&#39;t be compiled or run.</span>これらは、状況によってはテストを無視するために使用されます。つまり、テストはコンパイルまたは実行されません。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ignore-X</code> where <code>X</code> is a target detail or stage will ignore the test accordingly (see below)</span> <code>ignore-X</code>ここで、 <code>X</code>はターゲットのディテールまたはステージであり、それに応じてテストが無視されます（下記参照）</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>only-X</code> is like <code>ignore-X</code> , but will <i>only</i> run the test on that target or stage</span> <code>only-X</code>は<code>ignore-X</code> <code>only-X</code>と似ていますが、そのターゲットまたはステージで<i>のみ</i>テストを実行します</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ignore-pretty</code> will not compile the pretty-printed test (this is done to test the pretty-printer, but might not always work)</span> <code>ignore-pretty</code>はpretty-printedテストをコンパイルしません（これはpretty-printerをテストするために行われますが、必ずしもうまくいかないかもしれません）</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ignore-test</code> always ignores the test</span> <code>ignore-test</code>常に<code>ignore-test</code>を無視します</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>ignore-lldb</code> and <code>ignore-gdb</code> will skip a debuginfo test on that debugger.</span> <code>ignore-lldb</code>と<code>ignore-gdb</code>はそのデバッガでdebuginfoテストをスキップします。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some examples of <code>X</code> in <code>ignore-X</code> :</span> <code>ignore-X</code> <code>X</code>例をいくつか示します。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Architecture: <code>aarch64</code> , <code>arm</code> , <code>asmjs</code> , <code>mips</code> , <code>wasm32</code> , <code>x86_64</code> , <code>x86</code> , ...</span>アーキテクチャ： <code>aarch64</code> 、 <code>arm</code> 、 <code>asmjs</code> 、 <code>mips</code> 、 <code>wasm32</code> 、 <code>x86_64</code> 、 <code>x86</code> 、...</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">OS: <code>android</code> , <code>emscripten</code> , <code>freebsd</code> , <code>ios</code> , <code>linux</code> , <code>macos</code> , <code>windows</code> , ...</span> OS： <code>android</code> 、 <code>emscripten</code> 、 <code>freebsd</code> 、 <code>ios</code> 、 <code>linux</code> 、 <code>macos</code> 、 <code>windows</code> 、...</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Environment (fourth word of the target triple): <code>gnu</code> , <code>msvc</code> , <code>musl</code> .</span>環境（ターゲットの3番目の単語の4番目の単語）： <code>gnu</code> 、 <code>msvc</code> 、 <code>musl</code> 。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Pointer width: <code>32bit</code> , <code>64bit</code> .</span>ポインタの幅： <code>32bit</code> 、 <code>64bit</code> 。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Stage: <code>stage0</code> , <code>stage1</code> , <code>stage2</code> .</span>ステージ： <code>stage0</code> 、 <code>stage1</code> 、 <code>stage2</code> 。</span> </div><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Other Header Commands</span>その他のヘッダーコマンド</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here is a list of other header commands.</span>他のヘッダーコマンドの一覧を示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This list is not exhaustive.</span>このリストは網羅的ではありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Header commands can generally be found by browsing the <code>TestProps</code> structure found in <a class=notranslate href="#4`header.rs`">`header.rs`</a> from the compiletest source.</span>ヘッダーコマンドは、通常、コンパイル元からの<a class=notranslate href="#4`header.rs`">`header.rs`</a>ある<code>TestProps</code>構造体をブラウズすることで見つけることができます。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>run-rustfix</code> for UI tests, indicates that the test produces structured suggestions.</span> UIテストの<code>run-rustfix</code>は、テストが構造化された提案を生成することを示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The test writer should create a <code>.fixed</code> file, which contains the source with the suggestions applied.</span>テストライターは、 <code>.fixed</code>が適用されたソースを含む<code>.fixed</code>ファイルを作成する<code>.fixed</code>ます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When the test is run, compiletest first checks that the correct lint/warning is generated.</span>テストが実行されると、compiletestは最初に正しいlint / warningが生成されていることをチェックします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Then, it applies the suggestion and compares against <code>.fixed</code> (they must match).</span>次に、提案を適用し、 <code>.fixed</code>と比較し<code>.fixed</code> （一致する必要があります）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Finally, the fixed source is compiled, and this compilation is required to succeed.</span>最後に、固定ソースがコンパイルされ、このコンパイルが成功する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The <code>.fixed</code> file can also be generated automatically with the <code>--bless</code> option, discussed <a class=notranslate href=#2#bless>below</a> .</span> <code>.fixed</code>ファイルは、 <a class=notranslate href=#2#bless>below</a> <code>--bless</code>オプションを使用して自動的に生成することもでき<a class=notranslate href=#2#bless>below</a> 。</span> </div><div data-b=*> <code>min-{gdb,lldb}-version</code> </div> <div data-b=*> <code>min-llvm-version</code> </div> <div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>compile-pass</code> for UI tests, indicates that the test is supposed to compile, as opposed to the default where the test is supposed to error out.</span> UIテストの<code>compile-pass</code>は、テストがエラーアウトされるはずのデフォルトではなく、テストがコンパイルされることを示します。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>compile-flags</code> passes extra command-line args to the compiler, eg <code>compile-flags -g</code> which forces debuginfo to be enabled.</span> <code>compile-flags</code>は、追加のコマンドライン引数をコンパイラに渡し<code>compile-flags</code> 。例えば、 <code>compile-flags -g</code> 、debuginfoを強制的に有効にします。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>should-fail</code> indicates that the test should fail;</span> <code>should-fail</code>は、テストが失敗<code>should-fail</code>ことを示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">used for &quot;meta testing&quot;, where we test the compiletest program itself to check that it will generate errors in appropriate scenarios.</span> &quot;メタテスト&quot;のために使用されます。そこで、コンパイル・プログラム自体をテストして、適切なシナリオでエラーを生成するかどうかをチェックします。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This header is ignored for pretty-printer tests.</span>このヘッダは、きれいなプリンタのテストでは無視されます。</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>gate-test-X</code> where <code>X</code> is a feature marks the test as &quot;gate test&quot; for feature X. Such tests are supposed to ensure that the compiler errors when usage of a gated feature is attempted without the proper <code>#€[feature(X)]</code> tag.</span> <code>gate-test-X</code>ここで、 <code>X</code>はフィーチャです。フィーチャXの &quot;ゲートテスト&quot;としてマークされます。このようなテストでは、適切な<code>#€[feature(X)]</code>せずにゲーテッドフィーチャを使用しようとすると、 <code>#€[feature(X)]</code>タグ。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each unstable lang feature is required to have a gate test.</span>それぞれの不安定なラング機能にはゲートテストが必要です。</span> </div><br> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/compiletest/src/header.rs>`header.rs`</a> <br> <p><a name=error_annotations></a></p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Error annotations</span>エラー注釈</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Error annotations specify the errors that the compiler is expected to emit.</span>エラー注釈は、コンパイラが発行すると予想されるエラーを指定します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They are &quot;attached&quot; to the line in source where the error is located.</span>それらは、エラーが存在するソースの行に「接続」されています。</span> </p><br><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>~</code> : Associates the following error level and message with the current line</span> <code>~</code> ：次のエラーレベルとメッセージを現在の行に関連付けます。</span> </div><div data-b=*> <code>~|</code> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">: Associates the following error level and message with the same line as the previous comment</span> ：次のエラーレベルとメッセージを前のコメントと同じ行に関連付けます</span> </div><div data-b=*> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>~^</code> : Associates the following error level and message with the previous line.</span> <code>~^</code> ：次のエラーレベルとメッセージを前の行に関連付けます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each caret ( <code>^</code> ) that you add adds a line to this, so <code>~^^^^^^^</code> is seven lines up.</span>あなたが追加する各キャレット（ <code>^</code> ）はこれに行を追加するので、 <code>~^^^^^^^</code>は7行上です。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The error levels that you can have are:</span>エラーレベルは次のとおりです。</span> </p><br><div data-b=1.> <code>ERROR</code> </div> <div data-b=2.> <code>WARNING</code> </div> <div data-b=3.> <code>NOTE</code> </div> <div data-b=4.> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>HELP</code> and <code>SUGGESTION</code> <i>\</i> <b>Note</b> : <code>SUGGESTION</code> must follow immediately after <code>HELP</code> .</span> <code>HELP</code>と<code>SUGGESTION</code> <i>\</i> <b>注意</b> ： <code>HELP</code>直後には<code>SUGGESTION</code>を続ける必要があります。</span> </div><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Revisions</span>リビジョン</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Certain classes of tests support &quot;revisions&quot; (as of the time of this writing, this includes run-pass, compile-fail, run-fail, and incremental, though incremental tests are somewhat different).</span>特定のクラスのテストは &quot;リビジョン&quot;をサポートしています（この記事の執筆時点では、ランパス、コンパイル・フェイル、ラン・フェイル、インクリメンタル・テストが含まれますが、インクリメンタル・テストは若干異なります）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Revisions allow a single test file to be used for multiple tests.</span>リビジョンでは、複数のテストに1つのテストファイルを使用できます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This is done by adding a special header at the top of the file:</span>これは、ファイルの先頭に特別なヘッダーを追加することによって行われます。</span> </p><br><div data-lang=rust><div data-l="#// revisions: foo bar baz"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">revisions: foo bar baz</span>リビジョン：foo bar baz</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This will result in the test being compiled (and tested) three times, once with <code>--cfg foo</code> , once with <code>--cfg bar</code> , and once with <code>--cfg baz</code> .</span>これにより、テストは3回、-- <code>--cfg foo</code>で1回、-- <code>--cfg bar</code>で1回、-- <code>--cfg baz</code>で1回、コンパイル（テスト）されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can therefore use <code>#[cfg(foo)]</code> etc within the test to tweak each of these results.</span>したがって、テスト中に<code>#[cfg(foo)]</code>などを使用して、これらの結果をそれぞれ微調整することができます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You can also customize headers and expected error messages to a particular revision.</span>ヘッダーと予想されるエラーメッセージを特定のリビジョンにカスタマイズすることもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">To do this, add <code>[foo]</code> (or <code>bar</code> , <code>baz</code> , etc) after the <code>//</code> comment, like so:</span>これを行うには、 <code>//</code>あとに<code>[foo]</code> （または<code>bar</code> 、 <code>baz</code>など）を追加し<code>bar</code> 。</span> </p><br><div data-lang=rust><div data-l="#// A flag to pass in only for cfg `foo`:"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A flag to pass in only for cfg <code>foo</code> :</span> cfg <code>foo</code>に対してのみ渡すフラグ：</span> </div><div data-l="//[foo]compile-flags: -Z verbose"></div><div data-l=""></div><div data-l=#[cfg(foo)]></div><div data-l="fn test_foo() {"></div><div data-l="    let x: usize = 32_u32; //[foo]~ ERROR mismatched types"></div><div data-l=}></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Note that not all headers have meaning when customized to a revision.</span>リビジョンに合わせてカスタマイズした場合、すべてのヘッダが意味を持つわけではないことに注意してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">For example, the <code>ignore-test</code> header (and all &quot;ignore&quot; headers) currently only apply to the test as a whole, not to particular revisions.</span>たとえば、 <code>ignore-test</code>ヘッダー（およびすべての「無視」ヘッダー）は現在、特定のリビジョンではなく、テスト全体にのみ適用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The only headers that are intended to really work when customized to a revision are error patterns and compiler flags.</span>リビジョンにカスタマイズされたときに実際に動作するように意図されているヘッダーは、エラーパターンとコンパイラフラグのみです。</span> </p><br><p><a name=ui></a></p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Guide to the UI tests</span> UIテストのガイド</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The UI tests are intended to capture the compiler&#39;s complete output, so that we can test all aspects of the presentation.</span> UIテストは、プレゼンテーションのすべての側面をテストできるように、コンパイラの完全な出力を取得することを目的としています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">They work by compiling a file (eg, <a class=notranslate href=#3hw-main><code>ui/hello_world/main.rs</code></a> ), capturing the output, and then applying some normalization (see below).</span>それらは、ファイル（例えば、 <a class=notranslate href=#3hw-main><code>ui/hello_world/main.rs</code></a> ）をコンパイルし、出力をキャプチャし、正規化を適用します（下記参照）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This normalized result is then compared against reference files named <code>ui/hello_world/main.stderr</code> and <code>ui/hello_world/main.stdout</code> .</span>この正規化された結果は、 <code>ui/hello_world/main.stderr</code>および<code>ui/hello_world/main.stdout</code>という参照ファイルと比較されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If either of those files doesn&#39;t exist, the output must be empty (that is actually the case for <a href=#3hw>this particular test</a> ).</span>それらのファイルのいずれかが存在しない場合、出力は空でなければなりません（実際には<a href=#3hw>この特定のテストの</a>場合です）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If the test run fails, we will print out the current output, but it is also saved in <code>build/&lt;target-triple&gt;/test/ui/hello_world/main.stdout</code> (this path is printed as part of the test failure message), so you can run <code>diff</code> and so forth.</span>テスト実行が失敗した場合、現在の出力を出力しますが、 <code>build/&lt;target-triple&gt;/test/ui/hello_world/main.stdout</code>も保存されます（このパスはテスト失敗メッセージの一部として出力されます） 、 <code>diff</code>などを実行することができます。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/hello_world/main.rs>hw-main</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/hello_world/>hw</a></span> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/hello_world/main.rs>hw-main</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/hello_world/>hw</a></span> <br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Tests that do not result in compile errors</span>コンパイルエラーにならないテスト</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">By default, a UI test is expected <b>not to compile</b> (in which case, it should contain at least one <code>//~ ERROR</code> annotation).</span>デフォルトでは、UIテストは<b>コンパイル</b>され<b>ないこと</b>が予想さ<b>れます</b> （この場合、少なくとも1つの<code>//~ ERROR</code>注釈が含まれている必要があります）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">However, you can also make UI tests where compilation is expected to succeed, and you can even run the resulting program.</span>ただし、コンパイルが成功すると予想されるUIテストを作成し、結果のプログラムを実行することもできます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Just add one of the following <a href=#2#header_commands>header commands</a> :</span>次の<a href=#2#header_commands>ヘッダコマンドの</a>いずれかを追加するだけです：</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>// compile-pass</code> – compilation should succeed but do not run the resulting binary</span> <code>// compile-pass</code> - コンパイルは成功するはずですが、結果のバイナリを実行しません</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>// run-pass</code> – compilation should succeed and we should run the resulting binary</span> <code>// run-pass</code> - コンパイルは成功するはずです。結果のバイナリを実行する必要があります</span> </div><br><p><a name=bless></a></p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Editing and updating the reference files</span>参照ファイルの編集と更新</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you have changed the compiler&#39;s output intentionally, or you are making a new test, you can pass <code>--bless</code> to the test subcommand.</span>コンパイラの出力を意図的に変更した場合、または新しいテストを作成している場合は、testサブコマンドに<code>--bless</code>を渡すことができます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Eg if some tests in <code>src/test/ui</code> are failing, you can run</span>たとえば、 <code>src/test/ui</code>内のいくつかのテストが失敗した場合は、実行することができます</span> </p><br><div data-lang=text><div data-l="./x.py test --stage 1 src/test/ui --bless"></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">to automatically adjust the <code>.stderr</code> , <code>.stdout</code> or <code>.fixed</code> files of all tests.</span>すべてのテストの<code>.stderr</code> 、 <code>.stdout</code>または<code>.fixed</code>ファイルを自動的に調整します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Of course you can also target just specific tests with the <code>--test-args your_test_name</code> flag, just like when running the tests.</span>もちろん、テストを実行するときと同じように、特定のテストだけを<code>--test-args your_test_name</code>フラグでターゲットにすることもできます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Normalization</span>正規化</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The normalization applied is aimed at eliminating output difference between platforms, mainly about filenames:</span>適用される正規化は、主にファイル名に関するプラットフォーム間の出力の差をなくすことを目的としています。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the test directory is replaced with <code>$DIR</code></span>テストディレクトリは<code>$DIR</code>置き換えられます</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">all backslashes ( <code>\</code> ) are converted to forward slashes ( <code>/</code> ) (for Windows)</span>すべてのバックスラッシュ（ <code>\</code> ）はスラッシュ（ <code>/</code> ）に変換されます（Windowsの場合）</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">all CR LF newlines are converted to LF</span>すべてのCR LF改行はLFに変換されます</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Sometimes these built-in normalizations are not enough.</span>これらの組み込み正規化では不十分な場合があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In such cases, you may provide custom normalization rules using the header commands, eg</span>このような場合は、ヘッダコマンドを使用してカスタム正規化ルールを提供することができます。</span> </p><br><div data-lang=rust><div data-l="#// normalize-stdout-test: &quot;foo&quot; -&gt; &quot;bar&quot;"></div><div data-l="#// normalize-stderr-32bit: &quot;fn\(\) \(32 bits\)&quot; -&gt; &quot;fn\(\) \($$PTR bits\)&quot;"></div><div data-l="#// normalize-stderr-64bit: &quot;fn\(\) \(64 bits\)&quot; -&gt; &quot;fn\(\) \($$PTR bits\)&quot;"></div><div data-l="// "> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">normalize-stdout-test: &quot;foo&quot; -&gt; &quot;bar&quot; normalize-stderr-32bit: &quot;fn\(\) \(32 bits\)&quot; -&gt; &quot;fn\(\) \($$PTR bits\)&quot; normalize-stderr-64bit: &quot;fn\(\) \(64 bits\)&quot; -&gt; &quot;fn\(\) \($$PTR bits\)&quot;</span> normalize-stderr-test： &quot;foo&quot;  - &gt; &quot;bar&quot; normalize-stderr-32bit： &quot;fn \（\）\（32ビット\）&quot;  - &gt; &quot;fn \（\）\（$$ PTRビット） normalize-stderr-64bit： &quot;fn \（\）\（64ビット\）&quot;  - &gt; &quot;fn \（\）\（$$ PTRビット\）&quot;</span> </div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This tells the test, on 32-bit platforms, whenever the compiler writes <code>fn() (32 bits)</code> to stderr, it should be normalized to read <code>fn() ($PTR bits)</code> instead.</span>これは、コンパイラが<code>fn() (32 bits)</code>をstderrに書き込むたびに、代わりに<code>fn() ($PTR bits)</code>を読み取るように正規化する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Similar for 64-bit.</span> 64ビットに似ています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The replacement is performed by regexes using default regex flavor provided by <code>regex</code> crate.</span>置き換えは、 <code>regex</code> crateによって提供されるデフォルト正規表現フレーバを使用して正規表現によって実行されます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The corresponding reference file will use the normalized output to test both 32-bit and 64-bit platforms:</span>対応する参照ファイルは、正規化された出力を使用して、32ビットおよび64ビットの両方のプラットフォームをテストします。</span> </p><br><div data-lang=text><div data-l=...></div><div data-l="   |"></div><div data-l="   = note: source type: fn() ($PTR bits)"></div><div data-l="   = note: target type: u16 (16 bits)"></div><div data-l=...></div></div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Please see <a class=notranslate href=#3mrs><code>ui/transmute/main.rs</code></a> and <a class=notranslate href=#3><code>main.stderr</code></a> for a concrete usage example.</span>具体的な使用例については、 <a class=notranslate href=#3mrs><code>ui/transmute/main.rs</code></a>と<a class=notranslate href=#3><code>main.stderr</code></a>を参照してください。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/transmute/main.rs>mrs</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/transmute/main.stderr>`main.stderr`</a></span> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/transmute/main.rs>mrs</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/test/ui/transmute/main.stderr>`main.stderr`</a></span> <br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Besides <code>normalize-stderr-32bit</code> and <code>-64bit</code> , one may use any target information or stage supported by <code>ignore-X</code> here as well (eg <code>normalize-stderr-windows</code> or simply <code>normalize-stderr-test</code> for unconditional replacement).</span> <code>normalize-stderr-32bit</code>と<code>-64bit</code> 、ここでも<code>ignore-X</code>でサポートされているターゲット情報やステージを使用することができます（例： <code>normalize-stderr-windows</code>または無条件置換の<code>normalize-stderr-test</code> ）。</span> </p><script>_addload(function(){_setupIW('com');_csi('en','ja','adding.html');});</script>