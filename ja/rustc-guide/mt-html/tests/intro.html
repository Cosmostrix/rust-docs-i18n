<!DOCTYPE html><html lang=ja-x-mtfrom-en><head><script>(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="https://translate.googleusercontent.com/translate/releases/twsfe_w_20180723_RC00/r/js/translate_c.js"></script><script>_intlStrings._originalText = "英語の原文テキスト:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|ja";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="%1$s に %2$s により翻訳されました";_intlStrings._unknown="不明";_intlStrings._suggestTranslation="翻訳を改善する"  ;_intlStrings._submit="送信";_intlStrings._suggestThanks="Google 翻訳の改善にご協力いただきありがとうございました。";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href=intro.html hreflang=en rel="alternate machine-translated-from"><base href="" target=_top /></head><body><iframe src="https://translate.google.com/translate_un?hl=ja&prev=_t&sl=en&tl=ja&lang=en&usg=ALkJrhi1BDLmdbWiRXYMNxkaJ7TdmUrvmA" width=0 height=0 frameborder=0 style="width:0px;height:0px;border:0px;display:none;"></iframe><h1> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The compiler testing framework</span>コンパイラテストフレームワーク</span> </h1><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Rust project runs a wide variety of different tests, orchestrated by the build system ( <code>x.py test</code> ).</span> Rustプロジェクトは、さまざまな異なるテストを実行し、ビルドシステム（ <code>x.py test</code> ）によって調整されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The main test harness for testing the compiler itself is a tool called compiletest (sources in the <a class=notranslate href="#4`src/tools/compiletest`">`src/tools/compiletest`</a> ).</span>コンパイラ自体をテストするための主なテストハーネスは、compiletestというツールです（ <a class=notranslate href="#4`src/tools/compiletest`">`src/tools/compiletest`</a> ）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This section gives a brief overview of how the testing framework is setup, and then gets into some of the details on <a href=#2./tests/running.html#ui>how to run tests</a> as well as <a href=#2./tests/adding.html>how to add new tests</a> .</span>このセクションでは、テストフレームワークの設定方法の概要を説明し、次に<a href=#2./tests/running.html#ui>テストを実行する</a> <a href=#2./tests/adding.html>方法と新しいテストを追加する</a> <a href=#2./tests/running.html#ui>方法</a>の詳細をいくつか取り上げ<a href=#2./tests/adding.html>ます</a> 。</span> </p><br> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/compiletest>`src/tools/compiletest`</a> <br> <h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Compiletest test suites</span> Compiletestテストスイート</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The compiletest tests are located in the tree in the <a class=notranslate href="#4`src/test`">`src/test`</a> directory.</span> compiletestテストはツリーの<a class=notranslate href="#4`src/test`">`src/test`</a>ディレクトリにあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Immediately within you will see a series of subdirectories (eg <code>ui</code> , <code>run-make</code> , and so forth).</span>すぐに一連のサブディレクトリ（たとえば、 <code>ui</code> 、 <code>run-make</code>など）が表示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Each of those directories is called a <b>test suite</b> – they house a group of tests that are run in a distinct mode.</span>これらのディレクトリのそれぞれは、 <b>テストスイート</b>と呼ばれ、異なるモードで実行される一連のテストを格納します。</span> </p><br> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/test>`src/test`</a> <br> <p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Here is a brief summary of the test suites as of this writing and what they mean.</span>ここに、この執筆時点でのテストスイートの概要とその意味を示します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In some cases, the test suites are linked to parts of the manual that give more details.</span>場合によっては、テストスイートはマニュアルの一部にリンクされています。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#2./tests/adding.html#ui><code>ui</code></a> – tests that check the exact stdout/stderr from compilation and/or running the test</span> <a class=notranslate href=#2./tests/adding.html#ui><code>ui</code></a> - コンパイルからの正確なstdout / stderrを確認するテスト、および/またはテストを実行するテスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>run-pass</code> – tests that are expected to compile and execute successfully (no panics)</span> <code>run-pass</code> - 正常にコンパイルされて実行されると予想されるテスト（パニックは発生しません）</span> </div><div data-b="  -"> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>run-pass-valgrind</code> – tests that ought to run with valgrind</span> <code>run-pass-valgrind</code> - <code>run-pass-valgrind</code>テスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>run-fail</code> – tests that are expected to compile but then panic during execution</span> <code>run-fail</code> - コンパイルが予想されるが実行中にパニックするテスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>compile-fail</code> – tests that are expected to fail compilation.</span> <code>compile-fail</code> - <code>compile-fail</code>予想されるテスト。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>parse-fail</code> – tests that are expected to fail to parse</span> <code>parse-fail</code> - <code>parse-fail</code>予想されるテスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>pretty</code> – tests targeting the Rust &quot;pretty printer&quot;, which generates valid Rust code from the AST</span> <code>pretty</code> -  ASTから有効なRustコードを生成するRust &quot;pretty printer&quot;をターゲットにしたテスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>debuginfo</code> – tests that run in gdb or lldb and query the debug info</span> <code>debuginfo</code> -  gdbまたはlldbで実行され、デバッグ情報を照会するテスト</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>codegen</code> – tests that compile and then test the generated LLVM code to make sure that the optimizations we want are taking effect.</span> <code>codegen</code> - 生成されたLLVMコードをコンパイルしてテストし、必要な最適化が有効になっていることを確認します。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>mir-opt</code> – tests that check parts of the generated MIR to make sure we are building things correctly or doing the optimizations we expect.</span> <code>mir-opt</code> - 生成されたMIRの一部をチェックして、物事を正しく構築していることを確認したり、期待される最適化を行ったりすることをテストし<code>mir-opt</code> 。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>incremental</code> – tests for incremental compilation, checking that when certain modifications are performed, we are able to reuse the results from previous compilations.</span> <code>incremental</code> - インクリメンタルコンパイルのテストで、特定の変更が行われたときに以前のコンパイルの結果を再利用できることを確認します。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>run-make</code> – tests that basically just execute a <code>Makefile</code> ;</span> <code>run-make</code> - 基本的には<code>Makefile</code>実行するテスト。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the ultimate in flexibility but quite annoying to write.</span>柔軟性は究極ですが、書くのは非常に面倒です。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>rustdoc</code> – tests for rustdoc, making sure that the generated files contain the expected documentation.</span> <code>rustdoc</code> - <code>rustdoc</code>テストし、生成されたファイルに期待されるドキュメントが含まれていることを確認します。</span> </div><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>*-fulldeps</code> – same as above, but indicates that the test depends on things other than <code>libstd</code> (and hence those things must be built)</span> <code>*-fulldeps</code> - 上記と同じですが、テストが<code>libstd</code>以外のものに依存していることを示しています（したがって、 <code>libstd</code>する必要があります）</span> </div><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Other Tests</span>その他のテスト</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Rust build system handles running tests for various other things, including:</span> Rustビルドシステムは、次のようなさまざまなテストの実行を処理します。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Tidy</b> – This is a custom tool used for validating source code style and formatting conventions, such as rejecting long lines.</span> <b>Tidy</b> - これは、長い行を拒否するなどのソースコードスタイルと書式設定規則を検証するために使用されるカスタムツールです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is more information in the <a href=#2./conventions.html#formatting>section on coding conventions</a> .</span> <a href=#2./conventions.html#formatting>コーディング規則に関するセクションに</a>は、より多くの情報があります。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Example: <code>./x.py test src/tools/tidy</code></span>例： <code>./x.py test src/tools/tidy</code></span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Unit tests</b> – The Rust standard library and many of the Rust packages include typical Rust <code>#[test]</code> unittests.</span> <b>ユニットテスト</b> -  Rust標準ライブラリと多くのRustパッケージには、典型的なRust <code>#[test]</code> <b>ユニットテストが</b>含まれています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Under the hood, <code>x.py</code> will run <code>cargo test</code> on each package to run all the tests.</span>フードの下で、 <code>x.py</code>はすべてのテストを実行する<code>cargo test</code>に各パッケージに対して<code>cargo test</code>を実行します。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Example: <code>./x.py test src/libstd</code></span>例： <code>./x.py test src/libstd</code></span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Doc tests</b> – Example code embedded within Rust documentation is executed via <code>rustdoc --test</code> .</span> <b>Docテスト</b> -  Rustドキュメントに埋め込まれているサンプルコードは<code>rustdoc --test</code>実行されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Examples:</span>例：</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>./x.py test src/doc</code> – Runs <code>rustdoc --test</code> for all documentation in <code>src/doc</code> .</span> <code>./x.py test src/doc</code> - <code>src/doc</code>内のすべてのドキュメントに対して<code>rustdoc --test</code> - <code>./x.py test src/doc</code>実行します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>./x.py test --doc src/libstd</code> – Runs <code>rustdoc --test</code> on the standard library.</span> <code>./x.py test --doc src/libstd</code> -実行<code>rustdoc --test</code>標準ライブラリ上を。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Link checker</b> – A small tool for verifying <code>href</code> links within documentation.</span> <b>リンクチェッカー</b> - ドキュメント内の<code>href</code>リンクを確認するための小さなツールです。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Example: <code>./x.py test src/tools/linkchecker</code></span>例： <code>./x.py test src/tools/linkchecker</code></span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Dist check</b> – This verifies that the source distribution tarball created by the build system will unpack, build, and run all tests.</span> <b>Dist check</b> - ビルドシステムで作成されたソース配布用のtarballが、すべてのテストを展開してビルドして実行することを確認します。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Example: <code>./x.py test distcheck</code></span>例： <code>./x.py test distcheck</code></span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Tool tests</b> – Packages that are included with Rust have all of their tests run as well (typically by running <code>cargo test</code> within their directory).</span> <b>ツールテスト</b> -  Rustに含まれるパッケージには、すべてのテストが実行されます（通常、ディレクトリ内で<code>cargo test</code>実行します）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This includes things such as cargo, clippy, rustfmt, rls, miri, bootstrap (testing the Rust build system itself), etc.</span>これには、貨物、clippy、rustfmt、rls、miri、bootstrap（Rustビルドシステム自体のテスト）などが含まれます。</span> </div><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><b>Cargo test</b> – This is a small tool which runs <code>cargo test</code> on a few significant projects (such as <code>servo</code> , <code>ripgrep</code> , <code>tokei</code> , etc.) just to ensure there aren&#39;t any significant regressions.</span> <b>カーゴテスト</b> - これは、重大な後退がないことを保証するために、いくつかの重要なプロジェクト（ <code>servo</code> 、 <code>ripgrep</code> 、 <code>tokei</code>など）で<code>cargo test</code>を実行する小さなツールです。</span> </div><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Example: <code>./x.py test src/tools/cargotest</code></span>例： <code>./x.py test src/tools/cargotest</code></span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Testing infrastructure</span>インフラストラクチャのテスト</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When a Pull Request is opened on Github, <a class=notranslate href=#4Travis>Travis</a> will automatically launch a build that will run all tests on a single configuration (x86-64 linux).</span> Githubでプルリクエストを開くと、 <a class=notranslate href=#4Travis>Travis</a>は自動的に単一の設定（x86-64 linux）ですべてのテストを実行するビルドを起動します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">In essence, it runs <code>./x.py test</code> after building.</span>本質的に、 <code>./x.py test</code>後に<code>./x.py test</code>を実行します。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The integration bot <a class=notranslate href=#4bors>bors</a> is used for coordinating merges to the master branch.</span>統合ボット<a class=notranslate href=#4bors>bors</a>は、マスターブランチへのマージを調整するために使用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When a PR is approved, it goes into a <a class=notranslate href=#4queue>queue</a> where merges are tested one at a time on a wide set of platforms using Travis and <a class=notranslate href=#4Appveyor>Appveyor</a> (currently over 50 different configurations).</span> PRが承認されると、それはに入る<a class=notranslate href=#4queue>queue</a>マージはトラヴィスと使用のプラットフォームの広いセットに一度に一つのテストをしている<a class=notranslate href=#4Appveyor>Appveyor</a> （現在、50以上の異なる構成を）。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Most platforms only run the build steps, some run a restricted set of tests, only a subset run the full suite of tests (see Rust&#39;s <a class=notranslate href="#4platform tiers">platform tiers</a> ).</span>ほとんどのプラットフォームはビルドステップのみを実行し、一部は制限されたテストセットを実行し、一部のセットはすべてのテストを実行します（Rustの<a class=notranslate href="#4platform tiers">platform tiers</a>参照）。</span> </p><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://travis-ci.org/rust-lang/rust>Travis</a> <a class=notranslate href=#1https://github.com/servo/homu>bors</a> <a class=notranslate href=#1https://buildbot2.rust-lang.org/homu/queue/rust>queue</a> <a class=notranslate href=#1https://ci.appveyor.com/project/rust-lang/rust>Appveyor</a> <a class=notranslate href=#1https://forge.rust-lang.org/platform-support.html>platform tiers</a></span> <a class=notranslate href=#1https://travis-ci.org/rust-lang/rust>Travis</a> <a class=notranslate href=#1https://github.com/servo/homu>bors</a> <a class=notranslate href=#1https://buildbot2.rust-lang.org/homu/queue/rust>queue</a> <a class=notranslate href=#1https://ci.appveyor.com/project/rust-lang/rust>Appveyor</a> <a class=notranslate href=#1https://forge.rust-lang.org/platform-support.html>platform tiers</a></span> <br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Testing with Docker images</span> Dockerイメージによるテスト</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Rust tree includes <a class=notranslate href=#4Docker>Docker</a> image definitions for the platforms used on Travis in <a class=notranslate href=#4src/ci/docker>src/ci/docker</a> .</span> Rustツリーには、 <a class=notranslate href=#4src/ci/docker>src/ci/docker</a> Travisで使用されるプラットフォーム用の<a class=notranslate href=#4Docker>Docker</a>イメージ定義が含まれています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The script <a class=notranslate href=#4src/ci/docker/run.sh>src/ci/docker/run.sh</a> is used to build the Docker image, run it, build Rust within the image, and run the tests.</span>スクリプト<a class=notranslate href=#4src/ci/docker/run.sh>src/ci/docker/run.sh</a>は、Dockerイメージを構築し、実行し、イメージ内にRustを構築し、テストを実行するために使用されます。</span> </p><br><blockquote><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">TODO: What is a typical workflow for testing/debugging on a platform that you don&#39;t have easy access to?</span> TODO：簡単にアクセスできないプラットフォームでのテスト/デバッグの典型的なワークフローは何ですか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Do people build Docker images and enter them to test things out?</span>人々はDockerの画像を作成し、それを入力して物事をテストしますか？</span> </p></blockquote><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://www.docker.com/>Docker</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/ci/docker>src/ci/docker</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/ci/docker/run.sh>src/ci/docker/run.sh</a></span> <a class=notranslate href=#1https://www.docker.com/>Docker</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/ci/docker>src/ci/docker</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/blob/master/src/ci/docker/run.sh>src/ci/docker/run.sh</a></span> <br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Testing on emulators</span>エミュレータでのテスト</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Some platforms are tested via an emulator for architectures that aren&#39;t readily available.</span>一部のプラットフォームは、容易に入手できないアーキテクチャ用のエミュレータを介してテストされています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is a set of tools for orchestrating running the tests within the emulator.</span>エミュレータ内でテストを実行するための一連のツールが用意されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Platforms such as <code>arm-android</code> and <code>arm-unknown-linux-gnueabihf</code> are set up to automatically run the tests under emulation on Travis.</span> <code>arm-android</code>や<code>arm-unknown-linux-gnueabihf</code>などの<code>arm-unknown-linux-gnueabihf</code>は、Travis上のエミュレーション下でテストを自動的に実行するように設定されています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The following will take a look at how a target&#39;s tests are run under emulation.</span>以下では、ターゲットのテストがどのようにエミュレーションで実行されるかを見ていきます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Docker image for <a class=notranslate href=#4armhf-gnu>armhf-gnu</a> includes <a class=notranslate href=#4QEMU>QEMU</a> to emulate the ARM CPU architecture.</span> <a class=notranslate href=#4armhf-gnu>armhf-gnu</a>のDockerイメージには、ARM CPUアーキテクチャをエミュレートする<a class=notranslate href=#4QEMU>QEMU</a>が含まれています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Included in the Rust tree are the tools <a class=notranslate href=#4remote-test-client>remote-test-client</a> and <a class=notranslate href=#4remote-test-server>remote-test-server</a> which are programs for sending test programs and libraries to the emulator, and running the tests within the emulator, and reading the results.</span> Rustツリーには、テストプログラムやライブラリをエミュレータに送信し、エミュレータ内でテストを実行し、結果を読み取るためのツールである<a class=notranslate href=#4remote-test-client>remote-test-client</a>および<a class=notranslate href=#4remote-test-server>remote-test-server</a>ツールが含まれています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The Docker image is set up to launch <code>remote-test-server</code> and the build tools use <code>remote-test-client</code> to communicate with the server to coordinate running tests (see <a class=notranslate href=#4src/bootstrap/test.rs>src/bootstrap/test.rs</a> ).</span> Dockerイメージは<code>remote-test-server</code>を起動するようにセットアップされ、ビルドツールは<code>remote-test-client</code>を使用してサーバーと通信し、実行中のテストを調整します（ <a class=notranslate href=#4src/bootstrap/test.rs>src/bootstrap/test.rs</a>参照）。</span> </p><br><blockquote><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">TODO: What are the steps for manually running tests within an emulator?</span> TODO：エミュレータ内で手動でテストを実行する手順は何ですか？</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><code>./src/ci/docker/run.sh armhf-gnu</code> will do everything, but takes hours to run and doesn&#39;t offer much help with interacting within the emulator.</span> <code>./src/ci/docker/run.sh armhf-gnu</code>はすべてを行いますが、実行に時間がかかり、エミュレータ内でのやりとりに多くの助けをしません。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Is there any support for emulating other (non-Android) platforms, such as running on an iOS emulator?</span> iOSエミュレータでの実行など、他の（Android以外の）プラットフォームをエミュレートするサポートはありますか？</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Is there anything else interesting that can be said here about running tests remotely on real hardware?</span>実際のハードウェア上でリモートでテストを実行することについてここで言える面白いことがありますか？</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It&#39;s also unclear to me how the wasm or asm.js tests are run.</span> wasmまたはasm.jsテストがどのように実行されるかは、私には不明です。</span> </p></blockquote><br> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/ci/docker/armhf-gnu>armhf-gnu</a> <a class=notranslate href=#1https://www.qemu.org/>QEMU</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/remote-test-client>remote-test-client</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/remote-test-server>remote-test-server</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/bootstrap/test.rs>src/bootstrap/test.rs</a></span> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/ci/docker/armhf-gnu>armhf-gnu</a> <a class=notranslate href=#1https://www.qemu.org/>QEMU</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/remote-test-client>remote-test-client</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/tools/remote-test-server>remote-test-server</a> <a class=notranslate href=#1https://github.com/rust-lang/rust/tree/master/src/bootstrap/test.rs>src/bootstrap/test.rs</a></span> <br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Crater</span>クレーター</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left"><a class=notranslate href=#2https://github.com/rust-lang-nursery/crater>Crater</a> is a tool for compiling and running tests for <s>every</s> crate on <a class=notranslate href=#2https://crates.io/>crates.io</a> (and a few on GitHub).</span> <a class=notranslate href=#2https://github.com/rust-lang-nursery/crater>Crater</a>は<a class=notranslate href=#2https://crates.io/>crates.io</a> （およびGitHubのいくつか）の<s>すべての</s>クレートのテストをコンパイルおよび実行するためのツールです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">It is mainly used for checking for extent of breakage when implementing potentially breaking changes and ensuring lack of breakage by running beta vs stable compiler versions.</span>これは主に、潜在的に破損している変更を実装する際に破損の程度をチェックし、安定版コンパイラバージョンとベータ版を実行することによって破損がないことを保証するために使用されます。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">When to run Crater</span>クレーターを実行するタイミング</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You should request a crater run if your PR makes large changes to the compiler or could cause breakage.</span> PRがコンパイラに大きな変更を加えた場合、または破損の原因となる可能性がある場合は、クレーター実行を要求する必要があります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If you are unsure, feel free to ask your PR&#39;s reviewer.</span>あなたが不明な場合は、PRの査読者にお気軽にお問い合わせください。</span> </p><br><h3> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Requesting Crater Runs</span>クレーターランの要求</span> </h3><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The rust team maintains a few machines that can be used for running crater runs on the changes introduced by a PR.</span>錆のチームは、PRによって導入された変更にクレーターランを実行するために使用できるいくつかのマシンを維持しています。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If your PR needs a crater run, leave a comment for the triage team in the PR thread.</span>あなたのPRにクレーターが必要な場合は、PRスレッドにトリアージチームのコメントを残してください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Please inform the team whether you require a &quot;check-only&quot; crater run, a &quot;build only&quot; crater run, or a &quot;build-and-test&quot; crater run.</span> 「チェックのみ」のクレーターラン、「ビルドのみ」のクレーターラン、または「ビルドアンドテスト」のクレーターランが必要かどうかをチームに知らせてください。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The difference is primarily in time;</span>その違いは主に時間的なものです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">the conservative (if you&#39;re not sure) option is to go for the build-and-test run.</span>保守的な（あなたがわからない場合）オプションはビルドアンドテストの実行に向かうことです。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">If making changes that will only have an effect at compile-time (eg, implementing a new trait) then you only need a check run.</span>コンパイル時に変更を加えるだけの場合（例えば、新しい特性を実装する場合）、チェックを実行するだけです。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Your PR will be enqueued by the triage team and the results will be posted when they are ready.</span>あなたのPRはトリアージチームによってエンキューされ、結果が準備ができたら掲示されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Check runs will take around ~3-4 days, with the other two taking 5-6 days on average.</span>チェックランは約3-4日かかり、他の2人は平均5-6日かかります。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">While crater is really useful, it is also important to be aware of a few caveats:</span>クレーターは本当に便利ですが、いくつかの点に注意することも重要です。</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Not all code is on crates.io!</span>すべてのコードがcrates.ioにあるわけではありません！</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">There is a lot of code in repos on GitHub and elsewhere.</span> GitHubや他の場所でreposにはたくさんのコードがあります。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Also, companies may not wish to publish their code.</span>また、企業はコードを公開したくないかもしれません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Thus, a successful crater run is not a magically green light that there will be no breakage;</span>したがって、成功したクレーター・ランは、魔法の緑色の光ではなく、破損することはありません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">you still need to be careful.</span>あなたはまだ注意する必要があります。</span> </div><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Crater only runs Linux builds on x86_64.</span> Craterはx86_64上でのみLinuxビルドを実行します。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Thus, other architectures and platforms are not tested.</span>したがって、他のアーキテクチャおよびプラットフォームはテストされません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Critically, this includes Windows.</span>クリティカルには、これにはWindowsも含まれます。</span> </div><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Many crates are not tested.</span>多くの箱は試験されていません。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This could be for a lot of reasons, including that the crate doesn&#39;t compile any more (eg used old nightly features), has broken or flaky tests, requires network access, or other reasons.</span>これは、クレートがもうコンパイルされない（古い夜間の機能を使用するなど）、テストが壊れているか、薄れている、ネットワークアクセスが必要な、その他の理由など、さまざまな理由が考えられます。</span> </div><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Before crater can be run, <code>@bors try</code> needs to succeed in building artifacts.</span>クレーターを実行する前に、 <code>@bors try</code>成果物を構築することに成功する必要性を。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">This means that if your code doesn&#39;t compile, you cannot run crater.</span>つまり、コードがコンパイルされなければ、クレーターを実行することはできません。</span> </div><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Perf runs</span>実行回数</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A lot of work is put into improving the performance of the compiler and preventing performance regressions.</span>コンパイラのパフォーマンスを向上させ、パフォーマンスの低下を防ぐために多くの作業が行われます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">A &quot;perf run&quot; is used to compare the performance of the compiler in different configurations for a large collection of popular crates.</span> &quot;perf run&quot;は、さまざまな構成のコンパイラのパフォーマンスを、人気のあるクレートの大量のコレクションと比較するために使用されます。</span> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Different configurations include &quot;fresh builds&quot;, builds with incremental compilation, etc.</span>異なる構成には、「新鮮なビルド」、インクリメンタルコンパイルによるビルドなどが含まれます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The result of a perf run is a comparison between two versions of the compiler (by their commit hashes).</span> perf実行の結果、2つのバージョンのコンパイラ（コミットハッシュによる）の比較が行われます。</span> </p><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">You should request a perf run if your PR may affect performance, especially if it can affect performance adversely.</span> PRがパフォーマンスに影響を及ぼす可能性がある場合は、特にパフォーマンスに悪影響を与える可能性がある場合は、perf実行をリクエストする必要があります。</span> </p><br><h2> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">Further reading</span>参考文献</span> </h2><br><p> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">The following blog posts may also be of interest:</span>以下のブログ記事も興味深いかもしれません：</span> </p><br><div data-b=-> <span class="notranslate" onmouseover="_tipon(this)" onmouseout="_tipoff()"><span class="google-src-text" style="direction: ltr; text-align: left">brson&#39;s classic <a href=#3howtest>&quot;How Rust is tested&quot;</a></span> brsonの古典的な<a href=#3howtest>&quot;どのように錆がテストされている&quot;</a></span> </div><br> <a class=notranslate href=#1https://brson.github.io/2017/07/10/how-rust-is-tested>howtest</a><script>_addload(function(){_setupIW('com');_csi('en','ja','intro.html');});</script>