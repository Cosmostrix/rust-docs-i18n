<!DOCTYPE html>
<h1>pointers/ref</h1>
<br>
<p>For pointers, a distinction needs to be made between destructuring
and dereferencing as they are different concepts which are used
differently from a language like <code>C</code>.</p>
<br>
<div data-b=" *">Dereferencing uses <code>*</code></div>
<div data-b=" *">Destructuring uses <code>&amp;</code>, <code>ref</code>, and <code>ref mut</code></div>
<br>
<div data-lang="rust,editable"><div data-l="fn main() {"></div><div data-l="#    // Assign a reference of type `i32`. The `&amp;` signifies there"></div><div data-l="#    // is a reference being assigned."></div><div data-l="    // ">Assign a reference of type <code>i32</code>. The <code>&amp;</code> signifies there is a reference being assigned.</div><div data-l="    let reference = &amp;4;"></div><div data-l=""></div><div data-l="    match reference {"></div><div data-l="#        // If `reference`s is pattern matched against `&amp;val`, it results"></div><div data-l="#        // in a comparison like:"></div><div data-l="#        // `&amp;i32`"></div><div data-l="#        // `&amp;val`"></div><div data-l="#        // ^ We see that if the matching `&amp;`s are dropped, then the `i32`"></div><div data-l="#        // should be assigned to `val`."></div><div data-l="        // ">If <code>reference</code>s is pattern matched against <code>&amp;val</code>, it results in a comparison like: <code>&amp;i32</code> <code>&amp;val</code> ^ We see that if the matching <code>&amp;</code>s are dropped, then the <code>i32</code> should be assigned to <code>val</code>.</div><div data-l="        &amp;val =&gt; println!(&quot;Got a value via destructuring: {:?}&quot;, val),"></div><div data-l="    }"></div><div data-l=""></div><div data-l="#    // To avoid the `&amp;`, you dereference before matching."></div><div data-l="    // ">To avoid the <code>&amp;</code>, you dereference before matching.</div><div data-l="    match *reference {"></div><div data-l="        val =&gt; println!(&quot;Got a value via dereferencing: {:?}&quot;, val),"></div><div data-l="    }"></div><div data-l=""></div><div data-l="#    // What if you don't start with a reference? `reference` was a `&amp;`"></div><div data-l="#    // because the right side was already a reference. This is not"></div><div data-l="#    // a reference because the right side is not one."></div><div data-l="    // ">What if you don't start with a reference? <code>reference</code> was a <code>&amp;</code> because the right side was already a reference. This is not a reference because the right side is not one.</div><div data-l="    let _not_a_reference = 3;"></div><div data-l=""></div><div data-l="#    // Rust provides `ref` for exactly this purpose. It modifies the"></div><div data-l="#    // assignment so that a reference is created for the element; this"></div><div data-l="#    // reference is assigned."></div><div data-l="    // ">Rust provides <code>ref</code> for exactly this purpose. It modifies the assignment so that a reference is created for the element; this reference is assigned.</div><div data-l="    let ref _is_a_reference = 3;"></div><div data-l=""></div><div data-l="#    // Accordingly, by defining 2 values without references, references"></div><div data-l="#    // can be retrieved via `ref` and `ref mut`."></div><div data-l="    // ">Accordingly, by defining 2 values without references, references can be retrieved via <code>ref</code> and <code>ref mut</code>.</div><div data-l="    let value = 5;"></div><div data-l="    let mut mut_value = 6;"></div><div data-l=""></div><div data-l="#    // Use `ref` keyword to create a reference."></div><div data-l="    // ">Use <code>ref</code> keyword to create a reference.</div><div data-l="    match value {"></div><div data-l="        ref r =&gt; println!(&quot;Got a reference to a value: {:?}&quot;, r),"></div><div data-l="    }"></div><div data-l=""></div><div data-l="#    // Use `ref mut` similarly."></div><div data-l="    // ">Use <code>ref mut</code> similarly.</div><div data-l="    match mut_value {"></div><div data-l="        ref mut m =&gt; {"></div><div data-l="#            // Got a reference. Gotta dereference it before we can"></div><div data-l="#            // add anything to it."></div><div data-l="            // ">Got a reference. Gotta dereference it before we can add anything to it.</div><div data-l="            *m += 10;"></div><div data-l="            println!(&quot;We added 10. `mut_value`: {:?}&quot;, m);"></div><div data-l="        },"></div><div data-l="    }"></div><div data-l="}"></div></div>