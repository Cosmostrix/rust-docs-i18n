<!DOCTYPE html>
<h1>New Type Idiom</h1>
<br>
<p>The <code>newtype</code> idiom gives compile time guarantees that the right type of value is supplied
to a program.</p>
<br>
<p>For example, an age verification function that checks age in years, <i>must</i> be given
a value of type <code>Years</code>.</p>
<br>
<div data-lang="rust, editable"><div data-l="struct Years(i64);"></div><div data-l=""></div><div data-l="struct Days(i64);"></div><div data-l=""></div><div data-l="impl Years {"></div><div data-l="    pub fn to_days(&amp;self) -&gt; Days {"></div><div data-l="        Days(self.0 * 365)"></div><div data-l="    }"></div><div data-l="}"></div><div data-l=""></div><div data-l=""></div><div data-l="impl Days {"></div><div data-l="#//    /// truncates partial years"></div><div data-l="    /// ">truncates partial years</div><div data-l="    pub fn to_years(&amp;self) -&gt; Years {"></div><div data-l="        Years(self.0 / 365)"></div><div data-l="    }"></div><div data-l="}"></div><div data-l=""></div><div data-l="fn old_enough(age: &amp;Years) -&gt; bool {"></div><div data-l="    age.0 &gt;= 18"></div><div data-l="}"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="    let age = Years(5);"></div><div data-l="    let age_days = age.to_days();"></div><div data-l="    println!(&quot;Old enough {}&quot;, old_enough(&amp;age));"></div><div data-l="    println!(&quot;Old enough {}&quot;, old_enough(&amp;age_days.to_years()));"></div><div data-l="#    // println!(&quot;Old enough {}&quot;, old_enough(&amp;age_days));"></div><div data-l="    // ">println!(&quot;Old enough {}&quot;, old_enough(&amp;age_days));</div><div data-l="}"></div></div>
<br>
<p>Uncomment the last print statement to observe that the type supplied must be <code>Years</code>.</p>
<br>
<h3>See also:</h3>
<br>
<p><a class="notranslate" href="#3struct"><code>structs</code></a></p>
<br>
<a class="notranslate" href="#1custom_types/structs.html">struct</a>
<br>