<!DOCTYPE html>
<h1>Iterators</h1>
<br>
<p>The <a class="notranslate" href="#3iter"><code>Iterator</code></a> trait is used to implement iterators over collections such as arrays.</p>
<br>
<p>The trait requires only a method to be defined for the <code>next</code> element, 
which may be manually defined in an <code>impl</code> block or automatically 
defined (as in arrays and ranges).</p>
<br>
<p>As a point of convenience for common situations, the <code>for</code> construct 
turns some collections into iterators using the <a class="notranslate" href="#3intoiter"><code>.into_iterator()</code></a> method.</p>
<br>
<div data-lang="rust,editable"><div data-l="struct Fibonacci {"></div><div data-l="    curr: u32,"></div><div data-l="    next: u32,"></div><div data-l="}"></div><div data-l=""></div><div data-l="#// Implement `Iterator` for `Fibonacci`."></div><div data-l="#// The `Iterator` trait only requires a method to be defined for the `next` element."></div><div data-l="// ">Implement <code>Iterator</code> for <code>Fibonacci</code>. The <code>Iterator</code> trait only requires a method to be defined for the <code>next</code> element.</div><div data-l="impl Iterator for Fibonacci {"></div><div data-l="    type Item = u32;"></div><div data-l="    "></div><div data-l="#    // Here, we define the sequence using `.curr` and `.next`."></div><div data-l="#    // The return type is `Option&lt;T&gt;`:"></div><div data-l="#    //     * When the `Iterator` is finished, `None` is returned."></div><div data-l="#    //     * Otherwise, the next value is wrapped in `Some` and returned."></div><div data-l="    // ">Here, we define the sequence using <code>.curr</code> and <code>.next</code>. The return type is <code>Option&lt;T&gt;</code>:     * When the <code>Iterator</code> is finished, <code>None</code> is returned.     * Otherwise, the next value is wrapped in <code>Some</code> and returned.</div><div data-l="    fn next(&amp;mut self) -&gt; Option&lt;u32&gt; {"></div><div data-l="        let new_next = self.curr + self.next;"></div><div data-l=""></div><div data-l="        self.curr = self.next;"></div><div data-l="        self.next = new_next;"></div><div data-l=""></div><div data-l="#        // Since there's no endpoint to a Fibonacci sequence, the `Iterator` "></div><div data-l="#        // will never return `None`, and `Some` is always returned."></div><div data-l="        // ">Since there's no endpoint to a Fibonacci sequence, the <code>Iterator</code>  will never return <code>None</code>, and <code>Some</code> is always returned.</div><div data-l="        Some(self.curr)"></div><div data-l="    }"></div><div data-l="}"></div><div data-l=""></div><div data-l="#// Returns a Fibonacci sequence generator"></div><div data-l="// ">Returns a Fibonacci sequence generator</div><div data-l="fn fibonacci() -&gt; Fibonacci {"></div><div data-l="    Fibonacci { curr: 1, next: 1 }"></div><div data-l="}"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#    // `0..3` is an `Iterator` that generates: 0, 1, and 2."></div><div data-l="    // "><code>0..3</code> is an <code>Iterator</code> that generates: 0, 1, and 2.</div><div data-l="    let mut sequence = 0..3;"></div><div data-l=""></div><div data-l="    println!(&quot;Four consecutive `next` calls on 0..3&quot;);"></div><div data-l="    println!(&quot;&gt; {:?}&quot;, sequence.next());"></div><div data-l="    println!(&quot;&gt; {:?}&quot;, sequence.next());"></div><div data-l="    println!(&quot;&gt; {:?}&quot;, sequence.next());"></div><div data-l="    println!(&quot;&gt; {:?}&quot;, sequence.next());"></div><div data-l=""></div><div data-l="#    // `for` works through an `Iterator` until it returns `None`."></div><div data-l="#    // Each `Some` value is unwrapped and bound to a variable (here, `i`)."></div><div data-l="    // "><code>for</code> works through an <code>Iterator</code> until it returns <code>None</code>. Each <code>Some</code> value is unwrapped and bound to a variable (here, <code>i</code>).</div><div data-l="    println!(&quot;Iterate through 0..3 using `for`&quot;);"></div><div data-l="    for i in 0..3 {"></div><div data-l="        println!(&quot;&gt; {}&quot;, i);"></div><div data-l="    }"></div><div data-l=""></div><div data-l="#    // The `take(n)` method reduces an `Iterator` to its first `n` terms."></div><div data-l="    // ">The <code>take(n)</code> method reduces an <code>Iterator</code> to its first <code>n</code> terms.</div><div data-l="    println!(&quot;The first four terms of the Fibonacci sequence are: &quot;);"></div><div data-l="    for i in fibonacci().take(4) {"></div><div data-l="        println!(&quot;&gt; {}&quot;, i);"></div><div data-l="    }"></div><div data-l=""></div><div data-l="#    // The `skip(n)` method shortens an `Iterator` by dropping its first `n` terms."></div><div data-l="    // ">The <code>skip(n)</code> method shortens an <code>Iterator</code> by dropping its first <code>n</code> terms.</div><div data-l="    println!(&quot;The next four terms of the Fibonacci sequence are: &quot;);"></div><div data-l="    for i in fibonacci().skip(4).take(4) {"></div><div data-l="        println!(&quot;&gt; {}&quot;, i);"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    let array = [1u32, 3, 3, 7];"></div><div data-l=""></div><div data-l="#    // The `iter` method produces an `Iterator` over an array/slice."></div><div data-l="    // ">The <code>iter</code> method produces an <code>Iterator</code> over an array/slice.</div><div data-l="    println!(&quot;Iterate the following array {:?}&quot;, &amp;array);"></div><div data-l="    for i in array.iter() {"></div><div data-l="        println!(&quot;&gt; {}&quot;, i);"></div><div data-l="    }"></div><div data-l="}"></div></div>
<br>
<a class="notranslate" href="#1https://doc.rust-lang.org/std/iter/trait.IntoIterator.html">intoiter</a>
<a class="notranslate" href="#1https://doc.rust-lang.org/core/iter/trait.Iterator.html">iter</a>