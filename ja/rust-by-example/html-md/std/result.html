<!DOCTYPE html>
<h1><code>Result</code></h1>
<br>
<p>We've seen that the <code>Option</code> enum can be used as a return value from functions
that may fail, where <code>None</code> can be returned to indicate failure. However,
sometimes it is important to express <i>why</i> an operation failed. To do this we 
have the <code>Result</code> enum.</p>
<br>
<p>The <code>Result&lt;T, E&gt;</code> enum has two variants:</p>
<br>
<div data-b="*"><code>Ok(value)</code> which indicates that the operation succeeded, and wraps the
<code>value</code> returned by the operation. (<code>value</code> has type <code>T</code>)</div>
<div data-b="*"><code>Err(why)</code>, which indicates that the operation failed, and wraps <code>why</code>,
which (hopefully) explains the cause of the failure. (<code>why</code> has type <code>E</code>)</div>
<br>
<div data-lang="rust,editable,ignore,mdbook-runnable"><div data-l="mod checked {"></div><div data-l="#    // Mathematical &quot;errors&quot; we want to catch"></div><div data-l="    // ">Mathematical &quot;errors&quot; we want to catch</div><div data-l="    #[derive(Debug)]"></div><div data-l="    pub enum MathError {"></div><div data-l="        DivisionByZero,"></div><div data-l="        NonPositiveLogarithm,"></div><div data-l="        NegativeSquareRoot,"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    pub type MathResult = Result&lt;f64, MathError&gt;;"></div><div data-l=""></div><div data-l="    pub fn div(x: f64, y: f64) -&gt; MathResult {"></div><div data-l="        if y == 0.0 {"></div><div data-l="#            // This operation would `fail`, instead let's return the reason of"></div><div data-l="#            // the failure wrapped in `Err`"></div><div data-l="            // ">This operation would <code>fail</code>, instead let's return the reason of the failure wrapped in <code>Err</code></div><div data-l="            Err(MathError::DivisionByZero)"></div><div data-l="        } else {"></div><div data-l="#            // This operation is valid, return the result wrapped in `Ok`"></div><div data-l="            // ">This operation is valid, return the result wrapped in <code>Ok</code></div><div data-l="            Ok(x / y)"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    pub fn sqrt(x: f64) -&gt; MathResult {"></div><div data-l="        if x &lt; 0.0 {"></div><div data-l="            Err(MathError::NegativeSquareRoot)"></div><div data-l="        } else {"></div><div data-l="            Ok(x.sqrt())"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l=""></div><div data-l="    pub fn ln(x: f64) -&gt; MathResult {"></div><div data-l="        if x &lt;= 0.0 {"></div><div data-l="            Err(MathError::NonPositiveLogarithm)"></div><div data-l="        } else {"></div><div data-l="            Ok(x.ln())"></div><div data-l="        }"></div><div data-l="    }"></div><div data-l="}"></div><div data-l=""></div><div data-l="#// `op(x, y)` === `sqrt(ln(x / y))`"></div><div data-l="// "><code>op(x, y)</code> === <code>sqrt(ln(x / y))</code></div><div data-l="fn op(x: f64, y: f64) -&gt; f64 {"></div><div data-l="#    // This is a three level match pyramid!"></div><div data-l="    // ">This is a three level match pyramid!</div><div data-l="    match checked::div(x, y) {"></div><div data-l="        Err(why) =&gt; panic!(&quot;{:?}&quot;, why),"></div><div data-l="        Ok(ratio) =&gt; match checked::ln(ratio) {"></div><div data-l="            Err(why) =&gt; panic!(&quot;{:?}&quot;, why),"></div><div data-l="            Ok(ln) =&gt; match checked::sqrt(ln) {"></div><div data-l="                Err(why) =&gt; panic!(&quot;{:?}&quot;, why),"></div><div data-l="                Ok(sqrt) =&gt; sqrt,"></div><div data-l="            },"></div><div data-l="        },"></div><div data-l="    }"></div><div data-l="}"></div><div data-l=""></div><div data-l="fn main() {"></div><div data-l="#    // Will this fail?"></div><div data-l="    // ">Will this fail?</div><div data-l="    println!(&quot;{}&quot;, op(1.0, 10.0));"></div><div data-l="}"></div></div>